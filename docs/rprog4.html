<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Functional Programming | Engineering Data Analysis in R</title>
  <meta name="description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Functional Programming | Engineering Data Analysis in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Functional Programming | Engineering Data Analysis in R" />
  
  <meta name="twitter:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

<meta name="author" content="John Volckens" />


<meta name="date" content="2024-10-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="eda2.html"/>
<link rel="next" href="transform.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Data Analysis in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#grading"><i class="fa fa-check"></i><b>1.3</b> Grading</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#grading-for-mech-476"><i class="fa fa-check"></i><b>1.3.1</b> Grading for MECH 476</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#homework-submission"><i class="fa fa-check"></i><b>1.3.2</b> Homework submission</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-set-up"><i class="fa fa-check"></i><b>1.4</b> Course set-up</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.4.1</b> Install R and RStudio</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#install-git-and-create-a-github-account"><i class="fa fa-check"></i><b>1.4.2</b> Install Git and create a GitHub account</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#connect-git-github-and-rstudio"><i class="fa fa-check"></i><b>1.4.3</b> Connect Git, GitHub, and RStudio</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#create-new-project-github-first"><i class="fa fa-check"></i><b>1.4.4</b> Create new project, GitHub first</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#use-rstudiogithub-system-for-homework-submission"><i class="fa fa-check"></i><b>1.4.5</b> Use RStudio/GitHub system for homework submission</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#confirm-successful-set-up"><i class="fa fa-check"></i><b>1.4.6</b> Confirm successful set-up</a></li>
<li class="chapter" data-level="1.4.7" data-path="index.html"><a href="index.html#asking-for-help-properly"><i class="fa fa-check"></i><b>1.4.7</b> Asking for help (properly)</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#coursebook"><i class="fa fa-check"></i><b>1.5</b> Coursebook</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>1.5.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rprog1.html"><a href="rprog1.html"><i class="fa fa-check"></i><b>2</b> The R Programming Environment</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rprog1.html"><a href="rprog1.html#ch.-2-objectives"><i class="fa fa-check"></i><b>2.1</b> Ch. 2 Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="rprog1.html"><a href="rprog1.html#r-and-r-studio"><i class="fa fa-check"></i><b>2.2</b> R and R Studio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rprog1.html"><a href="rprog1.html#what-is-r"><i class="fa fa-check"></i><b>2.2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2.2" data-path="rprog1.html"><a href="rprog1.html#free-and-open-source-software"><i class="fa fa-check"></i><b>2.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="2.2.3" data-path="rprog1.html"><a href="rprog1.html#what-is-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rprog1.html"><a href="rprog1.html#communicating-with-r"><i class="fa fa-check"></i><b>2.3</b> Communicating with R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="rprog1.html"><a href="rprog1.html#r-sessions-console-and-command-prompt"><i class="fa fa-check"></i><b>2.3.1</b> R sessions, console, and command prompt</a></li>
<li class="chapter" data-level="2.3.2" data-path="rprog1.html"><a href="rprog1.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>2.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="rprog1.html"><a href="rprog1.html#r-scripts"><i class="fa fa-check"></i><b>2.4</b> R scripts</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rprog1.html"><a href="rprog1.html#commenting-code"><i class="fa fa-check"></i><b>2.4.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rprog1.html"><a href="rprog1.html#the-package-system"><i class="fa fa-check"></i><b>2.5</b> The “package” system</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="rprog1.html"><a href="rprog1.html#r-packages"><i class="fa fa-check"></i><b>2.5.1</b> R packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="rprog1.html"><a href="rprog1.html#installing-from-cran"><i class="fa fa-check"></i><b>2.5.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="2.5.3" data-path="rprog1.html"><a href="rprog1.html#loading-an-installed-package"><i class="fa fa-check"></i><b>2.5.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rprog1.html"><a href="rprog1.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>2.6</b> R’s most basic object types</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="rprog1.html"><a href="rprog1.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="rprog1.html"><a href="rprog1.html#dataframes"><i class="fa fa-check"></i><b>2.6.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="rprog1.html"><a href="rprog1.html#chapter-2-exercises"><i class="fa fa-check"></i><b>2.7</b> Chapter 2 Exercises</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="rprog1.html"><a href="rprog1.html#set-1-session-helpfiles-scripts-and-objects"><i class="fa fa-check"></i><b>2.7.1</b> Set 1: Session, helpfiles, scripts, and objects</a></li>
<li class="chapter" data-level="2.7.2" data-path="rprog1.html"><a href="rprog1.html#set-2-loading-and-using-packages"><i class="fa fa-check"></i><b>2.7.2</b> Set 2: Loading and using packages</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="rprog1.html"><a href="rprog1.html#chapter-2-homework"><i class="fa fa-check"></i><b>2.8</b> Chapter 2 Homework</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="rprog1.html"><a href="rprog1.html#special-swirl-commands"><i class="fa fa-check"></i><b>2.8.1</b> Special <code>swirl</code> commands</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rprog2.html"><a href="rprog2.html"><i class="fa fa-check"></i><b>3</b> Getting and Cleaning Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rprog2.html"><a href="rprog2.html#ch.-3-objectives"><i class="fa fa-check"></i><b>3.1</b> Ch. 3 Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rprog2.html"><a href="rprog2.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="rprog2.html"><a href="rprog2.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.3</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="rprog2.html"><a href="rprog2.html#reading-local-flat-files"><i class="fa fa-check"></i><b>3.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="3.3.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>3.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rprog2.html"><a href="rprog2.html#directories-and-pathnames"><i class="fa fa-check"></i><b>3.4</b> Directories and pathnames</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="rprog2.html"><a href="rprog2.html#directory-structure"><i class="fa fa-check"></i><b>3.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="3.4.2" data-path="rprog2.html"><a href="rprog2.html#working-directory"><i class="fa fa-check"></i><b>3.4.2</b> Working directory</a></li>
<li class="chapter" data-level="3.4.3" data-path="rprog2.html"><a href="rprog2.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>3.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="3.4.4" data-path="rprog2.html"><a href="rprog2.html#tangent-paste"><i class="fa fa-check"></i><b>3.4.4</b> Tangent: <code>paste</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="rprog2.html"><a href="rprog2.html#reading-online-flat-files"><i class="fa fa-check"></i><b>3.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rprog2.html"><a href="rprog2.html#data-cleaning"><i class="fa fa-check"></i><b>3.5</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="rprog2.html"><a href="rprog2.html#renaming-columns"><i class="fa fa-check"></i><b>3.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="3.5.2" data-path="rprog2.html"><a href="rprog2.html#selecting-columns"><i class="fa fa-check"></i><b>3.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="3.5.3" data-path="rprog2.html"><a href="rprog2.html#add-or-change-columns"><i class="fa fa-check"></i><b>3.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="3.5.4" data-path="rprog2.html"><a href="rprog2.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>3.5.4</b> Filtering to certain rows</a></li>
<li class="chapter" data-level="3.5.5" data-path="rprog2.html"><a href="rprog2.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>3.5.5</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rprog2.html"><a href="rprog2.html#merging-data-frames"><i class="fa fa-check"></i><b>3.6</b> Merging Data Frames</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="rprog2.html"><a href="rprog2.html#row-binding"><i class="fa fa-check"></i><b>3.6.1</b> Row Binding</a></li>
<li class="chapter" data-level="3.6.2" data-path="rprog2.html"><a href="rprog2.html#column-binding-_join"><i class="fa fa-check"></i><b>3.6.2</b> Column Binding (_join)</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rprog2.html"><a href="rprog2.html#piping"><i class="fa fa-check"></i><b>3.7</b> Piping</a></li>
<li class="chapter" data-level="3.8" data-path="rprog2.html"><a href="rprog2.html#markdowns"><i class="fa fa-check"></i><b>3.8</b> Markdowns</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="rprog2.html"><a href="rprog2.html#r-markdowns"><i class="fa fa-check"></i><b>3.8.1</b> R Markdowns</a></li>
<li class="chapter" data-level="3.8.2" data-path="rprog2.html"><a href="rprog2.html#header"><i class="fa fa-check"></i><b>3.8.2</b> Header</a></li>
<li class="chapter" data-level="3.8.3" data-path="rprog2.html"><a href="rprog2.html#text"><i class="fa fa-check"></i><b>3.8.3</b> Text</a></li>
<li class="chapter" data-level="3.8.4" data-path="rprog2.html"><a href="rprog2.html#code-chunks"><i class="fa fa-check"></i><b>3.8.4</b> Code Chunks</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="rprog2.html"><a href="rprog2.html#chapter-3-exercises"><i class="fa fa-check"></i><b>3.9</b> Chapter 3 Exercises</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="rprog2.html"><a href="rprog2.html#set-1-pathnames-and-data-import"><i class="fa fa-check"></i><b>3.9.1</b> Set 1: Pathnames and data import</a></li>
<li class="chapter" data-level="3.9.2" data-path="rprog2.html"><a href="rprog2.html#set-2-data-wrangling-and-piping"><i class="fa fa-check"></i><b>3.9.2</b> Set 2: Data wrangling and piping</a></li>
<li class="chapter" data-level="3.9.3" data-path="rprog2.html"><a href="rprog2.html#set-3-r-markdown"><i class="fa fa-check"></i><b>3.9.3</b> Set 3: R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="rprog2.html"><a href="rprog2.html#chapter-3-homework"><i class="fa fa-check"></i><b>3.10</b> Chapter 3 Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>4</b> Data Visualization with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="dataviz.html"><a href="dataviz.html#chapter-4-objectives"><i class="fa fa-check"></i><b>4.1</b> Chapter 4 Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dataviz.html"><a href="dataviz.html#install-and-load-ggplot2"><i class="fa fa-check"></i><b>4.2</b> Install and load <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.3" data-path="dataviz.html"><a href="dataviz.html#steps-to-create-a-ggplot2-object"><i class="fa fa-check"></i><b>4.3</b> Steps to create a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.4" data-path="dataviz.html"><a href="dataviz.html#initializing-a-ggplot2-object"><i class="fa fa-check"></i><b>4.4</b> Initializing a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.5" data-path="dataviz.html"><a href="dataviz.html#plot-aesthetics"><i class="fa fa-check"></i><b>4.5</b> Plot aesthetics</a></li>
<li class="chapter" data-level="4.6" data-path="dataviz.html"><a href="dataviz.html#adding-geoms"><i class="fa fa-check"></i><b>4.6</b> Adding geoms</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="dataviz.html"><a href="dataviz.html#aesthetic-override-a-warning"><i class="fa fa-check"></i><b>4.6.1</b> Aesthetic override: a warning</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="dataviz.html"><a href="dataviz.html#shapes-and-colors"><i class="fa fa-check"></i><b>4.7</b> Shapes and colors</a></li>
<li class="chapter" data-level="4.8" data-path="dataviz.html"><a href="dataviz.html#scales-useful-plot-edits"><i class="fa fa-check"></i><b>4.8</b> Scales: useful plot edits</a></li>
<li class="chapter" data-level="4.9" data-path="dataviz.html"><a href="dataviz.html#ggplot2-example-1"><i class="fa fa-check"></i><b>4.9</b> <code>ggplot2</code> example 1</a></li>
<li class="chapter" data-level="4.10" data-path="dataviz.html"><a href="dataviz.html#ggplot2-example-2"><i class="fa fa-check"></i><b>4.10</b> <code>ggplot2</code> example 2</a></li>
<li class="chapter" data-level="4.11" data-path="dataviz.html"><a href="dataviz.html#store-and-save-ggplot2-objects"><i class="fa fa-check"></i><b>4.11</b> Store and save <code>ggplot2</code> objects</a></li>
<li class="chapter" data-level="4.12" data-path="dataviz.html"><a href="dataviz.html#getting-help-with-ggplot2"><i class="fa fa-check"></i><b>4.12</b> Getting help with <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.13" data-path="dataviz.html"><a href="dataviz.html#chapter-4-homework"><i class="fa fa-check"></i><b>4.13</b> Chapter 4 Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="eda1.html"><a href="eda1.html"><i class="fa fa-check"></i><b>5</b> Univariate Data Exploration</a>
<ul>
<li class="chapter" data-level="5.1" data-path="eda1.html"><a href="eda1.html#ch.-5-objectives"><i class="fa fa-check"></i><b>5.1</b> Ch. 5 Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="eda1.html"><a href="eda1.html#univar"><i class="fa fa-check"></i><b>5.2</b> Univariate Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="eda1.html"><a href="eda1.html#location-dispersion-and-shape"><i class="fa fa-check"></i><b>5.2.1</b> Location, Dispersion, and Shape</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="eda1.html"><a href="eda1.html#quantile"><i class="fa fa-check"></i><b>5.3</b> Quantiles</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="eda1.html"><a href="eda1.html#descriptive-statistics"><i class="fa fa-check"></i><b>5.3.1</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="eda1.html"><a href="eda1.html#univariate-data-visualization"><i class="fa fa-check"></i><b>5.4</b> Univariate Data Visualization</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="eda1.html"><a href="eda1.html#summary-vs.-enumerative-plots"><i class="fa fa-check"></i><b>5.4.1</b> Summary vs. Enumerative Plots</a></li>
<li class="chapter" data-level="5.4.2" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot"><i class="fa fa-check"></i><b>5.4.2</b> Cumulative Distribution Plot</a></li>
<li class="chapter" data-level="5.4.3" data-path="eda1.html"><a href="eda1.html#hist"><i class="fa fa-check"></i><b>5.4.3</b> Histogram</a></li>
<li class="chapter" data-level="5.4.4" data-path="eda1.html"><a href="eda1.html#box"><i class="fa fa-check"></i><b>5.4.4</b> Boxplot</a></li>
<li class="chapter" data-level="5.4.5" data-path="eda1.html"><a href="eda1.html#time_series"><i class="fa fa-check"></i><b>5.4.5</b> Time-Series Plot</a></li>
<li class="chapter" data-level="5.4.6" data-path="eda1.html"><a href="eda1.html#autocorr"><i class="fa fa-check"></i><b>5.4.6</b> Autocorrelation Plot</a></li>
<li class="chapter" data-level="5.4.7" data-path="eda1.html"><a href="eda1.html#partial-autocorrelation-plot"><i class="fa fa-check"></i><b>5.4.7</b> Partial Autocorrelation Plot</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="eda1.html"><a href="eda1.html#exploring-data"><i class="fa fa-check"></i><b>5.5</b> Exploring Data</a></li>
<li class="chapter" data-level="5.6" data-path="eda1.html"><a href="eda1.html#chapter-5-homework"><i class="fa fa-check"></i><b>5.6</b> Chapter 5 Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rprog3.html"><a href="rprog3.html"><i class="fa fa-check"></i><b>6</b> Strings, Dates, and Tidying</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rprog3.html"><a href="rprog3.html#chapter-6-objectives"><i class="fa fa-check"></i><b>6.1</b> Chapter 6 Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="rprog3.html"><a href="rprog3.html#strings"><i class="fa fa-check"></i><b>6.2</b> Strings</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="rprog3.html"><a href="rprog3.html#string-detect-match-subset"><i class="fa fa-check"></i><b>6.2.1</b> String detect, match, subset</a></li>
<li class="chapter" data-level="6.2.2" data-path="rprog3.html"><a href="rprog3.html#regular-expressions"><i class="fa fa-check"></i><b>6.2.2</b> Regular Expressions</a></li>
<li class="chapter" data-level="6.2.3" data-path="rprog3.html"><a href="rprog3.html#string-split-replace"><i class="fa fa-check"></i><b>6.2.3</b> String split, replace</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rprog3.html"><a href="rprog3.html#dates-and-date-times"><i class="fa fa-check"></i><b>6.3</b> Dates and Date-times</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="rprog3.html"><a href="rprog3.html#dates-and-times-in-base-r"><i class="fa fa-check"></i><b>6.3.1</b> Dates and Times in base R</a></li>
<li class="chapter" data-level="6.3.2" data-path="rprog3.html"><a href="rprog3.html#date-time-formats"><i class="fa fa-check"></i><b>6.3.2</b> Date-time formats</a></li>
<li class="chapter" data-level="6.3.3" data-path="rprog3.html"><a href="rprog3.html#date-time-classes-in-r"><i class="fa fa-check"></i><b>6.3.3</b> Date-time classes in R</a></li>
<li class="chapter" data-level="6.3.4" data-path="rprog3.html"><a href="rprog3.html#reading-and-classifying-date-times"><i class="fa fa-check"></i><b>6.3.4</b> Reading and classifying date-times</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="rprog3.html"><a href="rprog3.html#lubridate"><i class="fa fa-check"></i><b>6.4</b> <code>lubridate</code></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="rprog3.html"><a href="rprog3.html#parsing-functions-in-lubridate"><i class="fa fa-check"></i><b>6.4.1</b> Parsing functions in <code>lubridate</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="rprog3.html"><a href="rprog3.html#date-time-manipulation-with-lubridate"><i class="fa fa-check"></i><b>6.4.2</b> Date-time manipulation with <code>lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="rprog3.html"><a href="rprog3.html#tidy-data"><i class="fa fa-check"></i><b>6.5</b> Tidy Data</a></li>
<li class="chapter" data-level="6.6" data-path="rprog3.html"><a href="rprog3.html#chapter-6-exercises"><i class="fa fa-check"></i><b>6.6</b> Chapter 6 Exercises</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="rprog3.html"><a href="rprog3.html#set-1-data-import-and-manipulation"><i class="fa fa-check"></i><b>6.6.1</b> Set 1: Data import and manipulation</a></li>
<li class="chapter" data-level="6.6.2" data-path="rprog3.html"><a href="rprog3.html#set-2-counting"><i class="fa fa-check"></i><b>6.6.2</b> Set 2: Counting</a></li>
<li class="chapter" data-level="6.6.3" data-path="rprog3.html"><a href="rprog3.html#set-3-weekly-tweets"><i class="fa fa-check"></i><b>6.6.3</b> Set 3: Weekly tweets</a></li>
<li class="chapter" data-level="6.6.4" data-path="rprog3.html"><a href="rprog3.html#are-tweets-correlated-in-time"><i class="fa fa-check"></i><b>6.6.4</b> Are tweets correlated in time?</a></li>
<li class="chapter" data-level="6.6.5" data-path="rprog3.html"><a href="rprog3.html#set-4-csu-vs.-cu"><i class="fa fa-check"></i><b>6.6.5</b> Set 4: CSU vs. CU</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="rprog3.html"><a href="rprog3.html#chapter-6-homework"><i class="fa fa-check"></i><b>6.7</b> Chapter 6 Homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="eda2.html"><a href="eda2.html"><i class="fa fa-check"></i><b>7</b> Multivariate Data Exploration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="eda2.html"><a href="eda2.html#chapter-7-objectives"><i class="fa fa-check"></i><b>7.1</b> Chapter 7 Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="eda2.html"><a href="eda2.html#bivariate"><i class="fa fa-check"></i><b>7.2</b> Bivariate Data</a></li>
<li class="chapter" data-level="7.3" data-path="eda2.html"><a href="eda2.html#scatt"><i class="fa fa-check"></i><b>7.3</b> Scatterplot</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="eda2.html"><a href="eda2.html#causality"><i class="fa fa-check"></i><b>7.3.1</b> Causality</a></li>
<li class="chapter" data-level="7.3.2" data-path="eda2.html"><a href="eda2.html#corr"><i class="fa fa-check"></i><b>7.3.2</b> Correlation</a></li>
<li class="chapter" data-level="7.3.3" data-path="eda2.html"><a href="eda2.html#correlation-neq-causation"><i class="fa fa-check"></i><b>7.3.3</b> Correlation <span class="math inline">\(\neq\)</span> causation</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="eda2.html"><a href="eda2.html#exploring-multivariate-data"><i class="fa fa-check"></i><b>7.4</b> Exploring Multivariate Data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="eda2.html"><a href="eda2.html#facets"><i class="fa fa-check"></i><b>7.4.1</b> Facets</a></li>
<li class="chapter" data-level="7.4.2" data-path="eda2.html"><a href="eda2.html#colors"><i class="fa fa-check"></i><b>7.4.2</b> Colors</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="eda2.html"><a href="eda2.html#chapter-7-exercises"><i class="fa fa-check"></i><b>7.5</b> Chapter 7 Exercises</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="eda2.html"><a href="eda2.html#fuel-economy-data"><i class="fa fa-check"></i><b>7.5.1</b> Fuel economy data</a></li>
<li class="chapter" data-level="7.5.2" data-path="eda2.html"><a href="eda2.html#import-and-wrangle-data"><i class="fa fa-check"></i><b>7.5.2</b> Import and wrangle data</a></li>
<li class="chapter" data-level="7.5.3" data-path="eda2.html"><a href="eda2.html#check-data"><i class="fa fa-check"></i><b>7.5.3</b> Check data</a></li>
<li class="chapter" data-level="7.5.4" data-path="eda2.html"><a href="eda2.html#check-for-missing-data"><i class="fa fa-check"></i><b>7.5.4</b> Check for missing data</a></li>
<li class="chapter" data-level="7.5.5" data-path="eda2.html"><a href="eda2.html#visualize-data"><i class="fa fa-check"></i><b>7.5.5</b> Visualize data</a></li>
<li class="chapter" data-level="7.5.6" data-path="eda2.html"><a href="eda2.html#multivariate-time-series"><i class="fa fa-check"></i><b>7.5.6</b> Multivariate time series</a></li>
<li class="chapter" data-level="7.5.7" data-path="eda2.html"><a href="eda2.html#density-plots"><i class="fa fa-check"></i><b>7.5.7</b> Density plots</a></li>
<li class="chapter" data-level="7.5.8" data-path="eda2.html"><a href="eda2.html#more-multivariate-plotting"><i class="fa fa-check"></i><b>7.5.8</b> More multivariate plotting</a></li>
<li class="chapter" data-level="7.5.9" data-path="eda2.html"><a href="eda2.html#practice-questions"><i class="fa fa-check"></i><b>7.5.9</b> Practice questions</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="eda2.html"><a href="eda2.html#chapter-7-homework"><i class="fa fa-check"></i><b>7.6</b> Chapter 7 Homework</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rprog4.html"><a href="rprog4.html"><i class="fa fa-check"></i><b>8</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="8.1" data-path="rprog4.html"><a href="rprog4.html#ch.-8-objectives"><i class="fa fa-check"></i><b>8.1</b> Ch. 8 Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="rprog4.html"><a href="rprog4.html#what-is-functional-programming"><i class="fa fa-check"></i><b>8.2</b> What is <strong><em>functional programming</em></strong>?</a></li>
<li class="chapter" data-level="8.3" data-path="rprog4.html"><a href="rprog4.html#writng-functions"><i class="fa fa-check"></i><b>8.3</b> Writng Functions</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="rprog4.html"><a href="rprog4.html#example-function-my_mean"><i class="fa fa-check"></i><b>8.3.1</b> Example Function: my_mean</a></li>
<li class="chapter" data-level="8.3.2" data-path="rprog4.html"><a href="rprog4.html#example-function-import.w.name"><i class="fa fa-check"></i><b>8.3.2</b> Example Function: “import.w.name”</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="rprog4.html"><a href="rprog4.html#the-purrr-package"><i class="fa fa-check"></i><b>8.4</b> The <code>purrr::</code> package</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="rprog4.html"><a href="rprog4.html#function-mapping"><i class="fa fa-check"></i><b>8.4.1</b> Function Mapping</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="rprog4.html"><a href="rprog4.html#homework"><i class="fa fa-check"></i><b>8.5</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>9</b> Transformations and Other Tricks</a>
<ul>
<li class="chapter" data-level="9.1" data-path="transform.html"><a href="transform.html#ch.-9-objectives"><i class="fa fa-check"></i><b>9.1</b> Ch. 9 Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="transform.html"><a href="transform.html#transformation"><i class="fa fa-check"></i><b>9.2</b> Transformation</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="transform.html"><a href="transform.html#centering"><i class="fa fa-check"></i><b>9.2.1</b> Centering</a></li>
<li class="chapter" data-level="9.2.2" data-path="transform.html"><a href="transform.html#rescaling"><i class="fa fa-check"></i><b>9.2.2</b> Rescaling</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="transform.html"><a href="transform.html#normalization-and-standardization"><i class="fa fa-check"></i><b>9.3</b> Normalization and Standardization</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="transform.html"><a href="transform.html#rate-normalization"><i class="fa fa-check"></i><b>9.3.1</b> Rate normalization</a></li>
<li class="chapter" data-level="9.3.2" data-path="transform.html"><a href="transform.html#standardizing"><i class="fa fa-check"></i><b>9.3.2</b> Standardizing</a></li>
<li class="chapter" data-level="9.3.3" data-path="transform.html"><a href="transform.html#reducing-skewness"><i class="fa fa-check"></i><b>9.3.3</b> Reducing Skewness</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="transform.html"><a href="transform.html#stratification"><i class="fa fa-check"></i><b>9.4</b> Stratification</a></li>
<li class="chapter" data-level="9.5" data-path="transform.html"><a href="transform.html#outliers-and-censoring"><i class="fa fa-check"></i><b>9.5</b> Outliers and Censoring</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="transform.html"><a href="transform.html#outliers"><i class="fa fa-check"></i><b>9.5.1</b> Detecting Outliers</a></li>
<li class="chapter" data-level="9.5.2" data-path="transform.html"><a href="transform.html#censoring-outliers"><i class="fa fa-check"></i><b>9.5.2</b> Censoring outliers</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="transform.html"><a href="transform.html#ch-9-exercises"><i class="fa fa-check"></i><b>9.6</b> Ch-9 Exercises</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="transform.html"><a href="transform.html#salary-data-for-poly-sci-majors"><i class="fa fa-check"></i><b>9.6.1</b> Salary Data for Poly Sci Majors</a></li>
<li class="chapter" data-level="9.6.2" data-path="transform.html"><a href="transform.html#univariate-data-visualization-1"><i class="fa fa-check"></i><b>9.6.2</b> Univariate Data Visualization</a></li>
<li class="chapter" data-level="9.6.3" data-path="transform.html"><a href="transform.html#rescale-and-censor-data"><i class="fa fa-check"></i><b>9.6.3</b> Rescale and Censor Data</a></li>
<li class="chapter" data-level="9.6.4" data-path="transform.html"><a href="transform.html#logfit"><i class="fa fa-check"></i><b>9.6.4</b> Fit a Log-normal Distribution</a></li>
<li class="chapter" data-level="9.6.5" data-path="transform.html"><a href="transform.html#plot-fitted-vs-actual-data"><i class="fa fa-check"></i><b>9.6.5</b> Plot Fitted vs Actual Data</a></li>
<li class="chapter" data-level="9.6.6" data-path="transform.html"><a href="transform.html#transform-the-data"><i class="fa fa-check"></i><b>9.6.6</b> Transform the Data</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="transform.html"><a href="transform.html#ch-9-homework"><i class="fa fa-check"></i><b>9.7</b> Ch-9 Homework</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="measure.html"><a href="measure.html"><i class="fa fa-check"></i><b>10</b> Measurement</a>
<ul>
<li class="chapter" data-level="10.1" data-path="measure.html"><a href="measure.html#ch.-10-objectives"><i class="fa fa-check"></i><b>10.1</b> Ch. 10 Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="measure.html"><a href="measure.html#sampling"><i class="fa fa-check"></i><b>10.2</b> Sampling</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="measure.html"><a href="measure.html#sample"><i class="fa fa-check"></i><b>10.2.1</b> Samples vs. Populations</a></li>
<li class="chapter" data-level="10.2.2" data-path="measure.html"><a href="measure.html#sample.collect"><i class="fa fa-check"></i><b>10.2.2</b> Collecting a sample</a></li>
<li class="chapter" data-level="10.2.3" data-path="measure.html"><a href="measure.html#simple-random-sampling"><i class="fa fa-check"></i><b>10.2.3</b> Simple Random Sampling</a></li>
<li class="chapter" data-level="10.2.4" data-path="measure.html"><a href="measure.html#systematic-sampling"><i class="fa fa-check"></i><b>10.2.4</b> Systematic Sampling</a></li>
<li class="chapter" data-level="10.2.5" data-path="measure.html"><a href="measure.html#stratified-sampling"><i class="fa fa-check"></i><b>10.2.5</b> Stratified Sampling</a></li>
<li class="chapter" data-level="10.2.6" data-path="measure.html"><a href="measure.html#cluster-sampling"><i class="fa fa-check"></i><b>10.2.6</b> Cluster Sampling</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="measure.html"><a href="measure.html#figures-of-merit"><i class="fa fa-check"></i><b>10.3</b> Figures of Merit</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="measure.html"><a href="measure.html#LOD"><i class="fa fa-check"></i><b>10.3.1</b> Limit of Detection &amp; Quantification</a></li>
<li class="chapter" data-level="10.3.2" data-path="measure.html"><a href="measure.html#dynamic"><i class="fa fa-check"></i><b>10.3.2</b> Dynamic Range</a></li>
<li class="chapter" data-level="10.3.3" data-path="measure.html"><a href="measure.html#precision"><i class="fa fa-check"></i><b>10.3.3</b> Precision</a></li>
<li class="chapter" data-level="10.3.4" data-path="measure.html"><a href="measure.html#bias"><i class="fa fa-check"></i><b>10.3.4</b> Bias (accuracy)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="measure.html"><a href="measure.html#measurement-uncertainty"><i class="fa fa-check"></i><b>10.4</b> Measurement Uncertainty</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="measure.html"><a href="measure.html#repeated"><i class="fa fa-check"></i><b>10.4.1</b> Repeated Measures</a></li>
<li class="chapter" data-level="10.4.2" data-path="measure.html"><a href="measure.html#error-propagation"><i class="fa fa-check"></i><b>10.4.2</b> Error Propagation</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="measure.html"><a href="measure.html#ch-10-homework"><i class="fa fa-check"></i><b>10.5</b> CH-10 Homework</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>11</b> Modeling</a>
<ul>
<li class="chapter" data-level="11.1" data-path="model.html"><a href="model.html#ch.-11-objectives"><i class="fa fa-check"></i><b>11.1</b> Ch. 11 Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="model.html"><a href="model.html#process-modeling"><i class="fa fa-check"></i><b>11.2</b> Process Modeling</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="model.html"><a href="model.html#assumptions"><i class="fa fa-check"></i><b>11.2.1</b> Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="model.html"><a href="model.html#model-fitting"><i class="fa fa-check"></i><b>11.3</b> Model Fitting</a></li>
<li class="chapter" data-level="11.4" data-path="model.html"><a href="model.html#ols-regression"><i class="fa fa-check"></i><b>11.4</b> OLS Regression</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="model.html"><a href="model.html#OLS_assum"><i class="fa fa-check"></i><b>11.4.1</b> OLS Assumptions and Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="model.html"><a href="model.html#example-ols-linear-regression"><i class="fa fa-check"></i><b>11.5</b> Example: OLS Linear Regression</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="model.html"><a href="model.html#the-lm-function"><i class="fa fa-check"></i><b>11.5.1</b> The <code>lm()</code> function</a></li>
<li class="chapter" data-level="11.5.2" data-path="model.html"><a href="model.html#ols-diagnostics"><i class="fa fa-check"></i><b>11.5.2</b> OLS Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="model.html"><a href="model.html#calibration"><i class="fa fa-check"></i><b>11.6</b> Calibration</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="model.html"><a href="model.html#example-calibration"><i class="fa fa-check"></i><b>11.6.1</b> Example Calibration</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="model.html"><a href="model.html#ch-11-homework"><i class="fa fa-check"></i><b>11.7</b> Ch-11 Homework</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="dist.html"><a href="dist.html"><i class="fa fa-check"></i><b>12</b> Appendix: Stats &amp; Reference Distributions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="dist.html"><a href="dist.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>12.1</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="12.2" data-path="dist.html"><a href="dist.html#measures-of-dispersion"><i class="fa fa-check"></i><b>12.2</b> Measures of Dispersion</a></li>
<li class="chapter" data-level="12.3" data-path="dist.html"><a href="dist.html#unif_dist"><i class="fa fa-check"></i><b>12.3</b> Uniform Distribution</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="dist.html"><a href="dist.html#uniform-characteristic-plots"><i class="fa fa-check"></i><b>12.3.1</b> Uniform Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="dist.html"><a href="dist.html#normal_dist"><i class="fa fa-check"></i><b>12.4</b> Normal Distribution</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="dist.html"><a href="dist.html#normal-characteristic-plots"><i class="fa fa-check"></i><b>12.4.1</b> Normal Characteristic Plots</a></li>
<li class="chapter" data-level="12.4.2" data-path="dist.html"><a href="dist.html#rule"><i class="fa fa-check"></i><b>12.4.2</b> 68-95-99 rule</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="dist.html"><a href="dist.html#log_normal_dist"><i class="fa fa-check"></i><b>12.5</b> Log-normal Distribution</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="dist.html"><a href="dist.html#lognormal-characteristic-plots"><i class="fa fa-check"></i><b>12.5.1</b> Lognormal Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="dist.html"><a href="dist.html#pearson"><i class="fa fa-check"></i><b>12.6</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="dist.html"><a href="dist.html#anscombes-quartet"><i class="fa fa-check"></i><b>12.6.1</b> Anscombe’s Quartet</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="dist.html"><a href="dist.html#OLS"><i class="fa fa-check"></i><b>12.7</b> OLS Regression Coefficients</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Data Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rprog4" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Chapter 8</span> Functional Programming<a href="rprog4.html#rprog4" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="ch.-8-objectives" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Ch. 8 Objectives<a href="rprog4.html#ch.-8-objectives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter is designed around the following learning objectives for functional
programming in R. Upon completing this chapter, you should be able to:</p>
<ul>
<li>Describe the basic tenets of functional programming</li>
<li>Define functions and their basic attributes</li>
<li>Create simple functions using named and optional arguments</li>
<li>Define the meaning of <em>“vectorized operations”</em> in R</li>
<li>Interpret and apply the <code>purrr::map</code> family of functions</li>
</ul>
</div>
<div id="what-is-functional-programming" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> What is <strong><em>functional programming</em></strong>?<a href="rprog4.html#what-is-functional-programming" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>Functional programming</em> means just that: programming with functions. A basic
philosophy of functional programming in R is to replace “for-loops” with functions.
While there isn’t anything inherently wrong with for-loops, they can be difficult
to follow, especially when they are nested within one to another.
R is well-poised to support the elimination of “for-loops” because R is a
<em>vectorized language</em>. To be vectorized means that you don’t need a for-loop to
execute this code:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="rprog4.html#cb286-1" tabindex="-1"></a>evens <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2</span>, <span class="at">to =</span> <span class="dv">20</span>, <span class="at">by =</span> <span class="dv">2</span>)  </span>
<span id="cb286-2"><a href="rprog4.html#cb286-2" tabindex="-1"></a>evens_squared <span class="ot">&lt;-</span> evens<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<p>with code like this:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="rprog4.html#cb287-1" tabindex="-1"></a>evens_squared <span class="ot">&lt;-</span> <span class="cf">for</span>( i <span class="cf">in</span> <span class="fu">length</span>(evens)){  </span>
<span id="cb287-2"><a href="rprog4.html#cb287-2" tabindex="-1"></a>  evens_squared <span class="ot">&lt;-</span> evens[i] <span class="sc">*</span> evens[i] </span>
<span id="cb287-3"><a href="rprog4.html#cb287-3" tabindex="-1"></a>}</span></code></pre></div>
<p>The top code performs the <code>squared</code> operator across each entry in the
vector, one after another. The bottom set uses a for-loop to accomplish the
same task, albeit in a longer (and harder to follow) version.</p>
<p>The pipe operator <code>%&gt;%</code> is an ally in this endeavor because it allows you to
pass an object (like a vector or data frame) through series of functions in serial order. The pipe function is also easier to follow (with your mind) because
it allows you to interpret the code as if you were reading instructions in a
“how-to” manual:
<em>“take this object, then do this, then do this, then do that”</em>. <strong>Without</strong> the <code>%&gt;%</code>
operator, we are forced to nest functions together or write long and verbose
code that steps through treatments slowly (and somewhat painfully). Looking at
the code below should make clear which set is easier to comprehend:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="rprog4.html#cb288-1" tabindex="-1"></a><span class="co">#nested code</span></span>
<span id="cb288-2"><a href="rprog4.html#cb288-2" tabindex="-1"></a>daily_show_2000 <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="fu">filter</span>(<span class="fu">rename</span>(daily_show, </span>
<span id="cb288-3"><a href="rprog4.html#cb288-3" tabindex="-1"></a>                                          <span class="at">year =</span> YEAR, </span>
<span id="cb288-4"><a href="rprog4.html#cb288-4" tabindex="-1"></a>                                          <span class="at">job =</span> GoogleKnowlege_Occupation, </span>
<span id="cb288-5"><a href="rprog4.html#cb288-5" tabindex="-1"></a>                                          <span class="at">date =</span> Show, </span>
<span id="cb288-6"><a href="rprog4.html#cb288-6" tabindex="-1"></a>                                          <span class="at">name =</span> Raw_Guest_List), </span>
<span id="cb288-7"><a href="rprog4.html#cb288-7" tabindex="-1"></a>                                   year <span class="sc">==</span> <span class="dv">2000</span>), </span>
<span id="cb288-8"><a href="rprog4.html#cb288-8" tabindex="-1"></a>                            job, date, name)</span>
<span id="cb288-9"><a href="rprog4.html#cb288-9" tabindex="-1"></a><span class="co">#piped code</span></span>
<span id="cb288-10"><a href="rprog4.html#cb288-10" tabindex="-1"></a>daily_show_2000 <span class="ot">&lt;-</span> daily_show <span class="sc">%&gt;%</span></span>
<span id="cb288-11"><a href="rprog4.html#cb288-11" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">year =</span> YEAR, </span>
<span id="cb288-12"><a href="rprog4.html#cb288-12" tabindex="-1"></a>         <span class="at">job =</span> GoogleKnowlege_Occupation, </span>
<span id="cb288-13"><a href="rprog4.html#cb288-13" tabindex="-1"></a>         <span class="at">date =</span> Show, </span>
<span id="cb288-14"><a href="rprog4.html#cb288-14" tabindex="-1"></a>         <span class="at">name =</span> Raw_Guest_List) <span class="sc">%&gt;%</span></span>
<span id="cb288-15"><a href="rprog4.html#cb288-15" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb288-16"><a href="rprog4.html#cb288-16" tabindex="-1"></a>  <span class="fu">select</span>(job, date, name)</span></code></pre></div>
<p>In the nested example above, we “see” the <code>dplyr::select()</code> function first,
yet the arguments to this function show up last (at the end of the nested code).
This separation between functions and their arguments only gets worse as the
degree of nesting increases. The piped code, however, produces the same result
as the nested code but in a much more “readable” fashion. A similar analogy
holds for the nesting of “for-loops” (which, when nested, are even
harder to follow!).</p>
</div>
<div id="writng-functions" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Writng Functions<a href="rprog4.html#writng-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p><span style="color: blue;"> “If you have to do something more than twice,
use a function to do it.” - Programming Proverb </span></p>
</blockquote>
<p>Up to this point, we have relied entirely on functions sourced from base R or
from packages like <code>Tidyverse::</code>(and for good reason - they are very useful).<br />
Every programmer, however, at some point in their journey, discovers that the
function they are desiring simply doesn’t exist - at least not in the way that
suits their vision. To that end, it’s worth learning how to create your own
functions.</p>
<p>The syntax for function generation is relatively straight forward:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb289-1"><a href="rprog4.html#cb289-1" tabindex="-1"></a><span class="co">#example code; will not run</span></span>
<span id="cb289-2"><a href="rprog4.html#cb289-2" tabindex="-1"></a></span>
<span id="cb289-3"><a href="rprog4.html#cb289-3" tabindex="-1"></a>function_name <span class="ot">&lt;-</span> <span class="cf">function</span>(argument1, argument2, ...) {</span>
<span id="cb289-4"><a href="rprog4.html#cb289-4" tabindex="-1"></a>   <span class="co"># insert code to manipulate arguments here</span></span>
<span id="cb289-5"><a href="rprog4.html#cb289-5" tabindex="-1"></a>   <span class="co"># maybe some code to check validity of input arguments</span></span>
<span id="cb289-6"><a href="rprog4.html#cb289-6" tabindex="-1"></a>   <span class="co"># specify a return value, if desired</span></span>
<span id="cb289-7"><a href="rprog4.html#cb289-7" tabindex="-1"></a>}</span></code></pre></div>
<p>Each function has <strong>arguments</strong> as input, <strong>body code</strong> as the working parts, and
an <strong>environment</strong> where the function resides. These components can be
accessed by passing the function name as an argument to:</p>
<ul>
<li><code>formals()</code>, to see arguments</li>
<li><code>body()</code>, to see the function’s code
<ul>
<li>or type just the function name, without <code>()</code>, into the console</li>
<li><em>but note that many base R functions are coded in C++</em> and can be accessed
<a href="https://github.com/wch/r-source" target="_blank">on GitHub</a>.</li>
</ul></li>
<li><code>environment()</code>, to see where the function resides.
<ul>
<li>more on <em>R environments</em> below</li>
</ul></li>
</ul>
<div id="example-function-my_mean" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Example Function: my_mean<a href="rprog4.html#example-function-my_mean" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s create a simple function, named <code>my_mean</code>, to calculate the arithmetic mean
for a numeric vector. This function takes only one argument, a vector <code>x</code>, for
which we calculate the mean (<code>sum(x) / length(x)</code>), assign it to a
value <code>y</code>, and the return <code>y</code> as output. Note that all the <em>“action”</em> for <code>my_mean</code>
happens within the curly braces <code>{ }</code> that follow the function assignment.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="rprog4.html#cb290-1" tabindex="-1"></a>my_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb290-2"><a href="rprog4.html#cb290-2" tabindex="-1"></a>     y <span class="ot">&lt;-</span> <span class="fu">sum</span>(x) <span class="sc">/</span> <span class="fu">length</span>(x) </span>
<span id="cb290-3"><a href="rprog4.html#cb290-3" tabindex="-1"></a>     <span class="fu">return</span>(y)</span>
<span id="cb290-4"><a href="rprog4.html#cb290-4" tabindex="-1"></a>   }</span>
<span id="cb290-5"><a href="rprog4.html#cb290-5" tabindex="-1"></a></span>
<span id="cb290-6"><a href="rprog4.html#cb290-6" tabindex="-1"></a><span class="fu">my_mean</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>While this function is simple and straightforward, it does have some limitations.
For example, what happens if we pass a character vector to <code>my_mean</code> or a numeric
vector that contains <code>NA</code> values? In the former case, we will get an error
because our function uses the base R function <code>sum()</code>, which requires numeric,
logical, or complex vectors as input (so our function inherits the properties
of that function).</p>
<p>If any <code>NA</code> values are present, however, we are less fortunate: only NA is
returned. This many not seem like a big deal but if your analysis depends on
calling <code>my_mean</code> in several locations (over and over), you might have a hard
time debugging it…</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="rprog4.html#cb292-1" tabindex="-1"></a><span class="fu">my_mean</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="cn">NA</span>))</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>For this reason, functions often contain <em>optional arguments</em> that allow the user
to specify how to handle such errors. The function <code>my_mean2</code> below contains
an optional argument, <code>na.rm = TRUE</code>, that defaults to remove <code>NA</code> values when
present. This function uses <code>if else</code> logic to handle the <code>na.rm = TRUE</code>
argument, since this argument can only have one of two values.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="rprog4.html#cb294-1" tabindex="-1"></a>my_mean2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb294-2"><a href="rprog4.html#cb294-2" tabindex="-1"></a>  <span class="cf">if</span> (na.rm <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb294-3"><a href="rprog4.html#cb294-3" tabindex="-1"></a>    y <span class="ot">&lt;-</span> <span class="fu">sum</span>(x) <span class="sc">/</span> <span class="fu">length</span>(x)</span>
<span id="cb294-4"><a href="rprog4.html#cb294-4" tabindex="-1"></a>    <span class="fu">return</span>(y)</span>
<span id="cb294-5"><a href="rprog4.html#cb294-5" tabindex="-1"></a>    }</span>
<span id="cb294-6"><a href="rprog4.html#cb294-6" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb294-7"><a href="rprog4.html#cb294-7" tabindex="-1"></a>    y <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">na.omit</span>(x)) <span class="sc">/</span> <span class="fu">length</span>(<span class="fu">na.omit</span>(x))</span>
<span id="cb294-8"><a href="rprog4.html#cb294-8" tabindex="-1"></a>    <span class="fu">return</span>(y)</span>
<span id="cb294-9"><a href="rprog4.html#cb294-9" tabindex="-1"></a>    }</span>
<span id="cb294-10"><a href="rprog4.html#cb294-10" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, when we pass a vector containing <code>NAs</code> to <code>my_mean2</code>, we get a numeric
result.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb295-1"><a href="rprog4.html#cb295-1" tabindex="-1"></a><span class="fu">my_mean2</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,<span class="cn">NA</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>A couple points worth noting about the functions above. First, take note that
most <em>homemade</em> functions rely on other functions called within their body text,
and so they inherit the properties of those functions.<br />
Second, you may have noticed that while
the <code>body()</code> code in <code>my_mean2</code> assigns the mean of <code>x</code> to a new variable, <code>y</code>,
this function-specific variable does not show up in the <strong>“Global Environment”</strong>
pane after the function is executed. This is due to how <em>environments</em> are created in R: an <em>environment</em> essentially draws walls around objects.</p>
<p>Indeed, objects that are defined within functions are part of the <em>evaluation</em>
<em>environment</em> within that function, even if the function returns the value of
the object as output (<em>“what happens inside functions stays inside functions”</em>).
A detailed discussion on R environments is beyond the scope of this book,
look <a href="https://www.r-bloggers.com/environments-in-r/" target="_blank">here</a>
for an introduction to environments and
<a href="https://adv-r.hadley.nz/environments.html" target="_blank">here</a>
for a more detailed tutorial.
The take-home point is that a homemade function can exist within the global
environment and return values to the global environment, even if some of the objects
created within that function don’t show up in the global environment.</p>
</div>
<div id="example-function-import.w.name" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Example Function: “import.w.name”<a href="rprog4.html#example-function-import.w.name" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Oftentimes, you will have a list of files of the same type/structure
that you want to import and analyze in a single data frame. This exercise (and
the section that follows) will demonstrate how you can streamline that process
using functional programming. Let’s create a function to <em>“import a file with</em>
<em>its name appended”.</em></p>
<p>For this example, assume that your files represent data from a network of sensors,
where the name/ID assigned to each sensor is <strong>included in its file name</strong> but
<em>not in the file itself</em>. To give you an example of what we are working with,
let’s use <code>list.files()</code> to look at the file names and paths (<em>note: you can find this</em>
<em>.zip file on our Canvas site</em>). For this exercise,
we show a short list of 8 files (4 each from two sensors) but one could imagine
this list being hundreds of entries.<em>To Note: these are real data collected</em>
<em>using sensors from</em>
<em><a href="http://www.purpleair.com/map" target="_blank">this citizen-science network</a></em>
<em>and published</em>
<em>by our research group</em>
<em><a href="https://doi.org/10.1016/j.atmosenv.2019.117067" target="_blank">here</a> in 2019.</em>
The “PA” in each file name stands for
<a href="https://www2.purpleair.com/" target="_blank">Purple Air</a>.</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="rprog4.html#cb297-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&#39;./data/purpleair/&#39;</span>, <span class="at">full.names=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;./data/purpleair//PA019_20181022.csv&quot;
## [2] &quot;./data/purpleair//PA019_20181023.csv&quot;
## [3] &quot;./data/purpleair//PA019_20181024.csv&quot;
## [4] &quot;./data/purpleair//PA019_20181025.csv&quot;
## [5] &quot;./data/purpleair//PA020_20181022.csv&quot;
## [6] &quot;./data/purpleair//PA020_20181023.csv&quot;
## [7] &quot;./data/purpleair//PA020_20181024.csv&quot;
## [8] &quot;./data/purpleair//PA020_20181025.csv&quot;</code></pre>
<p>Thus, we wish to write a function that not only imports these .csv files into a data
frame but also extracts the part of the file name (i.e., PA019 and PA020)
as one of the data columns (otherwise, when the data were combined we might not know what data was associated with a given sensor!). In this function we will also
include a step to clean up the newly created data frame with a call to
<code>dplyr::select()</code> to retain only a few variables of interest. Seeing that these
files are .csv, we can leverage <code>readr::read_csv</code></p>
<div class="sourceCode" id="cb299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb299-1"><a href="rprog4.html#cb299-1" tabindex="-1"></a><span class="co"># create an object that tracks the file names and file paths</span></span>
<span id="cb299-2"><a href="rprog4.html#cb299-2" tabindex="-1"></a>file_list <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&#39;./data/purpleair/&#39;</span>, <span class="at">full.names=</span><span class="cn">TRUE</span>)</span>
<span id="cb299-3"><a href="rprog4.html#cb299-3" tabindex="-1"></a></span>
<span id="cb299-4"><a href="rprog4.html#cb299-4" tabindex="-1"></a><span class="co"># function to import a .csv and include part of the filename as a data column</span></span>
<span id="cb299-5"><a href="rprog4.html#cb299-5" tabindex="-1"></a>import.w.name <span class="ot">&lt;-</span> <span class="cf">function</span>(pathname) {</span>
<span id="cb299-6"><a href="rprog4.html#cb299-6" tabindex="-1"></a>  <span class="co">#create a tibble by importing the &#39;pathname&#39; file</span></span>
<span id="cb299-7"><a href="rprog4.html#cb299-7" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(pathname, <span class="at">col_names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb299-8"><a href="rprog4.html#cb299-8" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb299-9"><a href="rprog4.html#cb299-9" tabindex="-1"></a>    <span class="co"># use stringr::str_extract &amp; a regex to get sensor ID from file name</span></span>
<span id="cb299-10"><a href="rprog4.html#cb299-10" tabindex="-1"></a>    <span class="co"># regex translation: &quot;look for a /, then extract all letters and numbers that follow until _&quot;</span></span>
<span id="cb299-11"><a href="rprog4.html#cb299-11" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">sensor_ID =</span> <span class="fu">str_extract</span>(pathname, </span>
<span id="cb299-12"><a href="rprog4.html#cb299-12" tabindex="-1"></a>                                  <span class="st">&quot;(?&lt;=//)[:alnum:]+(?=_)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb299-13"><a href="rprog4.html#cb299-13" tabindex="-1"></a>    <span class="co"># return only a few salient variables to the resultant data frame using dplyr::select</span></span>
<span id="cb299-14"><a href="rprog4.html#cb299-14" tabindex="-1"></a>    <span class="fu">select</span>(UTCDateTime, </span>
<span id="cb299-15"><a href="rprog4.html#cb299-15" tabindex="-1"></a>           current_temp_f, </span>
<span id="cb299-16"><a href="rprog4.html#cb299-16" tabindex="-1"></a>           current_humidity, </span>
<span id="cb299-17"><a href="rprog4.html#cb299-17" tabindex="-1"></a>           pressure,</span>
<span id="cb299-18"><a href="rprog4.html#cb299-18" tabindex="-1"></a>           pm2_5_atm,</span>
<span id="cb299-19"><a href="rprog4.html#cb299-19" tabindex="-1"></a>           sensor_ID) <span class="sc">%&gt;%</span></span>
<span id="cb299-20"><a href="rprog4.html#cb299-20" tabindex="-1"></a>    <span class="fu">na.omit</span>() <span class="co"># remove NA values, which happens when sensor goes offline</span></span>
<span id="cb299-21"><a href="rprog4.html#cb299-21" tabindex="-1"></a>  <span class="fu">return</span>(df)</span>
<span id="cb299-22"><a href="rprog4.html#cb299-22" tabindex="-1"></a>}</span></code></pre></div>
<p>After sourcing this function, we can test it out on the first entry of our list
of files. <em>We specify the first entry with a subset to</em> <code>file_list[1]</code>.</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="rprog4.html#cb300-1" tabindex="-1"></a>PA_data_1 <span class="ot">&lt;-</span> <span class="fu">import.w.name</span>(file_list[<span class="dv">1</span>])</span>
<span id="cb300-2"><a href="rprog4.html#cb300-2" tabindex="-1"></a></span>
<span id="cb300-3"><a href="rprog4.html#cb300-3" tabindex="-1"></a><span class="fu">head</span>(PA_data_1)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##   UTCDateTime       current_temp_f current_humidity pressure pm2_5_atm sensor_ID
##   &lt;chr&gt;                      &lt;dbl&gt;            &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;    
## 1 2018/10/22T17:52…             90               12     852.      2.45 PA019    
## 2 2018/10/22T17:53…             86               13     852.      3.43 PA019    
## 3 2018/10/22T17:55…             87               13     852.      2.76 PA019    
## 4 2018/10/22T17:56…             87               13     852.      2    PA019    
## 5 2018/10/22T17:58…             87               13     852.      1.82 PA019    
## 6 2018/10/22T17:59…             87               13     852.      1.98 PA019</code></pre>
<p>The <code>import.w.name()</code> function is useful, but not versatile;
it was written to handle a special type of file with a particular naming
convention. Those limitations aside, one could imagine how this function could
be easily adapted to suit other file types and formats. As you develop your
coding skills, a good strategy is to keep useful functions in a .R script
file so that you can call upon them when needed: <code>source(import.w.name.R)</code></p>
</div>
</div>
<div id="the-purrr-package" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> The <code>purrr::</code> package<a href="rprog4.html#the-purrr-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>purrr::</code> package was designed specifically with functional programming in mind.
Similar to the discussion of <em>vectorized operations</em> above, <code>purrr::</code> was created
to help you apply functions to vectors in a way that is easy to implement and
easy to “read”.</p>
<div id="function-mapping" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Function Mapping<a href="rprog4.html#function-mapping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>map_</code> family of functions are the core of the <code>purrr</code> package. These
functions are intended to <em>map</em> functions (i.e., to apply them) to individual elements in a vector (or data frames); the <code>map_</code> functions are similar to functions like <code>lapply()</code> and <code>vapply()</code> from base R (but more versatile). <em>“Mapping”</em> a function onto a vector is a common theme of functional programming. To illustrate how the <code>map_</code> functions work, its best to visualize the process first.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:map-anno1"></span>
<img src="images/map_anno1.png" alt="The map functions transform their input by applying a function to each element of a list or atomic vector and returning an object of the same length as the input."  />
<p class="caption">
Figure 8.1: The map functions transform their input by applying a function to each element of a list or atomic vector and returning an object of the same length as the input.
</p>
</div>
<p>As shown above in Figure <a href="rprog4.html#fig:map-anno1">8.1</a>, the generic form of <code>map()</code> always returns a <code>list</code> object as the output (thanks to Hadley Wickham for the <a href="https://adv-r.hadley.nz/functionals.html#map" target="_blank">graphic</a>). A <code>list</code> is a generic vector that can contain multiple objects (other vectors, data frames, etc.). Indeed, a data frame (and a <code>tibble</code>) is a special kind of list: a data frame is a list of vectors (columns) of equal length. A data frame can contain different vector objects but those objects must be placed in separate columns and each column vector must be the same length (when all the columns are equal length that means that data frames are <em>rectangular</em> lists). A generic <code>list</code> does not need to be rectangular because generic list entries are more distinct. Further, a list can contain another list (like a set of small boxes that are nested within a larger box). Think of a <code>list</code> like a drawer organizer - it can contain lots of different objects, all of which might be related to another in some way or, at least, might be used together for some common purpose. To review:</p>
<ul>
<li>A <strong><em>vector</em></strong> is a one-dimensional object where all the entries are the same type.<br />
</li>
<li>A <strong><em>matrix</em></strong> is a two-dimensional (rectangular) object where all entries are the same type, but ordered into <em>rows</em> and <em>column</em> indices.</li>
<li>A <strong><em>data frame</em></strong> is a two dimensional (rectangular) object that contains columns of different vectors. The type of vector (e.g., <code>character</code>, <code>numeric</code>, <code>logical</code>, etc.) can differ from one column to the next but all entries within each vector column must be the same.</li>
<li>A <strong><em>list</em></strong> can contain different vector objects of different types and different lengths. A list can also contain other lists. A list does not need to be rectangular.</li>
</ul>
<p>To illustrate the versatility of lists, let’s create one that contains a numeric vector, a matrix, and a data frame.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="rprog4.html#cb302-1" tabindex="-1"></a>my.chr.vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Harry&quot;</span>, <span class="st">&quot;Ron&quot;</span>, <span class="st">&quot;Hermione&quot;</span>, <span class="st">&quot;Draco&quot;</span>)</span>
<span id="cb302-2"><a href="rprog4.html#cb302-2" tabindex="-1"></a></span>
<span id="cb302-3"><a href="rprog4.html#cb302-3" tabindex="-1"></a>my.num.matrix <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">data =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">nrow=</span><span class="dv">5</span>)</span>
<span id="cb302-4"><a href="rprog4.html#cb302-4" tabindex="-1"></a></span>
<span id="cb302-5"><a href="rprog4.html#cb302-5" tabindex="-1"></a>my.df <span class="ot">&lt;-</span> <span class="fu">slice_sample</span>(<span class="at">.data =</span> mpg, <span class="at">n=</span><span class="dv">7</span>)</span>
<span id="cb302-6"><a href="rprog4.html#cb302-6" tabindex="-1"></a></span>
<span id="cb302-7"><a href="rprog4.html#cb302-7" tabindex="-1"></a>my.list <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;entry_1&quot;</span> <span class="ot">=</span> my.chr.vector, </span>
<span id="cb302-8"><a href="rprog4.html#cb302-8" tabindex="-1"></a>                <span class="st">&quot;entry_2&quot;</span> <span class="ot">=</span> my.num.matrix, </span>
<span id="cb302-9"><a href="rprog4.html#cb302-9" tabindex="-1"></a>                <span class="st">&quot;entry_3&quot;</span> <span class="ot">=</span> my.df)</span>
<span id="cb302-10"><a href="rprog4.html#cb302-10" tabindex="-1"></a></span>
<span id="cb302-11"><a href="rprog4.html#cb302-11" tabindex="-1"></a><span class="fu">glimpse</span>(my.list)</span></code></pre></div>
<pre><code>## List of 3
##  $ entry_1: chr [1:4] &quot;Harry&quot; &quot;Ron&quot; &quot;Hermione&quot; &quot;Draco&quot;
##  $ entry_2: int [1:5, 1:4] 1 2 3 4 5 6 7 8 9 10 ...
##  $ entry_3: tibble [7 × 11] (S3: tbl_df/tbl/data.frame)
##   ..$ manufacturer: chr [1:7] &quot;audi&quot; &quot;dodge&quot; &quot;toyota&quot; &quot;volkswagen&quot; ...
##   ..$ model       : chr [1:7] &quot;a4 quattro&quot; &quot;dakota pickup 4wd&quot; &quot;camry solara&quot; &quot;passat&quot; ...
##   ..$ displ       : num [1:7] 2.8 3.7 3 1.8 4 4.7 1.8
##   ..$ year        : int [1:7] 1999 2008 1999 1999 2008 2008 1999
##   ..$ cyl         : int [1:7] 6 6 6 4 6 8 4
##   ..$ trans       : chr [1:7] &quot;auto(l5)&quot; &quot;manual(m6)&quot; &quot;auto(l4)&quot; &quot;auto(l5)&quot; ...
##   ..$ drv         : chr [1:7] &quot;4&quot; &quot;4&quot; &quot;f&quot; &quot;f&quot; ...
##   ..$ cty         : int [1:7] 15 15 18 18 16 9 24
##   ..$ hwy         : int [1:7] 25 19 26 29 23 12 33
##   ..$ fl          : chr [1:7] &quot;p&quot; &quot;r&quot; &quot;r&quot; &quot;p&quot; ...
##   ..$ class       : chr [1:7] &quot;compact&quot; &quot;pickup&quot; &quot;compact&quot; &quot;midsize&quot; ...</code></pre>
<p>Lists can be accessed in similar ways to vectors. For example, by using single-bracket indexing, <code>[ ]</code>, a list element is returned.</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="rprog4.html#cb304-1" tabindex="-1"></a>my.list[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## $entry_1
## [1] &quot;Harry&quot;    &quot;Ron&quot;      &quot;Hermione&quot; &quot;Draco&quot;</code></pre>
<p>Note that <em>“single bracket”</em> indexing returns a “list element” of class: <code>list</code>.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="rprog4.html#cb306-1" tabindex="-1"></a><span class="fu">class</span>(my.list[<span class="dv">1</span>])</span></code></pre></div>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>If you want access to the vector contents of the list element, you can use the <code>$</code> symbol to access the contents of each list entry, or, you can use <em>“double bracket”</em> indexing, <code>[[ ]]</code>:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="rprog4.html#cb308-1" tabindex="-1"></a>my.list<span class="sc">$</span>entry_1</span></code></pre></div>
<pre><code>## [1] &quot;Harry&quot;    &quot;Ron&quot;      &quot;Hermione&quot; &quot;Draco&quot;</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="rprog4.html#cb310-1" tabindex="-1"></a><span class="fu">class</span>(my.list<span class="sc">$</span>entry_1)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="rprog4.html#cb312-1" tabindex="-1"></a>my.list[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    6   11   16
## [2,]    2    7   12   17
## [3,]    3    8   13   18
## [4,]    4    9   14   19
## [5,]    5   10   15   20</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="rprog4.html#cb314-1" tabindex="-1"></a><span class="fu">class</span>(my.list[[<span class="dv">2</span>]])</span></code></pre></div>
<pre><code>## [1] &quot;matrix&quot; &quot;array&quot;</code></pre>
<p>Working with lists is one of the mental hurdles to overcome when learning <code>map()</code>. However, there are variants in the <code>map_</code> family of functions that return simpler object types; we will work with these simplified functions to begin.</p>
<table>
<thead>
<tr class="header">
<th align="left"><code>Purrr::</code> Function</th>
<th align="left">Object Type Returned</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">map()</td>
<td align="left">list</td>
</tr>
<tr class="even">
<td align="left">map_lgl()</td>
<td align="left">logical</td>
</tr>
<tr class="odd">
<td align="left">map_int()</td>
<td align="left">integer</td>
</tr>
<tr class="even">
<td align="left">map_dbl()</td>
<td align="left">numeric</td>
</tr>
<tr class="odd">
<td align="left">map_chr()</td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">map_dfr()</td>
<td align="left">data frame (output by row-binding)</td>
</tr>
<tr class="odd">
<td align="left">map_dfc()</td>
<td align="left">data frame (output by column-binding)</td>
</tr>
</tbody>
</table>
<p>Let’s use <code>map_dfr()</code> to apply our function, <code>import.w.name()</code>, onto the vector of file names and paths (<code>file_list</code>). The <em>“r”</em> in <code>map_dfr()</code> means that the resultant data frame output by <code>map_</code> will be created by binding rows together as the function moves down each index in the file list. This is shown schematically in Figure <a href="rprog4.html#fig:map-dfr-anno">8.2</a> below.</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="rprog4.html#cb316-1" tabindex="-1"></a>file_list <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&#39;./data/purpleair/&#39;</span>, <span class="at">full.names=</span><span class="cn">TRUE</span>)</span>
<span id="cb316-2"><a href="rprog4.html#cb316-2" tabindex="-1"></a></span>
<span id="cb316-3"><a href="rprog4.html#cb316-3" tabindex="-1"></a><span class="co"># map the import.w.name() function to all objects within `file_list` sequentially</span></span>
<span id="cb316-4"><a href="rprog4.html#cb316-4" tabindex="-1"></a><span class="co"># and combining the result into a single data frame with row binding</span></span>
<span id="cb316-5"><a href="rprog4.html#cb316-5" tabindex="-1"></a>PA_data_merged <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(file_list, import.w.name) </span>
<span id="cb316-6"><a href="rprog4.html#cb316-6" tabindex="-1"></a></span>
<span id="cb316-7"><a href="rprog4.html#cb316-7" tabindex="-1"></a><span class="fu">glimpse</span>(PA_data_merged)</span></code></pre></div>
<pre><code>## Rows: 6,374
## Columns: 6
## $ UTCDateTime      &lt;chr&gt; &quot;2018/10/22T17:52:21z&quot;, &quot;2018/10/22T17:53:41z&quot;, &quot;2018…
## $ current_temp_f   &lt;dbl&gt; 90, 86, 87, 87, 87, 87, 86, 86, 86, 86, 86, 86, 86, 8…
## $ current_humidity &lt;dbl&gt; 12, 13, 13, 13, 13, 13, 12, 13, 13, 13, 13, 13, 13, 1…
## $ pressure         &lt;dbl&gt; 851.66, 851.68, 851.56, 851.59, 851.54, 851.57, 851.5…
## $ pm2_5_atm        &lt;dbl&gt; 2.45, 3.43, 2.76, 2.00, 1.82, 1.98, 1.95, 2.48, 2.27,…
## $ sensor_ID        &lt;chr&gt; &quot;PA019&quot;, &quot;PA019&quot;, &quot;PA019&quot;, &quot;PA019&quot;, &quot;PA019&quot;, &quot;PA019&quot;,…</code></pre>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:map-dfr-anno"></span>
<img src="images/map_dfr_anno.png" alt="Example: using `map_dfr()` to import a file list using a custom function"  />
<p class="caption">
Figure 8.2: Example: using <code>map_dfr()</code> to import a file list using a custom function
</p>
</div>
</div>
</div>
<div id="homework" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Homework<a href="rprog4.html#homework" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This homework will give you practice at writing functions, mapping functions, and cleaning/plotting data. To begin, download the PurpleAir data files from Canvas. Note: the data are contained in a .zip file, which you can unzip on your computer or using R!</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="eda2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="transform.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
