<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Getting and Cleaning Data | Engineering Data Analysis in R</title>
  <meta name="description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Getting and Cleaning Data | Engineering Data Analysis in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Getting and Cleaning Data | Engineering Data Analysis in R" />
  
  <meta name="twitter:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

<meta name="author" content="John Volckens and Kathleen E. Wendt" />


<meta name="date" content="2020-09-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rprog1.html"/>
<link rel="next" href="dataviz.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Data Analysis in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#grading"><i class="fa fa-check"></i><b>1.3</b> Grading</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#grading-for-mech-481a6"><i class="fa fa-check"></i><b>1.3.1</b> Grading for MECH 481A6</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#homework-submission"><i class="fa fa-check"></i><b>1.3.2</b> Homework submission</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-set-up"><i class="fa fa-check"></i><b>1.4</b> Course set-up</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.4.1</b> Install R and RStudio</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#install-git-and-create-a-github-account"><i class="fa fa-check"></i><b>1.4.2</b> Install Git and create a GitHub account</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#connect-git-github-and-rstudio"><i class="fa fa-check"></i><b>1.4.3</b> Connect Git, GitHub, and RStudio</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#create-new-project-github-first"><i class="fa fa-check"></i><b>1.4.4</b> Create new project, GitHub first</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#use-rstudiogithub-system-for-homework-submission"><i class="fa fa-check"></i><b>1.4.5</b> Use RStudio/GitHub system for homework submission</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#confirm-successful-set-up"><i class="fa fa-check"></i><b>1.4.6</b> Confirm successful set-up</a></li>
<li class="chapter" data-level="1.4.7" data-path="index.html"><a href="index.html#asking-for-help-properly"><i class="fa fa-check"></i><b>1.4.7</b> Asking for help (properly)</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#coursebook"><i class="fa fa-check"></i><b>1.5</b> Coursebook</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>1.5.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rprog1.html"><a href="rprog1.html"><i class="fa fa-check"></i><b>2</b> The R Programming Environment</a><ul>
<li class="chapter" data-level="2.1" data-path="rprog1.html"><a href="rprog1.html#ch.-2-objectives"><i class="fa fa-check"></i><b>2.1</b> Ch. 2 Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="rprog1.html"><a href="rprog1.html#r-and-r-studio"><i class="fa fa-check"></i><b>2.2</b> R and R Studio</a><ul>
<li class="chapter" data-level="2.2.1" data-path="rprog1.html"><a href="rprog1.html#what-is-r"><i class="fa fa-check"></i><b>2.2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2.2" data-path="rprog1.html"><a href="rprog1.html#free-and-open-source-software"><i class="fa fa-check"></i><b>2.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="2.2.3" data-path="rprog1.html"><a href="rprog1.html#what-is-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rprog1.html"><a href="rprog1.html#communicating-with-r"><i class="fa fa-check"></i><b>2.3</b> Communicating with R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="rprog1.html"><a href="rprog1.html#r-sessions-console-and-command-prompt"><i class="fa fa-check"></i><b>2.3.1</b> R sessions, console, and command prompt</a></li>
<li class="chapter" data-level="2.3.2" data-path="rprog1.html"><a href="rprog1.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>2.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="rprog1.html"><a href="rprog1.html#r-scripts"><i class="fa fa-check"></i><b>2.4</b> R scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="rprog1.html"><a href="rprog1.html#commenting-code"><i class="fa fa-check"></i><b>2.4.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rprog1.html"><a href="rprog1.html#the-package-system"><i class="fa fa-check"></i><b>2.5</b> The “package” system</a><ul>
<li class="chapter" data-level="2.5.1" data-path="rprog1.html"><a href="rprog1.html#r-packages"><i class="fa fa-check"></i><b>2.5.1</b> R packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="rprog1.html"><a href="rprog1.html#installing-from-cran"><i class="fa fa-check"></i><b>2.5.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="2.5.3" data-path="rprog1.html"><a href="rprog1.html#loading-an-installed-package"><i class="fa fa-check"></i><b>2.5.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rprog1.html"><a href="rprog1.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>2.6</b> R’s most basic object types</a><ul>
<li class="chapter" data-level="2.6.1" data-path="rprog1.html"><a href="rprog1.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="rprog1.html"><a href="rprog1.html#dataframes"><i class="fa fa-check"></i><b>2.6.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="rprog1.html"><a href="rprog1.html#chapter-2-exercises"><i class="fa fa-check"></i><b>2.7</b> Chapter 2 Exercises</a><ul>
<li class="chapter" data-level="2.7.1" data-path="rprog1.html"><a href="rprog1.html#set-1-session-helpfiles-scripts-and-objects"><i class="fa fa-check"></i><b>2.7.1</b> Set 1: Session, helpfiles, scripts, and objects</a></li>
<li class="chapter" data-level="2.7.2" data-path="rprog1.html"><a href="rprog1.html#set-2-loading-and-using-packages"><i class="fa fa-check"></i><b>2.7.2</b> Set 2: Loading and using packages</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="rprog1.html"><a href="rprog1.html#chapter-2-homework"><i class="fa fa-check"></i><b>2.8</b> Chapter 2 Homework</a><ul>
<li class="chapter" data-level="2.8.1" data-path="rprog1.html"><a href="rprog1.html#special-swirl-commands"><i class="fa fa-check"></i><b>2.8.1</b> Special <code>swirl</code> commands</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rprog2.html"><a href="rprog2.html"><i class="fa fa-check"></i><b>3</b> Getting and Cleaning Data</a><ul>
<li class="chapter" data-level="3.1" data-path="rprog2.html"><a href="rprog2.html#ch.-3-objectives"><i class="fa fa-check"></i><b>3.1</b> Ch. 3 Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rprog2.html"><a href="rprog2.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="rprog2.html"><a href="rprog2.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.3</b> Reading data into R</a><ul>
<li class="chapter" data-level="3.3.1" data-path="rprog2.html"><a href="rprog2.html#reading-local-flat-files"><i class="fa fa-check"></i><b>3.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="3.3.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>3.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rprog2.html"><a href="rprog2.html#directories-and-pathnames"><i class="fa fa-check"></i><b>3.4</b> Directories and pathnames</a><ul>
<li class="chapter" data-level="3.4.1" data-path="rprog2.html"><a href="rprog2.html#directory-structure"><i class="fa fa-check"></i><b>3.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="3.4.2" data-path="rprog2.html"><a href="rprog2.html#working-directory"><i class="fa fa-check"></i><b>3.4.2</b> Working directory</a></li>
<li class="chapter" data-level="3.4.3" data-path="rprog2.html"><a href="rprog2.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>3.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="3.4.4" data-path="rprog2.html"><a href="rprog2.html#tangent-paste"><i class="fa fa-check"></i><b>3.4.4</b> Tangent: <code>paste</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="rprog2.html"><a href="rprog2.html#reading-online-flat-files"><i class="fa fa-check"></i><b>3.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rprog2.html"><a href="rprog2.html#data-cleaning"><i class="fa fa-check"></i><b>3.5</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.5.1" data-path="rprog2.html"><a href="rprog2.html#renaming-columns"><i class="fa fa-check"></i><b>3.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="3.5.2" data-path="rprog2.html"><a href="rprog2.html#selecting-columns"><i class="fa fa-check"></i><b>3.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="3.5.3" data-path="rprog2.html"><a href="rprog2.html#add-or-change-columns"><i class="fa fa-check"></i><b>3.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="3.5.4" data-path="rprog2.html"><a href="rprog2.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>3.5.4</b> Base R equivalents to <code>dplyr</code> functions</a></li>
<li class="chapter" data-level="3.5.5" data-path="rprog2.html"><a href="rprog2.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>3.5.5</b> Filtering to certain rows</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rprog2.html"><a href="rprog2.html#piping"><i class="fa fa-check"></i><b>3.6</b> Piping</a></li>
<li class="chapter" data-level="3.7" data-path="rprog2.html"><a href="rprog2.html#markdowns"><i class="fa fa-check"></i><b>3.7</b> Markdowns</a><ul>
<li class="chapter" data-level="3.7.1" data-path="rprog2.html"><a href="rprog2.html#r-markdowns"><i class="fa fa-check"></i><b>3.7.1</b> R Markdowns</a></li>
<li class="chapter" data-level="3.7.2" data-path="rprog2.html"><a href="rprog2.html#header"><i class="fa fa-check"></i><b>3.7.2</b> Header</a></li>
<li class="chapter" data-level="3.7.3" data-path="rprog2.html"><a href="rprog2.html#text"><i class="fa fa-check"></i><b>3.7.3</b> Text</a></li>
<li class="chapter" data-level="3.7.4" data-path="rprog2.html"><a href="rprog2.html#code-chunks"><i class="fa fa-check"></i><b>3.7.4</b> Code Chunks</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="rprog2.html"><a href="rprog2.html#chapter-3-exercises"><i class="fa fa-check"></i><b>3.8</b> Chapter 3 Exercises</a><ul>
<li class="chapter" data-level="3.8.1" data-path="rprog2.html"><a href="rprog2.html#set-1-pathnames-and-data-import"><i class="fa fa-check"></i><b>3.8.1</b> Set 1: Pathnames and data import</a></li>
<li class="chapter" data-level="3.8.2" data-path="rprog2.html"><a href="rprog2.html#set-2-data-wrangling-and-piping"><i class="fa fa-check"></i><b>3.8.2</b> Set 2: Data wrangling and piping</a></li>
<li class="chapter" data-level="3.8.3" data-path="rprog2.html"><a href="rprog2.html#set-3-r-markdown"><i class="fa fa-check"></i><b>3.8.3</b> Set 3: R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="rprog2.html"><a href="rprog2.html#chapter-3-homework"><i class="fa fa-check"></i><b>3.9</b> Chapter 3 Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>4</b> Data Visualization with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="4.1" data-path="dataviz.html"><a href="dataviz.html#ch.-4-objectives"><i class="fa fa-check"></i><b>4.1</b> Ch. 4 Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dataviz.html"><a href="dataviz.html#install-and-load-ggplot2"><i class="fa fa-check"></i><b>4.2</b> Install and load <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.3" data-path="dataviz.html"><a href="dataviz.html#steps-to-create-a-ggplot2-object"><i class="fa fa-check"></i><b>4.3</b> Steps to create a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.4" data-path="dataviz.html"><a href="dataviz.html#initializing-a-ggplot2-object"><i class="fa fa-check"></i><b>4.4</b> Initializing a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.5" data-path="dataviz.html"><a href="dataviz.html#plot-aesthetics"><i class="fa fa-check"></i><b>4.5</b> Plot aesthetics</a></li>
<li class="chapter" data-level="4.6" data-path="dataviz.html"><a href="dataviz.html#adding-geoms"><i class="fa fa-check"></i><b>4.6</b> Adding geoms</a><ul>
<li class="chapter" data-level="4.6.1" data-path="dataviz.html"><a href="dataviz.html#aesthetic-override-a-warning"><i class="fa fa-check"></i><b>4.6.1</b> Aesthetic override: a warning</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="dataviz.html"><a href="dataviz.html#shapes-and-colors"><i class="fa fa-check"></i><b>4.7</b> Shapes and colors</a></li>
<li class="chapter" data-level="4.8" data-path="dataviz.html"><a href="dataviz.html#scales-useful-plot-edits"><i class="fa fa-check"></i><b>4.8</b> Scales: useful plot edits</a></li>
<li class="chapter" data-level="4.9" data-path="dataviz.html"><a href="dataviz.html#example-plot"><i class="fa fa-check"></i><b>4.9</b> Example plot</a></li>
<li class="chapter" data-level="4.10" data-path="dataviz.html"><a href="dataviz.html#store-and-save-ggplot2-objects"><i class="fa fa-check"></i><b>4.10</b> Store and save <code>ggplot2</code> objects</a></li>
<li class="chapter" data-level="4.11" data-path="dataviz.html"><a href="dataviz.html#getting-help-with-ggplot2"><i class="fa fa-check"></i><b>4.11</b> Getting help with <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.12" data-path="dataviz.html"><a href="dataviz.html#ch-4-exercises"><i class="fa fa-check"></i><b>4.12</b> Ch-4 Exercises</a></li>
<li class="chapter" data-level="4.13" data-path="dataviz.html"><a href="dataviz.html#ch-4-homework"><i class="fa fa-check"></i><b>4.13</b> Ch-4 Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="eda1.html"><a href="eda1.html"><i class="fa fa-check"></i><b>5</b> Univariate Data Exploration</a><ul>
<li class="chapter" data-level="5.1" data-path="eda1.html"><a href="eda1.html#ch.-5-objectives"><i class="fa fa-check"></i><b>5.1</b> Ch. 5 Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="eda1.html"><a href="eda1.html#univariate-data"><i class="fa fa-check"></i><b>5.2</b> Univariate Data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="eda1.html"><a href="eda1.html#location-dispersion-and-shape"><i class="fa fa-check"></i><b>5.2.1</b> Location, Dispersion, and Shape</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="eda1.html"><a href="eda1.html#quantiles"><i class="fa fa-check"></i><b>5.3</b> Quantiles</a><ul>
<li class="chapter" data-level="5.3.1" data-path="eda1.html"><a href="eda1.html#descriptive-statistics"><i class="fa fa-check"></i><b>5.3.1</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="eda1.html"><a href="eda1.html#univariate-data-visualization"><i class="fa fa-check"></i><b>5.4</b> Univariate Data Visualization</a><ul>
<li class="chapter" data-level="5.4.1" data-path="eda1.html"><a href="eda1.html#summary-vs.-enumerative-plots"><i class="fa fa-check"></i><b>5.4.1</b> Summary vs. Enumerative Plots</a></li>
<li class="chapter" data-level="5.4.2" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot"><i class="fa fa-check"></i><b>5.4.2</b> Cumulative Distribution Plot</a></li>
<li class="chapter" data-level="5.4.3" data-path="eda1.html"><a href="eda1.html#hist"><i class="fa fa-check"></i><b>5.4.3</b> Histogram</a></li>
<li class="chapter" data-level="5.4.4" data-path="eda1.html"><a href="eda1.html#box"><i class="fa fa-check"></i><b>5.4.4</b> Boxplot</a></li>
<li class="chapter" data-level="5.4.5" data-path="eda1.html"><a href="eda1.html#time_series"><i class="fa fa-check"></i><b>5.4.5</b> Time-Series Plot</a></li>
<li class="chapter" data-level="5.4.6" data-path="eda1.html"><a href="eda1.html#autocorr"><i class="fa fa-check"></i><b>5.4.6</b> Autocorrelation Plot</a></li>
<li class="chapter" data-level="5.4.7" data-path="eda1.html"><a href="eda1.html#partial-autocorrelation-plot"><i class="fa fa-check"></i><b>5.4.7</b> Partial Autocorrelation Plot</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="eda1.html"><a href="eda1.html#exploring-data"><i class="fa fa-check"></i><b>5.5</b> Exploring Data</a></li>
<li class="chapter" data-level="5.6" data-path="eda1.html"><a href="eda1.html#ch-5-exercises"><i class="fa fa-check"></i><b>5.6</b> Ch-5 Exercises</a></li>
<li class="chapter" data-level="5.7" data-path="eda1.html"><a href="eda1.html#ch-5-homework"><i class="fa fa-check"></i><b>5.7</b> Ch-5 Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rprog3.html"><a href="rprog3.html"><i class="fa fa-check"></i><b>6</b> Strings, Dates, and Tidying</a><ul>
<li class="chapter" data-level="6.1" data-path="rprog3.html"><a href="rprog3.html#ch.-6-objectives"><i class="fa fa-check"></i><b>6.1</b> Ch. 6 Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="rprog3.html"><a href="rprog3.html#strings"><i class="fa fa-check"></i><b>6.2</b> Strings</a><ul>
<li class="chapter" data-level="6.2.1" data-path="rprog3.html"><a href="rprog3.html#string-detect-match-subset"><i class="fa fa-check"></i><b>6.2.1</b> String detect, match, subset</a></li>
<li class="chapter" data-level="6.2.2" data-path="rprog3.html"><a href="rprog3.html#regular-expressions"><i class="fa fa-check"></i><b>6.2.2</b> Regular Expressions</a></li>
<li class="chapter" data-level="6.2.3" data-path="rprog3.html"><a href="rprog3.html#string-split-replace"><i class="fa fa-check"></i><b>6.2.3</b> String split, replace</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rprog3.html"><a href="rprog3.html#dates-and-date-times"><i class="fa fa-check"></i><b>6.3</b> Dates and Date-times</a><ul>
<li class="chapter" data-level="6.3.1" data-path="rprog3.html"><a href="rprog3.html#dates-and-times-in-base-r"><i class="fa fa-check"></i><b>6.3.1</b> Dates and Times in base R</a></li>
<li class="chapter" data-level="6.3.2" data-path="rprog3.html"><a href="rprog3.html#date-time-formats"><i class="fa fa-check"></i><b>6.3.2</b> Date-time formats</a></li>
<li class="chapter" data-level="6.3.3" data-path="rprog3.html"><a href="rprog3.html#date-time-classes-in-r"><i class="fa fa-check"></i><b>6.3.3</b> Date-time classes in R</a></li>
<li class="chapter" data-level="6.3.4" data-path="rprog3.html"><a href="rprog3.html#reading-and-classifying-date-times"><i class="fa fa-check"></i><b>6.3.4</b> Reading and classifying date-times</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="rprog3.html"><a href="rprog3.html#lubridate"><i class="fa fa-check"></i><b>6.4</b> <code>Lubridate</code></a><ul>
<li class="chapter" data-level="6.4.1" data-path="rprog3.html"><a href="rprog3.html#lubridate-parsing-functions"><i class="fa fa-check"></i><b>6.4.1</b> <code>Lubridate</code> Parsing Functions</a></li>
<li class="chapter" data-level="6.4.2" data-path="rprog3.html"><a href="rprog3.html#date-time-manipulation-with-lubridate"><i class="fa fa-check"></i><b>6.4.2</b> Date-time manipulation with <code>Lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="rprog3.html"><a href="rprog3.html#ch-6-exercises"><i class="fa fa-check"></i><b>6.5</b> Ch-6 Exercises</a></li>
<li class="chapter" data-level="6.6" data-path="rprog3.html"><a href="rprog3.html#ch-6-homework"><i class="fa fa-check"></i><b>6.6</b> Ch-6 Homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="eda2.html"><a href="eda2.html"><i class="fa fa-check"></i><b>7</b> Multivariate Data Exploration</a><ul>
<li class="chapter" data-level="7.1" data-path="eda2.html"><a href="eda2.html#ch.-7-objectives"><i class="fa fa-check"></i><b>7.1</b> Ch. 7 Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="eda2.html"><a href="eda2.html#bivariate"><i class="fa fa-check"></i><b>7.2</b> Bivariate Data</a></li>
<li class="chapter" data-level="7.3" data-path="eda2.html"><a href="eda2.html#scatt"><i class="fa fa-check"></i><b>7.3</b> Scatterplot</a><ul>
<li class="chapter" data-level="7.3.1" data-path="eda2.html"><a href="eda2.html#causality"><i class="fa fa-check"></i><b>7.3.1</b> Causality</a></li>
<li class="chapter" data-level="7.3.2" data-path="eda2.html"><a href="eda2.html#correlation"><i class="fa fa-check"></i><b>7.3.2</b> Correlation</a></li>
<li class="chapter" data-level="7.3.3" data-path="eda2.html"><a href="eda2.html#correlation-neq-causation"><i class="fa fa-check"></i><b>7.3.3</b> Correlation <span class="math inline">\(\neq\)</span> causation</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="eda2.html"><a href="eda2.html#exploring-multivariate-data"><i class="fa fa-check"></i><b>7.4</b> Exploring Multivariate Data</a><ul>
<li class="chapter" data-level="7.4.1" data-path="eda2.html"><a href="eda2.html#faceting"><i class="fa fa-check"></i><b>7.4.1</b> Faceting</a></li>
<li class="chapter" data-level="7.4.2" data-path="eda2.html"><a href="eda2.html#coloring"><i class="fa fa-check"></i><b>7.4.2</b> Coloring</a></li>
<li class="chapter" data-level="7.4.3" data-path="eda2.html"><a href="eda2.html#contour-plots"><i class="fa fa-check"></i><b>7.4.3</b> Contour Plots</a></li>
<li class="chapter" data-level="7.4.4" data-path="eda2.html"><a href="eda2.html#time-series-density"><i class="fa fa-check"></i><b>7.4.4</b> Time-Series Density</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="eda2.html"><a href="eda2.html#ch-7-exercises"><i class="fa fa-check"></i><b>7.5</b> Ch-7 Exercises</a><ul>
<li class="chapter" data-level="7.5.1" data-path="eda2.html"><a href="eda2.html#in-class-fueleconomy.gov"><i class="fa fa-check"></i><b>7.5.1</b> In-class: fueleconomy.gov</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="eda2.html"><a href="eda2.html#ch-7-homework"><i class="fa fa-check"></i><b>7.6</b> Ch-7 Homework</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rprog4.html"><a href="rprog4.html"><i class="fa fa-check"></i><b>8</b> Functional Programming</a><ul>
<li class="chapter" data-level="8.1" data-path="rprog4.html"><a href="rprog4.html#ch.-8-objectives"><i class="fa fa-check"></i><b>8.1</b> Ch. 8 Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="rprog4.html"><a href="rprog4.html#step-iii-1"><i class="fa fa-check"></i><b>8.2</b> Step III-1</a></li>
<li class="chapter" data-level="8.3" data-path="rprog4.html"><a href="rprog4.html#ch-8-exercises"><i class="fa fa-check"></i><b>8.3</b> Ch-8 Exercises</a></li>
<li class="chapter" data-level="8.4" data-path="rprog4.html"><a href="rprog4.html#ch-8-homework"><i class="fa fa-check"></i><b>8.4</b> Ch-8 Homework</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>9</b> Transformations and other Tricks</a><ul>
<li class="chapter" data-level="9.1" data-path="transform.html"><a href="transform.html#ch.-9-objectives"><i class="fa fa-check"></i><b>9.1</b> Ch. 9 Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="transform.html"><a href="transform.html#transformation"><i class="fa fa-check"></i><b>9.2</b> Transformation</a><ul>
<li class="chapter" data-level="9.2.1" data-path="transform.html"><a href="transform.html#centering"><i class="fa fa-check"></i><b>9.2.1</b> Centering</a></li>
<li class="chapter" data-level="9.2.2" data-path="transform.html"><a href="transform.html#rescaling"><i class="fa fa-check"></i><b>9.2.2</b> Rescaling</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="transform.html"><a href="transform.html#normalization-and-standardization"><i class="fa fa-check"></i><b>9.3</b> Normalization and Standardization</a><ul>
<li class="chapter" data-level="9.3.1" data-path="transform.html"><a href="transform.html#rate-normalization"><i class="fa fa-check"></i><b>9.3.1</b> Rate normalization</a></li>
<li class="chapter" data-level="9.3.2" data-path="transform.html"><a href="transform.html#standardizing"><i class="fa fa-check"></i><b>9.3.2</b> Standardizing</a></li>
<li class="chapter" data-level="9.3.3" data-path="transform.html"><a href="transform.html#reducing-skewness"><i class="fa fa-check"></i><b>9.3.3</b> Reducing Skewness</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="transform.html"><a href="transform.html#stratification"><i class="fa fa-check"></i><b>9.4</b> Stratification</a></li>
<li class="chapter" data-level="9.5" data-path="transform.html"><a href="transform.html#outliers-and-censoring"><i class="fa fa-check"></i><b>9.5</b> Outliers and Censoring</a><ul>
<li class="chapter" data-level="9.5.1" data-path="transform.html"><a href="transform.html#detecting-outliers-outliers"><i class="fa fa-check"></i><b>9.5.1</b> Detecting Outliers (#outliers)</a></li>
<li class="chapter" data-level="9.5.2" data-path="transform.html"><a href="transform.html#censoring-outliers"><i class="fa fa-check"></i><b>9.5.2</b> Censoring outliers</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="transform.html"><a href="transform.html#ch-9-exercises"><i class="fa fa-check"></i><b>9.6</b> Ch-9 Exercises</a></li>
<li class="chapter" data-level="9.7" data-path="transform.html"><a href="transform.html#ch-9-homework"><i class="fa fa-check"></i><b>9.7</b> Ch-9 Homework</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="measure.html"><a href="measure.html"><i class="fa fa-check"></i><b>10</b> Measurement</a><ul>
<li class="chapter" data-level="10.1" data-path="measure.html"><a href="measure.html#ch.-10-objectives"><i class="fa fa-check"></i><b>10.1</b> Ch. 10 Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="measure.html"><a href="measure.html#sampling"><i class="fa fa-check"></i><b>10.2</b> Sampling</a><ul>
<li class="chapter" data-level="10.2.1" data-path="measure.html"><a href="measure.html#samples-vs.-populations"><i class="fa fa-check"></i><b>10.2.1</b> Samples vs. Populations</a></li>
<li class="chapter" data-level="10.2.2" data-path="measure.html"><a href="measure.html#collecting-a-sample-sample.collect"><i class="fa fa-check"></i><b>10.2.2</b> Collecting a sample (#sample.collect)</a></li>
<li class="chapter" data-level="10.2.3" data-path="measure.html"><a href="measure.html#simple-random-sampling"><i class="fa fa-check"></i><b>10.2.3</b> Simple Random Sampling</a></li>
<li class="chapter" data-level="10.2.4" data-path="measure.html"><a href="measure.html#systematic-sampling"><i class="fa fa-check"></i><b>10.2.4</b> Systematic Sampling</a></li>
<li class="chapter" data-level="10.2.5" data-path="measure.html"><a href="measure.html#stratified-sampling"><i class="fa fa-check"></i><b>10.2.5</b> Stratified Sampling</a></li>
<li class="chapter" data-level="10.2.6" data-path="measure.html"><a href="measure.html#cluster-sampling"><i class="fa fa-check"></i><b>10.2.6</b> Cluster Sampling</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="measure.html"><a href="measure.html#figures-of-merit"><i class="fa fa-check"></i><b>10.3</b> Figures of Merit</a><ul>
<li class="chapter" data-level="10.3.1" data-path="measure.html"><a href="measure.html#limit-of-detection-quantification"><i class="fa fa-check"></i><b>10.3.1</b> Limit of Detection &amp; Quantification</a></li>
<li class="chapter" data-level="10.3.2" data-path="measure.html"><a href="measure.html#dynamic-range"><i class="fa fa-check"></i><b>10.3.2</b> Dynamic Range</a></li>
<li class="chapter" data-level="10.3.3" data-path="measure.html"><a href="measure.html#measurement-precision"><i class="fa fa-check"></i><b>10.3.3</b> Measurement Precision</a></li>
<li class="chapter" data-level="10.3.4" data-path="measure.html"><a href="measure.html#measurement-bias-accuracy"><i class="fa fa-check"></i><b>10.3.4</b> Measurement Bias (accuracy)</a></li>
<li class="chapter" data-level="10.3.5" data-path="measure.html"><a href="measure.html#measurement-uncertainty"><i class="fa fa-check"></i><b>10.3.5</b> Measurement Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="measure.html"><a href="measure.html#ch-10-exercises"><i class="fa fa-check"></i><b>10.4</b> Ch-10 Exercises</a></li>
<li class="chapter" data-level="10.5" data-path="measure.html"><a href="measure.html#ch-10-homework"><i class="fa fa-check"></i><b>10.5</b> CH-10 Homework</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>11</b> Modeling</a><ul>
<li class="chapter" data-level="11.1" data-path="model.html"><a href="model.html#ch.-11-objectives"><i class="fa fa-check"></i><b>11.1</b> Ch. 11 Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="model.html"><a href="model.html#process-modeling"><i class="fa fa-check"></i><b>11.2</b> Process Modeling</a><ul>
<li class="chapter" data-level="11.2.1" data-path="model.html"><a href="model.html#assumptions"><i class="fa fa-check"></i><b>11.2.1</b> Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="model.html"><a href="model.html#model-fitting"><i class="fa fa-check"></i><b>11.3</b> Model Fitting</a></li>
<li class="chapter" data-level="11.4" data-path="model.html"><a href="model.html#ols-regression"><i class="fa fa-check"></i><b>11.4</b> OLS Regression</a><ul>
<li class="chapter" data-level="11.4.1" data-path="model.html"><a href="model.html#OLS_assum"><i class="fa fa-check"></i><b>11.4.1</b> OLS Assumptions and Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="model.html"><a href="model.html#example-ols-linear-regression"><i class="fa fa-check"></i><b>11.5</b> Example: OLS Linear Regression</a><ul>
<li class="chapter" data-level="11.5.1" data-path="model.html"><a href="model.html#the-lm-function"><i class="fa fa-check"></i><b>11.5.1</b> The <code>lm()</code> function</a></li>
<li class="chapter" data-level="11.5.2" data-path="model.html"><a href="model.html#ols-diagnostics"><i class="fa fa-check"></i><b>11.5.2</b> OLS Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="model.html"><a href="model.html#pdf"><i class="fa fa-check"></i><b>11.6</b> Probability Density Function</a><ul>
<li class="chapter" data-level="11.6.1" data-path="model.html"><a href="model.html#univariate-data-fits"><i class="fa fa-check"></i><b>11.6.1</b> Univariate Data Fits</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="model.html"><a href="model.html#calibration"><i class="fa fa-check"></i><b>11.7</b> Calibration</a></li>
<li class="chapter" data-level="11.8" data-path="model.html"><a href="model.html#ch-11-exercises"><i class="fa fa-check"></i><b>11.8</b> Ch-11 Exercises</a></li>
<li class="chapter" data-level="11.9" data-path="model.html"><a href="model.html#ch-11-homework"><i class="fa fa-check"></i><b>11.9</b> Ch-11 Homework</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="simulate.html"><a href="simulate.html"><i class="fa fa-check"></i><b>12</b> Simulation</a><ul>
<li class="chapter" data-level="12.1" data-path="simulate.html"><a href="simulate.html#ch.-12-objectives"><i class="fa fa-check"></i><b>12.1</b> Ch. 12 Objectives</a></li>
<li class="chapter" data-level="12.2" data-path="simulate.html"><a href="simulate.html#introduction-to-simulation"><i class="fa fa-check"></i><b>12.2</b> Introduction to simulation</a></li>
<li class="chapter" data-level="12.3" data-path="simulate.html"><a href="simulate.html#simulation-example"><i class="fa fa-check"></i><b>12.3</b> Simulation Example:</a></li>
<li class="chapter" data-level="12.4" data-path="simulate.html"><a href="simulate.html#ch-12-exercises"><i class="fa fa-check"></i><b>12.4</b> Ch-12 Exercises</a></li>
<li class="chapter" data-level="12.5" data-path="simulate.html"><a href="simulate.html#ch-12-homework"><i class="fa fa-check"></i><b>12.5</b> Ch-12 Homework</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="dist.html"><a href="dist.html"><i class="fa fa-check"></i><b>13</b> Appendix: Reference Distributions</a><ul>
<li class="chapter" data-level="13.1" data-path="dist.html"><a href="dist.html#unif_dist"><i class="fa fa-check"></i><b>13.1</b> Uniform Distribution</a><ul>
<li class="chapter" data-level="13.1.1" data-path="dist.html"><a href="dist.html#characteristic-plots-uniform-distribution"><i class="fa fa-check"></i><b>13.1.1</b> Characteristic Plots: Uniform Distribution</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="dist.html"><a href="dist.html#normal_dist"><i class="fa fa-check"></i><b>13.2</b> Normal Distribution</a><ul>
<li class="chapter" data-level="13.2.1" data-path="dist.html"><a href="dist.html#normal-distribution-characteristic-plots"><i class="fa fa-check"></i><b>13.2.1</b> Normal Distribution: Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="dist.html"><a href="dist.html#log_normal_dist"><i class="fa fa-check"></i><b>13.3</b> Log-normal Distribution</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Data Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rprog2" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Getting and Cleaning Data</h1>
<div id="ch.-3-objectives" class="section level2">
<h2><span class="header-section-number">3.1</span> Ch. 3 Objectives</h2>
<p>This chapter is designed around the following learning objectives. Upon
completing this chapter, you should be able to:</p>
<ul>
<li>Recognize what a flat file is and how it differs from data stored in a binary
file format</li>
<li>Distinguish between delimited and fixed width formats for flat files</li>
<li>Identify the delimiter in a delimited file</li>
<li>Describe a working directory</li>
<li>Demonstrate how to read in different types of flat files</li>
<li>Demonstrate how to read in a few types of binary files (e.g., Matlab, Excel)</li>
<li>Recognize the difference between relative and absolute file pathnames</li>
<li>Describe the basics of your computer’s directory structure</li>
<li>Reference files in different locations in your directory structure using
relative and absolute pathnames</li>
<li>Apply the basic <code>dplyr</code> functions (e.g., <code>rename()</code>, <code>select()</code>, <code>mutate()</code>,
<code>slice()</code>, <code>filter()</code>, and <code>arrange()</code>) to work with data in a dataframe object</li>
<li>Define a logical operator and know the R syntax for common logical operators</li>
<li>Apply logical operators in conjunction with <code>dplyr</code>’s <code>filter()</code> function to
create subsets of a dataframe based on logical conditions</li>
<li>Apply a sequence of <code>dplyr</code> functions to a dataframe using piping (<code>%&gt;%</code>)</li>
<li>Create R Markdown documents and describe their basic content and function</li>
</ul>
</div>
<div id="overview" class="section level2">
<h2><span class="header-section-number">3.2</span> Overview</h2>
<p>There are four basic steps you will often repeat as you prepare to analyze data
in R:</p>
<ol style="list-style-type: decimal">
<li>Identify the location of the data. If it’s on your computer, which
directory? If it’s online, what’s the link?</li>
<li>Read data into R (e.g., using a function like <code>read_delim()</code> or <code>read_csv()</code>
from the <code>readr</code> package) using the file path you figured out in step 1</li>
<li>Check to make sure the data came in correctly using functions like <code>dim()</code>, <code>head()</code>, <code>tail()</code>, <code>str()</code>, and/or <code>glimpse()</code>.</li>
<li>Clean the data up by removing missing (or nonsense) values, renaming or reclassifying variables, performing units conversions, or other actions that
support a streamlined data analysis.</li>
</ol>
<p>In this chapter, I’ll go over the basics for each of these steps and dive a bit
deeper into some related topics you should learn now to make your life easier
as you get started using R for data analysis.</p>
</div>
<div id="reading-data-into-r" class="section level2">
<h2><span class="header-section-number">3.3</span> Reading data into R</h2>
<p>Data comes in files of all shapes and sizes. R has the capability to import
data from many files types and locations, even proprietary files for other
software. Here are some of the types of data files that R can read and work with:</p>
<ul>
<li>Flat files (more about these soon)</li>
<li>Files from other software packages such as MATLAB or Excel</li>
<li>Tables on webpages (e.g., the table on Ebola outbreaks near the end of <a href="http://en.wikipedia.org/wiki/Ebola_virus_epidemic_in_West_Africa">this
Wikipedia
page</a>)</li>
<li>Data in a database (e.g., MySQL, Oracle)</li>
<li>Data in JSON and XML formats</li>
<li>Really crazy data formats used in other disciplines (e.g., netCDF files from
climate research, MRI data stored in Analyze, NIfTI, and DICOM formats)</li>
<li>Geographic shapefiles</li>
<li>Data through Application Programming Interfaces (APIs; most websites use APIs
to ask you for input and then use that input to direct new information back to
you)</li>
</ul>
<p>Often, it is possible to import and wrangle extremely messy data by using
functions like <code>scan()</code> and <code>readLines()</code> to read the data in a line at a time,
and then using regular expressions to clean up the data as it gets imported. For
this course, however, we will begin with less challenging file formats (and
degrees of messiness).</p>
<div id="reading-local-flat-files" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Reading local flat files</h3>
<p>Much of the data that you will want to read in will be in <strong>flat files</strong> that
are stored locally (i.e., on your computer’s hard drive). A <em>flat file</em> is
basically a file that you can open using a text editor. The most
common type you’ll work with are probably comma-separated files, often with a
<code>.csv</code> or <code>.txt</code> file extension. Most flat files come in two general
categories:</p>
<ol style="list-style-type: decimal">
<li><p>Fixed width files, and</p></li>
<li><p>Delimited files, which include:</p></li>
</ol>
<ul>
<li>“.csv”: Comma-separated values</li>
<li>“.tab”, “.tsv”: Tab-separated values</li>
<li>Other possible delimiters: colon, semicolon, pipe (“|”)</li>
</ul>
<p><em>Fixed-width files</em> are files where a column always has the same width, for all
the rows in the column. These tend to look very neat and easy-to-read when you
open them in a text editor. For example, the first few rows of a fixed-width
file might look like this:</p>
<pre><code>Course                            Number          Day          Time
Thermodynamics                    337             M/W/F        9:00-9:50
Aerosol Physics and Technology    577             M/W/F        10:00-10:50</code></pre>
<p>Fixed-width files used to be very popular, and they make it easier to look at
data when you open the file in a text editor. Now, it’s rare to just use a text
editor to open a file and check out the data. Also, these files can be a bit of
a pain to read into R and other programs because you sometimes have to specify
the length of each column. You may come across a fixed-width file every now and
then, particularly when working with older data, so it’s useful to be able to
recognize one and to know how to import it.</p>
<p><em>Delimited files</em> use some <strong>delimiter</strong> such as a comma or tab to separate
each column value within a row. The first few rows of a delimited file might
look like this:</p>
<pre><code>Course, Number, Day, Time
&quot;Thermodynamics&quot;, 337, &quot;M/W/F&quot;, &quot;9:00-9:50&quot;
&quot;Aerosol Physics and Technology&quot;, 577, &quot;M/W/F&quot;, &quot;10:00-10:50&quot;</code></pre>
<p>Delimited files are very easy to read into R. You just need to be able to
figure out what character is used as a delimiter and specify that to R in the
function call to read in the data.</p>
<p>These flat files can have a number of different file extensions. The most
generic is <code>.txt</code>, but they will also have ones more specific to their format,
like <code>.csv</code> for a comma-delimited file (.csv stands for
<strong>“comma-separated values”</strong>), or <code>.fwf</code> for a fixed-width file.</p>
<p>R can read in data from both fixed-width and delimited flat files. The only
catch is that you need to tell R a bit more about the format of the flat file,
including whether it is fixed-width or delimited. If the file is fixed-width,
you will usually have to provide R with information about each column (see <code>read_fwf()</code> for details). If the file is delimited, you’ll need to tell R which delimiter, such as comma or tab, is being used.</p>
<p>The <code>read_delim()</code> family of functions are used to read delimited flat files into
R - these functions come from the <code>readr</code> package, which we will use extensively
in ths course. All members of the <code>read_delim()</code> family do the same basic thing:
import flat files into a <code>tibble</code>. The major difference is what defaults each
function has for the delimiter (<code>delim</code>). Members of the <code>read_delim()</code> family include:</p>
<table>
<thead>
<tr class="header">
<th>Function</th>
<th>Delimiter</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>read_csv()</code></td>
<td>comma</td>
</tr>
<tr class="even">
<td><code>read_csv2()</code></td>
<td>semi-colon</td>
</tr>
<tr class="odd">
<td><code>read_table2()</code></td>
<td>whitespace</td>
</tr>
<tr class="even">
<td><code>read_tsv()</code></td>
<td>tab</td>
</tr>
</tbody>
</table>
<p>You can use <code>read_delim()</code> to read in any delimited file, regardless of the
delimiter; however, you will need to specify the type of delimiter using the
<code>delim</code> argument. If you remember the more specialized function call (e.g.,
<code>read_csv()</code> for a comma-delimited file), you can save yourself some typing.</p>
<p>For example, to read in the Ebola data data file, which is comma-delimited,
you could either use <code>read_table()</code> with a <code>delim</code> argument specified or use
<code>read_csv()</code>, in which case you don’t have to specify <code>delim</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="rprog2.html#cb3-1"></a><span class="kw">library</span>(<span class="dt">package =</span> <span class="st">&quot;readr&quot;</span>)</span>
<span id="cb3-2"><a href="rprog2.html#cb3-2"></a><span class="co"># The following two calls do the same thing</span></span>
<span id="cb3-3"><a href="rprog2.html#cb3-3"></a>ebola &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_delim</span>(<span class="dt">file =</span> <span class="st">&quot;data/country_timeseries.csv&quot;</span>, <span class="dt">delim =</span> <span class="st">&quot;,&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="rprog2.html#cb4-1"></a>ebola &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/country_timeseries.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Date = col_character(),
##   Day = col_double(),
##   Cases_Guinea = col_double(),
##   Cases_Liberia = col_double(),
##   Cases_SierraLeone = col_double(),
##   Cases_Nigeria = col_double(),
##   Cases_Senegal = col_double(),
##   Cases_UnitedStates = col_double(),
##   Cases_Spain = col_double(),
##   Cases_Mali = col_double(),
##   Deaths_Guinea = col_double(),
##   Deaths_Liberia = col_double(),
##   Deaths_SierraLeone = col_double(),
##   Deaths_Nigeria = col_double(),
##   Deaths_Senegal = col_double(),
##   Deaths_UnitedStates = col_double(),
##   Deaths_Spain = col_double(),
##   Deaths_Mali = col_double()
## )</code></pre>
<div class="rmdtip">
<p>
The message that R prints after this call (“Parsed with column specification: …”) lets you know what classes were used for each column. This function tries to guess the appropriate class and typically gets it right. You can suppress the message using the <code>cols_types = cols()</code> argument, or by adjusting the code chunk options in an R Markdown. If <code>readr</code> doesn’t correctly assign some of the columns classes, you can use the <code>type_convert()</code> function for R to guess again after you’ve tweaked the formats of the rogue columns.
</p>
</div>
<p>This family of functions has a few other helpful options you can specify. For
example, if you want to skip the first few lines of a file before you start
reading in the data, you can use <code>skip()</code> to set the number of lines to skip.
If you only want to read in a few lines of the data, you can use the <code>n_max()</code>
option. For example, if you have a really large file, and you want to save time
by only reading in the first ten lines, as you figure out what other optional
arguments to use in <code>read_delim()</code> for that file, you could include the option
<code>n_max = 10</code>. Here is a table of some of the most useful options common to the
<code>read_delim()</code> family of functions:</p>
<table>
<thead>
<tr class="header">
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>skip()</code></td>
<td>How many lines of the start of the file should you skip?</td>
</tr>
<tr class="even">
<td><code>col_names()</code></td>
<td>Use the column names provided or define your own names?</td>
</tr>
<tr class="odd">
<td><code>col_types()</code></td>
<td>What are the column types (e.g., chr, num, int, logi etc.])?</td>
</tr>
<tr class="even">
<td><code>n_max()</code></td>
<td>How many rows do you want to read in?</td>
</tr>
<tr class="odd">
<td><code>na()</code></td>
<td>How are missing values coded?</td>
</tr>
</tbody>
</table>
<div class="rmdnote">
<p>
Remember that you can always find out more about a function by looking at its help file. For example, check out <code>?read_delim</code> and <code>?read_fwf</code> (note the lack of parentheses). You can also use the help files to determine the default values of arguments for each function.
</p>
</div>
<p>So far, we’ve only looked at functions from the <code>readr</code> package for reading in
data files. There is a similar family of functions available in base R, the
<code>read.table()</code> family of functions. The <code>readr</code> family of functions is very
similar to the base R <code>read.table()</code> functions, but have some more sensible
defaults. Compared to the <code>read.table()</code> function family, the <code>readr</code>
functions are:</p>
<ul>
<li>Faster; show progress bar of data import</li>
<li>Work better with large datasets</li>
<li>Have more sensible defaults (e.g., characters default to characters, not
factors)</li>
</ul>
<p>I recommend that you always use the <code>readr</code> functions rather than their base R
alternatives, given these advantages; however, you are likely to come across
code with these base R functions, so it is helpful to be aware of them.
Functions in the <code>read.table</code> family include:</p>
<ul>
<li><code>read.csv()</code></li>
<li><code>read.delim()</code></li>
<li><code>read.table()</code></li>
<li><code>read.fwf()</code></li>
</ul>
<p>Note: these base R functions use periods (<code>read.</code>) whereas the <code>readr</code> functions
use underscores (<code>read_</code>).</p>
<div class="rmdnote">
<p>
The <code>readr</code> package is a member of the <code>tidyverse</code> suite of R packages. The <em>tidyverse</em> describes an evolving collection of R packages with a common philosophy and approach, and they are unquestionably changing the way people code in R. Many of these R packages were developed in part or full by Hadley Wickham and others at RStudio. Many of these packages are less than ten years old but have been rapidly adapted by the R community. As a result, newer examples of R code will often look very different from the code in older R scripts, including examples in books that are more than a few years old. In this course, I’ll focus on <code>tidyverse</code> functions when possible, but I do put in details about base R equivalent functions or processes at some points. This will help you interpret older code. You can download all the <code>tidyverse</code> packages at the same time with <code>install.packages(“tidyverse”)</code> and make all the <code>tidyverse</code> functions available for use with<code>library(“tidyverse”)</code>.
</p>
</div>
</div>
<div id="reading-in-other-file-types" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Reading in other file types</h3>
<p>Later in the course, we’ll talk about how to open a variety of other file types
in R. You might find it immediately useful to be able to read in files from
other statistical programs.</p>
<p>There are two “tidyverse” packages, <code>readxl</code> and <code>haven</code>, that help with this.
They allow you to read in files from the following formats:</p>
<table>
<thead>
<tr class="header">
<th align="left">File type</th>
<th align="left">Function</th>
<th align="left">Package</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Excel</td>
<td align="left"><code>read_excel()</code></td>
<td align="left"><code>readxl</code></td>
</tr>
<tr class="even">
<td align="left">SAS</td>
<td align="left"><code>read_sas()</code></td>
<td align="left"><code>haven</code></td>
</tr>
<tr class="odd">
<td align="left">SPSS</td>
<td align="left"><code>read_spss()</code></td>
<td align="left"><code>haven</code></td>
</tr>
<tr class="even">
<td align="left">Stata</td>
<td align="left"><code>read_stata()</code></td>
<td align="left"><code>haven</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="directories-and-pathnames" class="section level2">
<h2><span class="header-section-number">3.4</span> Directories and pathnames</h2>
<div id="directory-structure" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Directory structure</h3>
<p>So far, we’ve only looked at reading in files that are located in your current
working directory. For example, if you’re working in an R Project, by default
the project will open with that directory as the working directory, so you can
read files that are saved in that project’s main directory using only the file
name as a reference.</p>
<p>You will often want to read in files that are located somewhere else on
your computer, or even files that are saved on another computer or posted
online. Doing this is very similar to reading in a file that is in your current
working directory; the only difference is that you need to give R some
directions so it can find the file.</p>
<p>The most common case will be reading in files in a subdirectory of your current
working directory. For example, you may have created a “data” subdirectory in
one of your R Projects directories to keep all the project’s data files in the
same place while keeping the structure of the main directory fairly clean. In
this case, you’ll need to direct R into that subdirectory when you want to read
one of those files.</p>
<p>To understand how to give R these directions, you need to have some
understanding of the directory structure of your computer. It seems a bit of a
pain and a bit complex to have to think about computer directory structure in
the “basics” part of this class, but this structure is not terribly complex
once you get the idea of it. There are a couple of very good reasons why it’s
worth learning now.</p>
<p>First, many of the most frustrating errors you get when you start using R
trace back to understanding directories and filepaths. For example, when you try
to read a file into R using only the filename, and that file is not in your
current working directory, you will get an error like:</p>
<pre><code>Error in file(file, &quot;rt&quot;) : cannot open the connection
In addition: Warning message:
In file(file, &quot;rt&quot;) : cannot open file &#39;Ex.csv&#39;: No such file or directory</code></pre>
<p>This error is especially frustrating when you’re new to R because it happens at
the very beginning of your analysis—you can’t even import the data. Also, if
you don’t understand a bit about working directories and how R looks for the
file you’re asking it to find, you’d have no idea where to start to fix this
error. Second, once you understand how to use pathnames, especially relative
pathnames, to tell R how to find a file that is in a directory other than your
working directory, you will be able to organize all of your files for a project
in a much cleaner way. For example, you can create a directory for your
project, then create one subdirectory to store all of your R scripts, and
another to store all of your data, and so on. This can help you keep very
complex projects more structured and easier to navigate.</p>
<p>Your computer organizes files through a collection of directories. Chances are,
you are fairly used to working with these in your daily life already, although
you may call them “folders” rather than “directories”. For example, you’ve
probably created new directories to store data files and Word documents for a
specific project.</p>
<p>Figure <a href="rprog2.html#fig:filedirstructure">3.1</a> gives an example file directory structure
for a hypothetical computer. Directories are shown in blue, and files in green.</p>
<div class="figure" style="text-align: center"><span id="fig:filedirstructure"></span>
<img src="figures/FileDirectoryStructure.png" alt="An example of file directory structure." width="600pt" />
<p class="caption">
Figure 3.1: An example of file directory structure.
</p>
</div>
<p>Notice a few interesting things from Figure <a href="rprog2.html#fig:filedirstructure">3.1</a>. First,
you might notice the structure includes a few of the directories that you use a
lot on your own computer, like <code>Desktop</code>, <code>Documents</code>, and <code>Downloads</code>. Next,
the directory at the very top is the computer’s root directory, <code>/</code>. For a PC,
the root directory might something like <code>C:</code>. For Unix and Macs, it’s usually
<code>/</code>. Finally, if you look closely, you’ll notice that it’s possible to have
different files in different locations of the directory structure with the same
file name. For example, in the figure, there are files names <code>heat_mort.csv</code> in
both the <code>CourseText</code> directory and in the <code>example_data</code> directory. These are
two different files with different contents, but they can have the same name as
long as they’re in different directories. This fact—that you can have files
with the same name in different places—should help you appreciate how useful
it is that R requires you to give very clear directions to describe exactly
which file you want R to read in, if you aren’t importing something in your
current working directory.</p>
<p>You will have a home directory somewhere near the top of your structure,
although it’s likely not your root directory. In the hypothetical computer in
Figure <a href="rprog2.html#fig:filedirstructure">3.1</a>, the home directory is
<code>/Users/brookeanderson</code>. I’ll describe just a bit later how you can figure out
what your own home directory is on your own computer.</p>
</div>
<div id="working-directory" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Working directory</h3>
<p>When you run R, it’s always running from within some working directory, which
will be one of the directories somewhere in your computer’s directory
structure. At any time, you can figure out which directory R is working in by
running the command <code>getwd()</code> (short for “get working directory”). For example,
my R session is currently running in the following directory:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="rprog2.html#cb7-1"></a><span class="kw">getwd</span>()</span></code></pre></div>
<pre><code>## [1] &quot;/Users/johnvolckens/Documents/Teaching/DataSci/edar_coursebook&quot;</code></pre>
<p>This means that, for my current R session, R is working in the
<code>edar_coursebook</code> subdirectory of my <code>johnvolckens</code> directory (home directory).</p>
<p>There are a few general rules for which working directory R selects when
you open an R session. These are not absolute rules, but they’re generally
true. If you have R closed, and you open it by double-clicking on an R script,
then R will generally open with, as its working directory, the directory in
which that script is stored. This is often a very convenient convention,
because often any of the data you’ll import for that script is somewhere
near where the script file is saved in the directory structure. If you open R
by double-clicking on the R icon in “Applications” (or the start menu on a
PC), R will start in its default working directory. You can find out what this
is, or change it, in RStudio’s “Preferences”. Finally, if you open an R
Project, R will start in that project’s working directory—where the <code>.Rproj</code>
file for the project is stored. This is one of the reasons why we always create
a new R Project when starting a data analysis - RStudio projects remember where
to look!</p>
</div>
<div id="file-and-directory-pathnames" class="section level3">
<h3><span class="header-section-number">3.4.3</span> File and directory pathnames</h3>
<p>Once you get a picture of how your directories and files are organized, you can
use pathnames, either absolute or relative, to read in files from different
directories outside your current working directory. Pathnames are the
directions for getting to a directory or file stored on your computer.</p>
<p>When you want to reference a directory or file, you can use one of two types of
pathnames:</p>
<ul>
<li><em>Relative pathname</em>: How to get to the file or directory from your current working directory</li>
<li><em>Absolute pathname</em>: How to get to the file or directory from anywhere on the computer</li>
</ul>
<p>Absolute pathnames are a bit more straightforward conceptually because they
don’t depend on your current working directory; however, they’re also a lot
longer to write and very inconvenient if you’ll be sharing some of your code
with other people who might try to run it on their own computers. I’ll explain
this second point a bit more later in this section.</p>
<p>I <strong>strongly advise against the use of absolute pathnames</strong> because of the
aforementioned collaborative issue, but I will include some details here
nonetheless. <em>Absolute pathnames</em> give the full directions to a directory or
file, starting all the way at the root directory. For example, the
<code>heat_mort.csv</code> file in the <code>CourseText</code> directory has the absolute pathname:</p>
<pre><code>&quot;/Users/brookeanderson/Desktop/RCourseFall2015/CourseText/heat_mort.csv&quot;</code></pre>
<p>You can use this absolute pathname to read this file in using any of the
<code>readr</code> functions to read in data. This absolute pathname will <em>always</em> work,
regardless of your current working directory, because it gives directions from
the root. In other words, it will always be clear to R exactly what file you’re
talking about. Here’s the code to use to read that file in using the
<code>read.csv()</code> function with the file’s absolute pathname:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="rprog2.html#cb10-1"></a>heat_mort &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;/Users/brookeanderson/Desktop/RCourseFall2015/CourseText/heat_mort.csv&quot;</span>)</span></code></pre></div>
<p>The <em>relative pathname</em>, on the other hand, gives R the directions for how to
get to a directory or file from the current working directory. If the file or
directory you’re looking for is pretty close to your current working directory
in your directory structure, then a relative pathname can be a much shorter way
to tell R how to get to the file than an absolute pathname. But, the relative
pathname depends on your current working directory—the relative pathname that
works perfectly when you’re working in one directory will not work at all once
you move into a different working directory.</p>
<p>As an example of a relative pathname, say you’re working in the directory
<code>RCourseFall2015</code> within the file structure shown in Figure <a href="rprog2.html#fig:filedirstructure">3.1</a>, and you want to read in the <code>heat_mort.csv</code> file
in the <code>CourseText</code> directory. To get from <code>RCourseFall2015</code> to that file,
you’d need to look in the subdirectory <code>CourseText</code>, where you could find
<code>heat_mort.csv</code>. Therefore, the relative pathname from your working directory
would be:</p>
<pre><code>&quot;CourseText/heat_mort.csv&quot;</code></pre>
<p>You can use this relative pathname to tell R where to find and read in the
file:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="rprog2.html#cb12-1"></a>heat_mort &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="st">&quot;CourseText/heat_mort.csv&quot;</span>)</span></code></pre></div>
<p>While this pathname is much shorter than the absolute pathname, it is important
to remember that if you are working in a different working directory, this
relative pathname would no longer work.</p>
<p>There are a few abbreviations that can be really useful for pathnames:</p>
<table>
<thead>
<tr class="header">
<th align="left">Shorthand</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>~</code></td>
<td align="left">Home directory</td>
</tr>
<tr class="even">
<td align="left"><code>.</code></td>
<td align="left">Current working directory</td>
</tr>
<tr class="odd">
<td align="left"><code>..</code></td>
<td align="left">One directory up from current working directory</td>
</tr>
<tr class="even">
<td align="left"><code>../..</code></td>
<td align="left">Two directories up from current working directory</td>
</tr>
</tbody>
</table>
<p>These can help you keep pathnames shorter and also help you move “up-and-over”
to get to a file or directory that’s not on the direct path below your current
working directory.</p>
<p>For example, my home directory is <code>/Users/johnvolckens</code>. You can use the
<code>list.files()</code> function to list all the files in a directory. If I wanted to
list all the files in my <code>Downloads</code> directory, which is a direct sub-directory
of my home directory, I could use:</p>
<pre><code>list.files(&quot;~/Downloads&quot;)</code></pre>
<p>As a second example, say I was working in the working directory <code>CourseText</code>,
but I wanted to read in the <code>heat_mort.csv</code> file that’s in the <code>example_data</code>
directory, rather than the one in the <code>CourseText</code> directory. I can use the
<code>..</code> abbreviation to tell R to look up one directory from the current working
directory, and then down within a subdirectory of that. The relative pathname
in this case is:</p>
<pre><code>&quot;../Week2_Aug31/example_data/heat_mort.csv&quot;</code></pre>
<p>The <code>../</code> tells R to look one directory up from the working directory (the
directory that is one level above the current directory is also known as the
<strong>parent directory</strong>), which in this case is to <code>RCourseFall2015</code>, and then down within that directory to <code>Week2_Aug31</code>, then to <code>example_data</code>, and then to look
wihtin that directory for the file <code>heat_mort.csv</code>.</p>
<p>The relative pathname to read this file while R is working in the <code>CourseTest</code>
directory would be:</p>
<pre><code>heat_mort &lt;- read_csv(&quot;../Week2_Aug31/example_data/heat_mort.csv&quot;)</code></pre>
<p>Relative pathnames “break” as soon as you try them from a different working
directory—this fact might make it seem like you would never want to use
relative pathnames, and would always want to use absolute ones instead, even if
they’re longer. If that were the only consideration (length of the pathname),
then perhaps that would be true. However, as you do more and more in R, there
will likely be many occasions when you want to use relative pathnames instead.
They are particularly useful if you ever want to share a whole directory, with
all subdirectories, with a collaborator. In that case, if you’ve used relative
pathnames, all the code should work fine for the person you share with, even
though they’re running it on their own computer. Conversely, if you’d used
absolute pathnames, none of them would work on another computer, because the
“top” of the directory structure (i.e., for me, <code>/Users/johnvolckens/</code>)
will definitely be different for your collaborator’s computer than it is
for yours.</p>
<p>If you’re getting errors reading in files, and you think it’s related to the
relative pathname you’re using, it’s often helpful to use <code>list.files()</code> to
make sure the file you’re trying to load is in the directory guided by the
relative pathname. The <code>list.files()</code> function is very useful because it
returnsa character vector of filenames (and paths, if desired). Once you have a
vector of filenames you can do things like ask logical questions (does this file
exist?), or count the number of files, or pass a relative path to a new
function…</p>
</div>
<div id="tangent-paste" class="section level3">
<h3><span class="header-section-number">3.4.4</span> Tangent: <code>paste</code></h3>
<p>This is a good opportunity to explain how to use some functions that can be
very helpful when you’re using relative or absolute pathnames: <code>paste()</code> and
<code>paste0()</code>. It’s important that you understand that you can save a pathname
(absolute or relative) as an R object and then use that R object in calls to
later functions like <code>list.files()</code> and <code>read_csv()</code>. For example, to use the
absolute pathname to read the <code>heat_mort.csv</code> file in the <code>CourseText</code>
directory, you could run:</p>
<pre><code>my_file &lt;- &quot;/Users/brookeanderson/Desktop/RCourseFall2015/CourseText/heat_mort.csv&quot;
heat_mort &lt;- read_csv(file = my_file)</code></pre>
<p>You’ll notice from this code that the pathname to get to a directory or file
can sometimes become ungainly and long. To keep your code cleaner, you can
address this by using the <code>paste</code> or <code>paste0</code> functions. These functions come
in handy in a lot of other applications, too, but this is a good place to
introduce them.</p>
<p>The <code>paste()</code> function is very straightforward. It takes, as inputs, a series
of different character strings you want to join together, and it pastes them
together in a single character string. (As a note, this means that your
resulting vector will only be one element long for basic uses of <code>paste()</code>,
while the inputs will be several different character stings.) You separate all
the different things you want to paste together using with commas in the
function call. For example:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="rprog2.html#cb17-1"></a><span class="kw">paste</span>(<span class="st">&quot;Sunday&quot;</span>, <span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Sunday Monday Tuesday&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="rprog2.html#cb19-1"></a><span class="kw">length</span>(<span class="dt">x =</span> <span class="kw">c</span>(<span class="st">&quot;Sunday&quot;</span>, <span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="rprog2.html#cb21-1"></a><span class="kw">length</span>(<span class="dt">x =</span> <span class="kw">paste</span>(<span class="st">&quot;Sunday&quot;</span>, <span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>))</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>The <code>paste()</code> function has an option called <code>sep =</code>. This tells R what you
want to use to separate the values you’re pasting together in the output. The
default is for R to use a space, as shown in the example above. To change the
separator, you can change this option, and you can put in just about anything
you want. For example, if you wanted to paste all the values together without
spaces, you could use <code>sep = ""</code>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="rprog2.html#cb23-1"></a><span class="kw">paste</span>(<span class="st">&quot;Sunday&quot;</span>, <span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SundayMondayTuesday&quot;</code></pre>
<p>As a shortcut, instead of using the <code>sep = ""</code> option, you could achieve the
same thing using the <code>paste0</code> function. This function is almost exactly like
<code>paste</code>, but it defaults to <code>""</code> (i.e., no space) as the separator between
values by default:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="rprog2.html#cb25-1"></a><span class="kw">paste0</span>(<span class="st">&quot;Sunday&quot;</span>, <span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;SundayMondayTuesday&quot;</code></pre>
<p>With pathnames, you will usually not want spaces. Therefore, you could think
about using <code>paste0()</code> to write an object with the pathname you want to
ultimately use in commands like <code>list.files()</code> and <code>setwd()</code>. This will allow
you to keep your code cleaner, since you can now divide long pathnames over
multiple lines:</p>
<pre><code>my_file &lt;- paste0(&quot;/Users/brookeanderson/Desktop/&quot;,
                  &quot;RCourseFall2015/CourseText/heat_mort.csv&quot;)
heat_mort &lt;- read_csv(file = my_file)</code></pre>
<p>You will end up using <code>paste()</code> and <code>paste0()</code> for many other applications, but
this is a good example of how you can start using these functions to start to
get a feel for them.</p>
</div>
<div id="reading-online-flat-files" class="section level3">
<h3><span class="header-section-number">3.4.5</span> Reading online flat files</h3>
<p>So far, I’ve only shown you how to import data from files that are saved to
your computer. R can also read in data directly from the web. If a flat file is
posted online, you can read it into R in almost exactly the same way that you
would read in a local file. The only difference is that you will use the file’s
URL instead of a local file path for the <code>file</code> argument.</p>
<p>With the <code>read_*</code> family of functions, you can do this both for flat files from
a non-secure webpage (i.e., one that starts with <code>http</code>) and for files from a
secure webpage (i.e., one that starts with <code>https</code>), including GitHub and
Dropbox.</p>
<p>For example, to read in data from this <a href="https://raw.githubusercontent.com/cmrivers/ebola/master/country_timeseries.csv">GitHub repository of Ebola data</a>, you can run:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="rprog2.html#cb28-1"></a>url &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;https://raw.githubusercontent.com/cmrivers/&quot;</span>,</span>
<span id="cb28-2"><a href="rprog2.html#cb28-2"></a>              <span class="st">&quot;ebola/master/country_timeseries.csv&quot;</span>)</span>
<span id="cb28-3"><a href="rprog2.html#cb28-3"></a>ebola &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="dt">file =</span> url)</span>
<span id="cb28-4"><a href="rprog2.html#cb28-4"></a><span class="kw">slice</span>(<span class="dt">.data =</span> (dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dt">.data =</span> ebola, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)), <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   Date       Day Cases_Guinea
##   &lt;chr&gt;    &lt;dbl&gt;        &lt;dbl&gt;
## 1 1/5/2015   289         2776
## 2 1/4/2015   288         2775
## 3 1/3/2015   287         2769</code></pre>
</div>
</div>
<div id="data-cleaning" class="section level2">
<h2><span class="header-section-number">3.5</span> Data cleaning</h2>
<p>Once you have loaded data into R, you’ll likely need to clean it up a little
before you’re ready to analyze it. Here, I’ll go over the first steps of how to
do that with functions from <code>dplyr</code>, another package in the tidyverse. Here are
some of the most common data-cleaning tasks, along with the corresponding
<code>dplyr</code> function for each:</p>
<table>
<thead>
<tr class="header">
<th align="left">Task</th>
<th align="left"><code>dplyr</code> function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Renaming columns</td>
<td align="left"><code>rename()</code></td>
</tr>
<tr class="even">
<td align="left">Filtering to certain rows</td>
<td align="left"><code>filter()</code></td>
</tr>
<tr class="odd">
<td align="left">Selecting certain columns</td>
<td align="left"><code>select()</code></td>
</tr>
<tr class="even">
<td align="left">Adding or changing columns</td>
<td align="left"><code>mutate()</code></td>
</tr>
</tbody>
</table>
<p>In this section, I describe how to do each of these four tasks. For the
examples in this section, I use example data listing guests to the Daily Show.
To follow along with these examples, you’ll want to load that data, as well as
load the <code>dplyr</code> package. Install it using <code>install.packages()</code> if you have not
done so already.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="rprog2.html#cb30-1"></a><span class="kw">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb30-2"><a href="rprog2.html#cb30-2"></a>daily_show &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/daily_show_guests.csv&quot;</span>, <span class="dt">skip =</span> <span class="dv">4</span>)</span></code></pre></div>
<p>I’ve used this data in previous examples, but as a reminder, here’s what it
looks like:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="rprog2.html#cb31-1"></a><span class="kw">head</span>(<span class="dt">x =</span> daily_show)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##    YEAR GoogleKnowlege_Occupation Show    Group  Raw_Guest_List  
##   &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;           
## 1  1999 actor                     1/11/99 Acting Michael J. Fox  
## 2  1999 Comedian                  1/12/99 Comedy Sandra Bernhard 
## 3  1999 television actress        1/13/99 Acting Tracey Ullman   
## 4  1999 film actress              1/14/99 Acting Gillian Anderson
## 5  1999 actor                     1/18/99 Acting David Alan Grier
## 6  1999 actor                     1/19/99 Acting William Baldwin</code></pre>
<div id="renaming-columns" class="section level3">
<h3><span class="header-section-number">3.5.1</span> Renaming columns</h3>
<p>A first step is often renaming the columns of the dataframe. It can be hard to
work with a column name that:</p>
<ul>
<li>is long</li>
<li>includes spaces or other special characters</li>
<li>includes uppercase letters</li>
</ul>
<p>You can check out the column names for a dataframe using the <code>colnames()</code>
function, with the dataframe object as the argument. Several of the column
names in <code>daily_show</code> have some of these issues:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="rprog2.html#cb33-1"></a><span class="kw">colnames</span>(<span class="dt">x =</span> daily_show)</span></code></pre></div>
<pre><code>## [1] &quot;YEAR&quot;                      &quot;GoogleKnowlege_Occupation&quot;
## [3] &quot;Show&quot;                      &quot;Group&quot;                    
## [5] &quot;Raw_Guest_List&quot;</code></pre>
<p>To rename these columns, use <code>rename()</code>. The basic syntax is:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="rprog2.html#cb35-1"></a><span class="co">## generic code; will not run</span></span>
<span id="cb35-2"><a href="rprog2.html#cb35-2"></a>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">.data =</span> dataframe,</span>
<span id="cb35-3"><a href="rprog2.html#cb35-3"></a>              <span class="dt">new_column_name_1 =</span> old_column_name_<span class="dv">1</span>,</span>
<span id="cb35-4"><a href="rprog2.html#cb35-4"></a>              <span class="dt">new_column_name_2 =</span> old_column_name_<span class="dv">2</span>)</span></code></pre></div>
<p>The first argument is the dataframe for which you’d like to rename columns.
Then you list each pair of new and old column names (in that order) for each
of the columns you want to rename. To rename columns in the <code>daily_show</code> data
using <code>rename()</code>, for example, you would run:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="rprog2.html#cb36-1"></a>daily_show &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">.data =</span> daily_show,</span>
<span id="cb36-2"><a href="rprog2.html#cb36-2"></a>                            <span class="dt">year =</span> YEAR,</span>
<span id="cb36-3"><a href="rprog2.html#cb36-3"></a>                            <span class="dt">job =</span> GoogleKnowlege_Occupation,</span>
<span id="cb36-4"><a href="rprog2.html#cb36-4"></a>                            <span class="dt">date =</span> Show,</span>
<span id="cb36-5"><a href="rprog2.html#cb36-5"></a>                            <span class="dt">category =</span> Group,</span>
<span id="cb36-6"><a href="rprog2.html#cb36-6"></a>                            <span class="dt">guest_name =</span> Raw_Guest_List)</span>
<span id="cb36-7"><a href="rprog2.html#cb36-7"></a><span class="kw">head</span>(<span class="dt">x =</span> daily_show, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##    year job                date    category guest_name     
##   &lt;dbl&gt; &lt;chr&gt;              &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;          
## 1  1999 actor              1/11/99 Acting   Michael J. Fox 
## 2  1999 Comedian           1/12/99 Comedy   Sandra Bernhard
## 3  1999 television actress 1/13/99 Acting   Tracey Ullman</code></pre>
<div class="rmdwarning">
<p>
Many of the functions in tidyverse packages, including those in <code>dplyr</code>, provide exceptions to the general rule about quotation marks. Unfortunately, this may make it a bit hard to learn when to use quotation marks. One way to think about this, which is a bit of an oversimplification but can help as you’re learning, is to assume that anytime you’re using a <code>dplyr</code> function, every column in the dataframe you’re working with has been loaded to your R session as its own object, which means you don’t need to use parentheses—most of the time.
</p>
</div>
<p>If you have been paying close attention to the code snippets, you may have
noticed the last bit of code included both the <code>package name</code> and the <code>function</code>
call separated by two colons, as in <code>dplyr::rename()</code>. This syntax of <code>package.name::package.function</code> is used for the sake of being <strong>explicit</strong>,
because (as you may have guessed) some R packages use the same for functions
that do entirely different things! For example, both the base R <code>stats</code> package
and the <code>dplyr</code> package have a function called <code>filter()</code> - the former is used
to pick our rows from a data frame and the latter is used to manipulate
time-series objects. When two packages are loaded containing functions with the
same name, R will default to using the function for the most recently loaded
package (and send you a message stating as much). This can be tricky business
when your R session has many packages running, which is why it never hurts to
be <strong>explicit</strong> in your function calls.</p>
</div>
<div id="selecting-columns" class="section level3">
<h3><span class="header-section-number">3.5.2</span> Selecting columns</h3>
<p>Next, you may want to select only some columns of the dataframe. You can use
the <code>select()</code> function from <code>dplyr</code> to subset the dataframe to certain
columns. The basic structure of this command is:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="rprog2.html#cb38-1"></a><span class="co">## generic code; will not run</span></span>
<span id="cb38-2"><a href="rprog2.html#cb38-2"></a>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dt">.data =</span> dataframe, column_name_<span class="dv">1</span>, column_name_<span class="dv">2</span>, ...)</span></code></pre></div>
<p>In this call, you first specify the dataframe to use and then list all of the
column names to include in the output dataframe, with commas between each
column name. For example, to select all columns in <code>daily_show</code> except <code>year</code>
(since that information is already included in <code>date</code>), run:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="rprog2.html#cb39-1"></a>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dt">.data =</span> daily_show, job, date, category, guest_name)</span></code></pre></div>
<pre><code>## # A tibble: 2,693 x 4
##    job                date    category guest_name      
##    &lt;chr&gt;              &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;           
##  1 actor              1/11/99 Acting   Michael J. Fox  
##  2 Comedian           1/12/99 Comedy   Sandra Bernhard 
##  3 television actress 1/13/99 Acting   Tracey Ullman   
##  4 film actress       1/14/99 Acting   Gillian Anderson
##  5 actor              1/18/99 Acting   David Alan Grier
##  6 actor              1/19/99 Acting   William Baldwin 
##  7 Singer-lyricist    1/20/99 Musician Michael Stipe   
##  8 model              1/21/99 Media    Carmen Electra  
##  9 actor              1/25/99 Acting   Matthew Lillard 
## 10 stand-up comedian  1/26/99 Comedy   David Cross     
## # … with 2,683 more rows</code></pre>
<div class="rmdwarning">
<p>
Don’t forget that, if you want to change column names in the saved object, you must reassign the object to be the output of <code>rename()</code>. If you run one of these cleaning functions without reassigning the object, R will print out the result, but the object itself won’t change. You can take advantage of this, as I’ve done in this example, to look at the result of applying a function to a dataframe without changing the original dataframe. This can be helpful as you’re figuring out how to write your code.
</p>
</div>
<p>The <code>select()</code> function also provides some time-saving tools. In the last
example, we wanted all the columns except one. Instead of writing out all the
columns we want, we can use <code>-</code> with only the columns we don’t want to
save time (notice the object reassignment/override):</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="rprog2.html#cb41-1"></a>daily_show &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="dt">.data =</span> daily_show, <span class="op">-</span>year)</span>
<span id="cb41-2"><a href="rprog2.html#cb41-2"></a><span class="kw">head</span>(<span class="dt">x =</span> daily_show, <span class="dt">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   job                date    category guest_name     
##   &lt;chr&gt;              &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;          
## 1 actor              1/11/99 Acting   Michael J. Fox 
## 2 Comedian           1/12/99 Comedy   Sandra Bernhard
## 3 television actress 1/13/99 Acting   Tracey Ullman</code></pre>
</div>
<div id="add-or-change-columns" class="section level3">
<h3><span class="header-section-number">3.5.3</span> Add or change columns</h3>
<p>You can change a column or add a new column using the <code>mutate()</code> function from
the <code>dplyr</code> package. That function has the syntax:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="rprog2.html#cb43-1"></a><span class="co"># generic code; will not run</span></span>
<span id="cb43-2"><a href="rprog2.html#cb43-2"></a>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">.data =</span> dataframe,</span>
<span id="cb43-3"><a href="rprog2.html#cb43-3"></a>              <span class="dt">changed_column =</span> <span class="cf">function</span>(changed_column),</span>
<span id="cb43-4"><a href="rprog2.html#cb43-4"></a>              <span class="dt">new_column =</span> <span class="cf">function</span>(other arguments))</span></code></pre></div>
<p>For example, the <code>job</code> column in <code>daily_show</code> sometimes uses upper case and
sometimes does not. This call uses the <code>unique()</code> function to list only unique
values in this column:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="rprog2.html#cb44-1"></a><span class="kw">head</span>(<span class="dt">x =</span> <span class="kw">unique</span>(<span class="dt">x =</span> daily_show<span class="op">$</span>job), <span class="dt">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;actor&quot;              &quot;Comedian&quot;           &quot;television actress&quot;
##  [4] &quot;film actress&quot;       &quot;Singer-lyricist&quot;    &quot;model&quot;             
##  [7] &quot;stand-up comedian&quot;  &quot;actress&quot;            &quot;comedian&quot;          
## [10] &quot;Singer-songwriter&quot;</code></pre>
<p>To make all the observations in the <code>job</code> column lowercase, use the
<code>str_to_lower()</code> function from the <code>stringr</code> package within a <code>mutate()</code>
function:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="rprog2.html#cb46-1"></a><span class="kw">library</span>(<span class="dt">package =</span> <span class="st">&quot;stringr&quot;</span>)</span>
<span id="cb46-2"><a href="rprog2.html#cb46-2"></a><span class="kw">mutate</span>(<span class="dt">.data =</span> daily_show, </span>
<span id="cb46-3"><a href="rprog2.html#cb46-3"></a>       <span class="dt">job =</span> <span class="kw">str_to_lower</span>(<span class="dt">string =</span> job))</span></code></pre></div>
<pre><code>## # A tibble: 2,693 x 4
##    job                date    category guest_name      
##    &lt;chr&gt;              &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;           
##  1 actor              1/11/99 Acting   Michael J. Fox  
##  2 comedian           1/12/99 Comedy   Sandra Bernhard 
##  3 television actress 1/13/99 Acting   Tracey Ullman   
##  4 film actress       1/14/99 Acting   Gillian Anderson
##  5 actor              1/18/99 Acting   David Alan Grier
##  6 actor              1/19/99 Acting   William Baldwin 
##  7 singer-lyricist    1/20/99 Musician Michael Stipe   
##  8 model              1/21/99 Media    Carmen Electra  
##  9 actor              1/25/99 Acting   Matthew Lillard 
## 10 stand-up comedian  1/26/99 Comedy   David Cross     
## # … with 2,683 more rows</code></pre>
<p>We will take a deeper dive into strings and the <code>stringr</code> package
<a href="rprog3.html#rprog3">later on</a>.</p>
</div>
<div id="base-r-equivalents-to-dplyr-functions" class="section level3">
<h3><span class="header-section-number">3.5.4</span> Base R equivalents to <code>dplyr</code> functions</h3>
<p>Just so you know, all of these <code>dplyr</code> functions have alternatives, either
functions or processes, in base R:</p>
<table>
<thead>
<tr class="header">
<th align="left"><code>dplyr</code></th>
<th align="left">Base R equivalent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>rename()</code></td>
<td align="left">Reassign <code>colnames()</code></td>
</tr>
<tr class="even">
<td align="left"><code>select()</code></td>
<td align="left">Square bracket indexing</td>
</tr>
<tr class="odd">
<td align="left"><code>filter()</code></td>
<td align="left"><code>subset()</code></td>
</tr>
<tr class="even">
<td align="left"><code>mutate()</code></td>
<td align="left">Use <code>$</code> to change or create columns</td>
</tr>
</tbody>
</table>
<p>You will see these alternatives used in older code examples.</p>
</div>
<div id="filtering-to-certain-rows" class="section level3">
<h3><span class="header-section-number">3.5.5</span> Filtering to certain rows</h3>
<p>Next, you might want to filter the dataset to certain rows. For example, you
might want to get a dataset with only the guests from 2015, or only guests who
are scientists.</p>
<p>You can use the <code>filter()</code> function from <code>dplyr</code> to filter a dataframe down to
a subset of rows. The syntax is:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="rprog2.html#cb48-1"></a><span class="co">## generic code; will not run</span></span>
<span id="cb48-2"><a href="rprog2.html#cb48-2"></a><span class="kw">filter</span>(<span class="dt">.data =</span> dataframe, logical expression)</span></code></pre></div>
<p>The <code>logical expression</code> in this call gives the condition that a row must meet
to be included in the output data frame. For example, if you want to create a
data frame that only includes guests who were scientists, you can run:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="rprog2.html#cb49-1"></a>scientists &lt;-<span class="st"> </span><span class="kw">filter</span>(<span class="dt">.data =</span> daily_show, </span>
<span id="cb49-2"><a href="rprog2.html#cb49-2"></a>                     category <span class="op">==</span><span class="st"> &quot;Science&quot;</span>)</span>
<span id="cb49-3"><a href="rprog2.html#cb49-3"></a><span class="kw">head</span>(<span class="dt">x =</span> scientists)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   job            date    category guest_name            
##   &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;                 
## 1 neurosurgeon   4/28/03 Science  Dr Sanjay Gupta       
## 2 scientist      1/13/04 Science  Catherine Weitz       
## 3 physician      6/15/04 Science  Hassan Ibrahim        
## 4 doctor         9/6/05  Science  Dr. Marc Siegel       
## 5 astronaut      2/13/06 Science  Astronaut Mike Mullane
## 6 Astrophysicist 1/30/07 Science  Neil deGrasse Tyson</code></pre>
<p>To build a logical expression to use in <code>filter</code>, you’ll need to know some of
R’s logical operators. Some commonly used ones are:</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>==</code></td>
<td>equals</td>
<td><code>category == "Acting"</code></td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>does not equal</td>
<td><code>category != "Comedy</code></td>
</tr>
<tr class="odd">
<td><code>%in%</code></td>
<td>match; contains the following</td>
<td><code>category %in% c("Academic", "Science")</code></td>
</tr>
<tr class="even">
<td><code>is.na()</code></td>
<td>is missing</td>
<td><code>is.na(job)</code></td>
</tr>
<tr class="odd">
<td><code>!is.na()</code></td>
<td>is not missing</td>
<td><code>!is.na(job)</code></td>
</tr>
<tr class="even">
<td><code>&amp;</code></td>
<td>and</td>
<td><code>year == 2015 &amp; category == "Academic"</code></td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td>or</td>
<td><code>year == 2015 | category == "Academic"</code></td>
</tr>
</tbody>
</table>
<p>We’ll use these logical operators and expressions a lot more as the course
continues, so they’re worth memorizing.</p>
<div class="rmdwarning">
<p>
Two common mistakes with logical operators are: (1) Using <code>=</code> instead of <code>==</code> to check if two values are equal; and (2) Using <code>== NA</code> instead of <code>is.na</code> to check for missing observations.
</p>
</div>
</div>
</div>
<div id="piping" class="section level2">
<h2><span class="header-section-number">3.6</span> Piping</h2>
<p>So far, I’ve shown how to use these <code>dplyr</code> functions one at a time to clean up
the data, reassigning the dataframe object at each step; however, there’s a
trick called “piping” (with <code>%&gt;%</code>) that will let you complete multiple data
wrangling steps at once.</p>
<p>If you look at the format of these <code>dplyr</code> functions, you’ll notice that they
all take a dataframe as their first argument:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="rprog2.html#cb51-1"></a><span class="co"># generic code; will not run</span></span>
<span id="cb51-2"><a href="rprog2.html#cb51-2"></a><span class="kw">rename</span>(<span class="dt">.data =</span> dataframe, </span>
<span id="cb51-3"><a href="rprog2.html#cb51-3"></a>       <span class="dt">new_column_name_1 =</span> old_column_name_<span class="dv">1</span>,</span>
<span id="cb51-4"><a href="rprog2.html#cb51-4"></a>       <span class="dt">new_column_name_2 =</span> old_column_name_<span class="dv">2</span>)</span>
<span id="cb51-5"><a href="rprog2.html#cb51-5"></a><span class="kw">select</span>(<span class="dt">.data =</span> dataframe, </span>
<span id="cb51-6"><a href="rprog2.html#cb51-6"></a>       column_name_<span class="dv">1</span>, column_name_<span class="dv">2</span>)</span>
<span id="cb51-7"><a href="rprog2.html#cb51-7"></a><span class="kw">filter</span>(<span class="dt">.data =</span> dataframe, </span>
<span id="cb51-8"><a href="rprog2.html#cb51-8"></a>       logical expression)</span>
<span id="cb51-9"><a href="rprog2.html#cb51-9"></a><span class="kw">mutate</span>(<span class="dt">.data =</span> dataframe,</span>
<span id="cb51-10"><a href="rprog2.html#cb51-10"></a>       <span class="dt">changed_column =</span> <span class="cf">function</span>(changed_column),</span>
<span id="cb51-11"><a href="rprog2.html#cb51-11"></a>       <span class="dt">new_column =</span> <span class="cf">function</span>(other arguments))</span></code></pre></div>
<p>Without piping, you have to reassign the dataframe object at each step of this
cleaning if you want the changes saved in the object:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="rprog2.html#cb52-1"></a>daily_show &lt;-<span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/daily_show_guests.csv&quot;</span>,</span>
<span id="cb52-2"><a href="rprog2.html#cb52-2"></a>                      <span class="dt">skip =</span> <span class="dv">4</span>)</span>
<span id="cb52-3"><a href="rprog2.html#cb52-3"></a>daily_show &lt;-<span class="st"> </span><span class="kw">rename</span>(<span class="dt">.data =</span> daily_show, </span>
<span id="cb52-4"><a href="rprog2.html#cb52-4"></a>                     <span class="dt">job =</span> GoogleKnowlege_Occupation,</span>
<span id="cb52-5"><a href="rprog2.html#cb52-5"></a>                     <span class="dt">date =</span> Show,</span>
<span id="cb52-6"><a href="rprog2.html#cb52-6"></a>                     <span class="dt">category =</span> Group,</span>
<span id="cb52-7"><a href="rprog2.html#cb52-7"></a>                     <span class="dt">guest_name =</span> Raw_Guest_List)</span>
<span id="cb52-8"><a href="rprog2.html#cb52-8"></a>daily_show &lt;-<span class="st"> </span><span class="kw">select</span>(<span class="dt">.data =</span> daily_show, </span>
<span id="cb52-9"><a href="rprog2.html#cb52-9"></a>                     <span class="op">-</span>YEAR) </span>
<span id="cb52-10"><a href="rprog2.html#cb52-10"></a>daily_show &lt;-<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">.data =</span> daily_show, </span>
<span id="cb52-11"><a href="rprog2.html#cb52-11"></a>                     <span class="dt">job =</span> <span class="kw">str_to_lower</span>(job))</span>
<span id="cb52-12"><a href="rprog2.html#cb52-12"></a>daily_show &lt;-<span class="st"> </span><span class="kw">filter</span>(<span class="dt">.data =</span> daily_show, </span>
<span id="cb52-13"><a href="rprog2.html#cb52-13"></a>                     category <span class="op">==</span><span class="st"> &quot;Science&quot;</span>)</span></code></pre></div>
<p>Piping lets you streamline this process. It can be used with any function that
inputs a dataframe (or vector) as its first argument. The <code>%&gt;%</code> operator <em>pipes</em>
the object on the left-hand-side of the pipe (<code>%&gt;%</code>) into the function on the
right-hand-side (immediately after the pipe). With piping, therefore, all of the
data cleaning steps shown avove would look like:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="rprog2.html#cb53-1"></a>daily_show &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/daily_show_guests.csv&quot;</span>,</span>
<span id="cb53-2"><a href="rprog2.html#cb53-2"></a>                              <span class="dt">skip =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span></span>
<span id="cb53-3"><a href="rprog2.html#cb53-3"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">job =</span> GoogleKnowlege_Occupation,</span>
<span id="cb53-4"><a href="rprog2.html#cb53-4"></a>                <span class="dt">date =</span> Show,</span>
<span id="cb53-5"><a href="rprog2.html#cb53-5"></a>                <span class="dt">category =</span> Group,</span>
<span id="cb53-6"><a href="rprog2.html#cb53-6"></a>                <span class="dt">guest_name =</span> Raw_Guest_List) <span class="op">%&gt;%</span></span>
<span id="cb53-7"><a href="rprog2.html#cb53-7"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(<span class="op">-</span>YEAR) <span class="op">%&gt;%</span></span>
<span id="cb53-8"><a href="rprog2.html#cb53-8"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">job =</span> <span class="kw">str_to_lower</span>(job)) <span class="op">%&gt;%</span></span>
<span id="cb53-9"><a href="rprog2.html#cb53-9"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(category <span class="op">==</span><span class="st"> &quot;Science&quot;</span>)</span></code></pre></div>
<p>Notice that, when piping a data frame, the first argument (name of the data
frame) is excluded from all function calls that follow a pipe. This is because
piping sends the dataframe from the last step into each of the following
functions as the dataframe argument. Remember: Order matters in a data wrangling pipeline. For example, if you removea a column in an early line of code in the
pipeline but then reference that column name later, R will throw an error.
You can use selective highlighting to run one line at a time to see how the
dataframe changes in real-time as you move through successive pipes.</p>
<div class="rmdnote">
<p>
Piping with <code>%&gt;%</code> should only be used when you want to perform succesive data wrangling steps on a <strong>single object</strong>. Each pipe operation should be followed by a new line, as shown above. Creating a new line after each pipe step aids readability of the pipe, since each new action occurs on a new line of code. Also, if a single pipe function contains multiple arguments, consider putting each argument on a separate line, too (also shown in the code snippet above).
</p>
</div>
</div>
<div id="markdowns" class="section level2">
<h2><span class="header-section-number">3.7</span> Markdowns</h2>
<p>A <strong><em>markdown</em></strong> is a file format designed for the internet. Markdown files
allow you to enter plain text into a file, format that text, and embed
code/images/data into the file (everything you are reading in this coursebook
was written and created with markdown files).<br />
Markdown files are versatile because:</p>
<ul>
<li>Markdowns can be rendered into html, pdf, and doc files easily. Thus,
markdown files can be turned into websites, email messages, reports, blogs, textbooks, and other forms of media without worry;</li>
<li>Markdowns are independent of the operating system (Mac, PC, Linux, Android,
and iOS devices can read them);</li>
<li>Markdowns can be opened by almost any application (the file format is non-proprietary), so you don’t need to worry about having special software to
read them.<br />
</li>
<li>A markdown document provides an excellent template for
<em>reproducible research</em> - allowing you to communicate what you did, how and
why you did it, what you found, and any conclusions (or follow-on questions)
you can draw from the work.</li>
</ul>
<div id="r-markdowns" class="section level3">
<h3><span class="header-section-number">3.7.1</span> R Markdowns</h3>
<p>The R Studio IDE can create <strong><em>“R Markdowns”</em></strong> (file extension .Rmd)
specifically for the R programming environment. An R markdown file allows you
do lots of things; we will use them to create assignments and homework reports
that display R code, the outputs of that code, and plain text. To use the R
markdown format, you need to install the <code>rmarkdown</code> package: <code>install.packages("rmarkdown")</code>.</p>
<p><strong>Going forward, all of your homework and coding assignments will be created and submitted in the R Markdown format using either html or pdf outputs. This may seem uncomfortable at first but you will get accustomed to this format quickly.</strong></p>
<p>Each R markdown file contains three basic elements: header, text, and code chunks. I will explain each of these elements below, but I recommend a visit to the <a href="https://rmarkdown.rstudio.com/docs/articles/rmarkdown.html">R Markdown section</a> on the RStudio website. A detailed guide on many of the R markdown output styles (beyond just html and pdf files) is provided in <a href="https://bookdown.org/yihui/rmarkdown/">R Markdown: The Definitive Guide</a>.</p>
</div>
<div id="header" class="section level3">
<h3><span class="header-section-number">3.7.2</span> Header</h3>
<p>The R Markdown “header” section is where you specify details about the file being created. A markdown header contains <strong>YAML</strong> metadata, which stands for <a href="https://yaml.org/spec/1.2/spec.html#Introduction"><em>“YAML Ain’t Markup Language”</em></a>. The YAML (pronounced like “camel”) header is essentially a list of directives (referred to as “key:value” pairs) that help application software interpret the file. A YAML header can act simultaneously as a “configuration file”, a “log file”, and “translator file” - allowing one software program to read the output of another program. An example header with YAML metadata is shown below.</p>
<div class="figure" style="text-align: center"><span id="fig:YAML-1"></span>
<img src="images/YAML_1_anno.png" alt="Example of a YAML header to render an R Markdown into an html file." width="500" />
<p class="caption">
Figure 3.2: Example of a YAML header to render an R Markdown into an html file.
</p>
</div>
<p>The header is delineated at the top of the file by a section that begins and ends with three dashes, “—”. Within the header are YAML metadata representing key:value pairs. <strong>What are “key:value” pairs?</strong> The <strong>“key:”</strong> is a directive that you want to give to the file and the <strong>“value”</strong> represents the level of detail or information that you want to associate with that directive. Key:value pairs provide instructions on how the file should be read, interpreted, and output. In Figure <a href="rprog2.html#fig:YAML-1">3.2</a>, the keys are <em>“title:”</em>, <em>“author:”</em>, <em>“date:”</em>, and <em>“output:”</em> and the corresponding values are <em>“Markdowns”</em>, <em>“JV”</em>, <em>“7/23/2020”</em>, and <em>“html_document”</em>. You can learn more about key:value pairs in the R Markdown Style Guide for <a href="https://bookdown.org/yihui/rmarkdown/html-document.html">html</a> and <a href="https://bookdown.org/yihui/rmarkdown/pdf-document.html">pdf</a>.</p>
<div class="rmdnote">
<p>
The YAML header is optional in an R Markdown and default key:value pairs will be implemented if none are supplied. That said, I would encourage you to specify key directives like “author:”, “date:” and “output:” in your YAML headers.
</p>
</div>
<p>Sometimes, you will want to provide nested formatting directives in your markdown header. For example, you can specify the addition of a <strong><em>“table of contents”</em></strong> to your html output file that <strong><em>“floats”</em></strong> alongside the text. In that case, your YAML metadata would look like this:</p>
<div class="figure" style="text-align: center"><span id="fig:YAML-2"></span>
<img src="images/YAML_2_anno.png" alt="Example R Markdown header with nested YAML directives to render an html file with a floating table of contents." width="497" />
<p class="caption">
Figure 3.3: Example R Markdown header with nested YAML directives to render an html file with a floating table of contents.
</p>
</div>
<p>An important detail to remember with nested YAML metadata is that each nested command <strong>must be indented by 2 spaces</strong> to be interpreted properly.</p>
</div>
<div id="text" class="section level3">
<h3><span class="header-section-number">3.7.3</span> Text</h3>
<p>The default space within an R markdown is a plain text editor, similar to a normal word processing file. Formatting text is more tedious in markdown files (a small price to pay given their versatility). Some basic formatting operations are shown below.</p>
<table>
<thead>
<tr class="header">
<th align="center"><strong>Format Desired</strong></th>
<th align="center"><strong>Typeset in Markdown </strong></th>
<th align="center"><strong>Example Output</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Italics</td>
<td align="center">*one star on each side*</td>
<td align="center"><em>one star on each side</em></td>
</tr>
<tr class="even">
<td align="center">Bold</td>
<td align="center">**two stars on each side**</td>
<td align="center"><strong>two stars on each side</strong></td>
</tr>
<tr class="odd">
<td align="center">Superscript</td>
<td align="center">superscript^2^</td>
<td align="center">superscript<sup>2</sup></td>
</tr>
<tr class="even">
<td align="center">Subscript</td>
<td align="center">subscript~2~</td>
<td align="center">subscript<sub>2</sub></td>
</tr>
</tbody>
</table>
<p>To start a new paragraph in a markdown text section, end a line with two spaces (followed by a return).</p>
<p>To see a more complete set of formatting options see the <a href="https://github.com/rstudio/cheatsheets/raw/master/rmarkdown-2.0.pdf">R Markdown CheatSheet</a>
provided by RStudio.</p>
</div>
<div id="code-chunks" class="section level3">
<h3><span class="header-section-number">3.7.4</span> Code Chunks</h3>
<p>Code chunks are the places where you write and execute R code. A code chunk is initiated with 3 back ticks <code>```</code>, followed by a set of <em>braces</em> { }, or curly brackets, where you can name the chunk and specify <code>chunk options</code>. The chunk options tell the <code>knitr</code> package (the package that renders an R markdown into an output style) how you want that chunk to run and what to do with the output. A list of chunk options can be found <a href="https://yihui.org/knitr/options/">here</a>. An example markdown is shown below:</p>
<div class="figure" style="text-align: center"><span id="fig:markdown-1"></span>
<img src="images/markdown_anno.png" alt="Example R Markdown showing header, text, and code chunks." width="1000" />
<p class="caption">
Figure 3.4: Example R Markdown showing header, text, and code chunks.
</p>
</div>
<p>Once your markdown is complete, you can <em>render</em> it into an output file (e.g., html, pdf, doc, rtf) using the <code>knitr</code> package, which interprets your YAML header and “knits” the markdown sections into the desired format. Here is the same markdown rendered into an html document using the <code>knit</code> button.</p>
<div class="figure" style="text-align: center"><span id="fig:markdown-2"></span>
<img src="images/markdown_render.png" alt="Example R Markdown when &quot;rendered&quot; into an html document." width="700" />
<p class="caption">
Figure 3.5: Example R Markdown when “rendered” into an html document.
</p>
</div>
</div>
</div>
<div id="chapter-3-exercises" class="section level2">
<h2><span class="header-section-number">3.8</span> Chapter 3 Exercises</h2>
<p>The following sections includes exercises for each lecture regarding Chapter 3.
Rhetorical or group discussion questions are also included to help you think
about <em>why</em> we are making certain workflow recommendations and to get you in
the habit of doing these things regularly. Throughout, I included challenge
questions will require you to look outside of the lecture and coursebook. These
are optional and do not include answers within the coursebook, but give them a
shot. They cover concepts that are important to you as an independent R
programmer.</p>
<div id="set-1-pathnames-and-data-import" class="section level3">
<h3><span class="header-section-number">3.8.1</span> Set 1: Pathnames and data import</h3>
<ol start="0" style="list-style-type: decimal">
<li><p>Open your class R Project locally. Restart session, if your R Project is
already open. Create an R script (e.g., <code>ch-3-exercises.R</code>) and save it in the
<code>/code</code> folder.</p></li>
<li><p>In the RStudio Console, determine your current working directory. Make sure
the working directory is pointed to the location of <code>ch-3-exercises.R</code> within
your R Project. If it is not, navigate to Session &gt; Set Working Directory &gt; To
Source File Location. Again, check your current working directory to confirm.</p></li>
<li><p>Write “metadata” at the top of the R script using <code>#</code>, including your name,
today’s date, class, and chapter. Add a heading called “Pathnames and Data
Import”.</p></li>
<li><p>Download the Fort Collins ozone dataset locally and save the <code>.csv</code> file in
the <code>/data</code> folder in your R Project. What would be a better, more descriptive
name for the data file that also follows file-naming conventions (e.g., no
spaces, human- and machine-readable)? Change the file name locally. Commit the
additions to GitHub (e.g., “add ozone data file”, “create ch3 r script”) but
leave a queue of commits to push at the end of the class.</p></li>
<li><p>What is the absolute pathname of the ozone data file on your local computer?
Using <code>paste0()</code>, save your absolute pathname as an object called
<code>ozone_abs_path</code>. What is the relative pathname of the ozone data file on your
local computer? Using the appropriate function call from the <code>readr</code> package,
within the <code>package::function()</code> coding style, import the ozone data using the
<em>relative pathname</em> and assign it to a dataframe/tibble object called
<code>ozone_data</code>. Now, try importing the data using the <code>ozone_abs_path</code> object.
Commit this work. <em>What kind of problems would you encounter if you regularly used absolute pathnames in your R scripts in setting the working directory or importing/exporting files?</em></p></li>
<li><p>Rerun the line of code for data import with the relative pathname.
<em>What kind of message did R return in the console when you imported the data file? What information can you glean from this?</em>
In your R script, execute some of the suggested function calls (from previous
lectures and chapters) that provide similar information to “see” and explore
the dataframe/tibble object. Examine the output. Make a commit.</p></li>
<li><p>Push all queued commits to GitHub. PSA: Regularly follow this workflow of
small, regular commits and intermittent pushes in everything you do in R.</p></li>
</ol>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="rprog2.html#cb54-1"></a><span class="co"># 1. working directory</span></span>
<span id="cb54-2"><a href="rprog2.html#cb54-2"></a><span class="kw">getwd</span>()</span>
<span id="cb54-3"><a href="rprog2.html#cb54-3"></a></span>
<span id="cb54-4"><a href="rprog2.html#cb54-4"></a><span class="co"># 4. relative pathname </span></span>
<span id="cb54-5"><a href="rprog2.html#cb54-5"></a>ozone_data &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/ftc_o3.csv&quot;</span>)</span>
<span id="cb54-6"><a href="rprog2.html#cb54-6"></a></span>
<span id="cb54-7"><a href="rprog2.html#cb54-7"></a><span class="co"># 4. absolute pathname - for illustration - not recommended usually</span></span>
<span id="cb54-8"><a href="rprog2.html#cb54-8"></a>ozone_abs_path &lt;-<span class="st"> </span>base<span class="op">::</span><span class="kw">paste0</span>(<span class="st">&quot;~/Documents/R/edar_coursebook/data/ftc_o3.csv&quot;</span>)</span>
<span id="cb54-9"><a href="rprog2.html#cb54-9"></a>ozone_abs_ex &lt;-<span class="st"> </span>readr<span class="op">::</span><span class="kw">read_csv</span>(<span class="dt">file =</span> ozone_abs_path)</span>
<span id="cb54-10"><a href="rprog2.html#cb54-10"></a></span>
<span id="cb54-11"><a href="rprog2.html#cb54-11"></a><span class="co"># 5. possible functions for initial data view and check</span></span>
<span id="cb54-12"><a href="rprog2.html#cb54-12"></a>tibble<span class="op">::</span><span class="kw">glimpse</span>(ozone_data)</span>
<span id="cb54-13"><a href="rprog2.html#cb54-13"></a><span class="kw">head</span>(ozone_data)</span>
<span id="cb54-14"><a href="rprog2.html#cb54-14"></a><span class="kw">tail</span>(ozone_data)</span>
<span id="cb54-15"><a href="rprog2.html#cb54-15"></a><span class="kw">str</span>(ozone_data)</span>
<span id="cb54-16"><a href="rprog2.html#cb54-16"></a><span class="kw">summary</span>(ozone_data)</span>
<span id="cb54-17"><a href="rprog2.html#cb54-17"></a><span class="kw">dim</span>(ozone_data)</span>
<span id="cb54-18"><a href="rprog2.html#cb54-18"></a><span class="kw">nrow</span>(ozone_data)</span>
<span id="cb54-19"><a href="rprog2.html#cb54-19"></a><span class="kw">ncol</span>(ozone_data)</span>
<span id="cb54-20"><a href="rprog2.html#cb54-20"></a><span class="kw">length</span>(ozone_data)</span>
<span id="cb54-21"><a href="rprog2.html#cb54-21"></a><span class="kw">colnames</span>(ozone_data)</span>
<span id="cb54-22"><a href="rprog2.html#cb54-22"></a><span class="kw">class</span>(ozone_data<span class="op">$</span>[selected_colname]) <span class="co"># example structure; will not run</span></span></code></pre></div>
</div>
<div id="set-2-data-wrangling-and-piping" class="section level3">
<h3><span class="header-section-number">3.8.2</span> Set 2: Data wrangling and piping</h3>
<p><em>Note</em>: In the real world, you would not receive such a “tidy” data file as you
will use for the following exercises. You would normally need to clean up the
file structure, variables, and column names before anything else, typically
within a “pipe” of “verbs” from <code>dplyr</code>. Before you write any code, however,
you need to think about what kind of wrangling needs to be done for your data.
I recommend you <em>literally</em> sketch our your desired dataframe result. But, in
this case, don’t worry because we did that leg work for you; the ozone
data file is clean upon import. In the future, keep the handy function
<code>janitor::clean_names()</code> in mind to clean all variable names at once. Also,
peruse Hadley Wickham’s <a href="https://vita.had.co.nz/papers/tidy-data.pdf">paper</a> on
“tidy data” to understand what it is and how to make messy data tidy.</p>
<ol start="0" style="list-style-type: decimal">
<li><p>Open your class R Project locally. Restart session, if R Project is already
open. Open R script you used for the first set of exercises. Rerun the code to
populate your environment, i.e., load and view the data.</p></li>
<li><p>Using <code>dplyr::select()</code> and the pipe (<code>%&gt;%</code>), select the
<code>sample_measurement</code>, <code>units_of_measure</code>, and <code>datetime</code> and assign the
resulting dataframe/tibble to an object called <code>ozone_hourly</code>. Remember to load
(and install, if needed) the related R packages! <em>What are some of the R packages that contain the pipe? There are many, and you have been introduced to at least one.</em></p></li>
<li><p>Examine the <code>ozone_hourly</code> dataframe. Do you notice anything strange about
the <code>sample_measurement</code> values? If not, try to find the range, minimum, or
maximum of those values. You can’t—there are <code>NA</code> values. Add a line to your
<code>ozone_hourly</code> pipe in the previous question that removes the missing
observations, using <code>drop_na()</code> from the <code>tidyr</code> package. <em>Note</em>: There are
base R alternatives for removing missing observations, but, for the sake of
continuity within your pipe, try to use <code>drop_na()</code>. Remember, not all
functions require formal arguments.</p></li>
<li><p>How many observations do you lose due to missingness? Obtain a six-number
summary of the <code>sample_measurement</code> vector. What is the minimum value? Maximum?
How do these compare to the median and mean?</p></li>
<li><p>Using another <code>dplyr</code> verb but no pipe, determine how many times the ozone
measurement was above 0.07. Now, re-write the code on a new line using a pipe.
Save the output of one of these approaches to a new <code>df</code>, following naming
conventions.</p></li>
<li><p>Overwriting the <code>ozone_hourly</code> dataframe and using a different <code>dplyr</code> verb within a pipe, create a new column (<code>ozone_ppb</code>) by multiplying the “parts-per-million” values from <code>sample_measurement</code> by 1000.</p></li>
<li><p><strong>Challenge</strong>: Generate a histogram of <code>sample_measurement</code>.</p></li>
</ol>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="rprog2.html#cb55-1"></a><span class="co"># 0. set-up</span></span>
<span id="cb55-2"><a href="rprog2.html#cb55-2"></a><span class="co">## rerun code from the first set of exercises</span></span>
<span id="cb55-3"><a href="rprog2.html#cb55-3"></a></span>
<span id="cb55-4"><a href="rprog2.html#cb55-4"></a><span class="co"># 1. select variables and create new df</span></span>
<span id="cb55-5"><a href="rprog2.html#cb55-5"></a><span class="kw">library</span>(magrittr) <span class="co"># original R package for pipe %&gt;%</span></span>
<span id="cb55-6"><a href="rprog2.html#cb55-6"></a><span class="kw">library</span>(dplyr) <span class="co"># for verbs; also contains pipe</span></span>
<span id="cb55-7"><a href="rprog2.html#cb55-7"></a>ozone_hourly &lt;-<span class="st"> </span>ozone_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-8"><a href="rprog2.html#cb55-8"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(sample_measurement,</span>
<span id="cb55-9"><a href="rprog2.html#cb55-9"></a>                datetime) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-10"><a href="rprog2.html#cb55-10"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">drop_na</span>() </span>
<span id="cb55-11"><a href="rprog2.html#cb55-11"></a></span>
<span id="cb55-12"><a href="rprog2.html#cb55-12"></a><span class="co"># 2. check df</span></span>
<span id="cb55-13"><a href="rprog2.html#cb55-13"></a><span class="co">## see example code from first set for possible initial viewing functions</span></span>
<span id="cb55-14"><a href="rprog2.html#cb55-14"></a><span class="kw">range</span>(ozone_hourly<span class="op">$</span>sample_measurement)</span>
<span id="cb55-15"><a href="rprog2.html#cb55-15"></a><span class="kw">min</span>(ozone_hourly<span class="op">$</span>sample_measurement)</span>
<span id="cb55-16"><a href="rprog2.html#cb55-16"></a><span class="kw">max</span>(ozone_hourly<span class="op">$</span>sample_measurement)</span>
<span id="cb55-17"><a href="rprog2.html#cb55-17"></a><span class="co"># manage missingness</span></span>
<span id="cb55-18"><a href="rprog2.html#cb55-18"></a>ozone_hourly &lt;-<span class="st"> </span>ozone_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-19"><a href="rprog2.html#cb55-19"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(sample_measurement,</span>
<span id="cb55-20"><a href="rprog2.html#cb55-20"></a>                datetime) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-21"><a href="rprog2.html#cb55-21"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">drop_na</span>() </span>
<span id="cb55-22"><a href="rprog2.html#cb55-22"></a></span>
<span id="cb55-23"><a href="rprog2.html#cb55-23"></a><span class="co"># 3. missingness and summary</span></span>
<span id="cb55-24"><a href="rprog2.html#cb55-24"></a><span class="co">## 606 observations were lost due to missingness</span></span>
<span id="cb55-25"><a href="rprog2.html#cb55-25"></a><span class="kw">summary</span>(ozone_hourly<span class="op">$</span>sample_measurement)</span>
<span id="cb55-26"><a href="rprog2.html#cb55-26"></a></span>
<span id="cb55-27"><a href="rprog2.html#cb55-27"></a><span class="co"># 4. filter ozone level</span></span>
<span id="cb55-28"><a href="rprog2.html#cb55-28"></a><span class="co">## without pipe</span></span>
<span id="cb55-29"><a href="rprog2.html#cb55-29"></a>dplyr<span class="op">::</span><span class="kw">filter</span>(<span class="dt">.data =</span> ozone_data,</span>
<span id="cb55-30"><a href="rprog2.html#cb55-30"></a>              sample_measurement <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.070</span>)</span>
<span id="cb55-31"><a href="rprog2.html#cb55-31"></a><span class="co">## with pipe</span></span>
<span id="cb55-32"><a href="rprog2.html#cb55-32"></a>ozone_hourly <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-33"><a href="rprog2.html#cb55-33"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(sample_measurement <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.070</span>)</span>
<span id="cb55-34"><a href="rprog2.html#cb55-34"></a><span class="co">## save output from one of the above approaches</span></span>
<span id="cb55-35"><a href="rprog2.html#cb55-35"></a>high_ozone &lt;-<span class="st"> </span>ozone_hourly <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-36"><a href="rprog2.html#cb55-36"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(sample_measurement <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.070</span>)</span>
<span id="cb55-37"><a href="rprog2.html#cb55-37"></a></span>
<span id="cb55-38"><a href="rprog2.html#cb55-38"></a><span class="co"># create new column </span></span>
<span id="cb55-39"><a href="rprog2.html#cb55-39"></a>ozone_hourly &lt;-<span class="st"> </span>ozone_hourly <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb55-40"><a href="rprog2.html#cb55-40"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">ozone_ppb =</span> sample_measurement<span class="op">*</span><span class="dv">1000</span>)</span></code></pre></div>
</div>
<div id="set-3-r-markdown" class="section level3">
<h3><span class="header-section-number">3.8.3</span> Set 3: R Markdown</h3>
<ol start="0" style="list-style-type: decimal">
<li><p>Open your class R Project locally. Restart session, if R Project is already
open.</p></li>
<li><p>Create a new R Markdown file (<code>.Rmd</code>) in RStudio IDE (File &gt; New File &gt; R
Markdown) and pick a title (of document, not file) such as “Chapter 3
Exercises”. Name the file (“ch-3-exercises.Rmd”) and save it to your local R
Project in <code>/code</code>.</p></li>
<li><p>In the RStudio Console, determine your current working directory. Make sure
the working directory is pointed to the location of <code>.Rmd</code> within your R
Project. If it is not, navigate to Session &gt; Set Working Directory &gt; To Source
File Location. Again, check your current working directory to confirm.</p></li>
<li><p>Knit the sample R Markdown to HTML and/or PDF (if you installed LaTex).</p></li>
<li><p>Commit and push the sample R Markdown and its knitted counterpart to your
repository on GitHub with a short, informative commit message such as “test
knit rmd template”.</p></li>
<li><p>Delete the sample content from the R Markdown file (line 8 and beyond) and
recommit the change (e.g., “delete rmd template contents”).</p></li>
<li><p>Below the YAML ( <em>where does the YAML end, and what tells you that?</em> ), copy
your code from the R script you used for the prior sets of exercises into the R
Markdown file. Organize this code into relevant headings and within
thematically appropriate code chunks. For example, the code for data import
would be in its own code chunk.</p></li>
<li><p>Add first- , second-, and third-order headings (e.g., “Data Import”, “Using
Relative Pathname”, "Using Absolute Pathname), using the appropriate Markdown
symbol. <em>What does this symbol also do (to a completely different effect) within R scripts or inside R Markdown code chunks?</em></p></li>
<li><p>Knit this document to HTML and/or PDF and examine how R Markdown returns
output.</p></li>
</ol>
<div id="challenge-questions" class="section level4">
<h4><span class="header-section-number">3.8.3.1</span> Challenge Questions</h4>
<ol style="list-style-type: decimal">
<li><p>Change the date to a YYYY-MM-DD format within the R Markdown YAML such that
it changes <em>every time</em> you re-knit the document on a different day.</p></li>
<li><p>Implement a change to the code chunk <em>itself</em> that suppresses the message
returned upon data import.</p></li>
<li><p>Create a global chunk option below the YAML, telling the R Markdown file (a)
where to automatically save figures within your R Project directory using a
short, relative pathname and (b) to suppress warnings and messages when
knitting. What are some other things you can do in a global options code chunk?
Compare these to what can be done in an individual code chunk.</p></li>
</ol>
</div>
</div>
</div>
<div id="chapter-3-homework" class="section level2">
<h2><span class="header-section-number">3.9</span> Chapter 3 Homework</h2>
<p>You will continue to explore and manipulate data on ozone measurements in Fort
Collins, CO during January 2019.</p>
<p>On Canvas, download the ozone data (.csv) and R Markdown template (.Rmd),
which includes a description of the data, the homework questions, and the
general framework of code-figure-text integration, including the framework for
a code appendix. Save the data and template files in your local R Project in
the <code>/data</code> and <code>/homework</code> folders, respectively.</p>
<p>Remember to check and set your working directory (e.g., Session &gt; Set Working
Directory &gt; To Source File Location) to point from the R Markdown
file and detect the data file in <code>/data</code> and also points to <code>/figs</code> as the
place to save figures and images, which is determined in the R Markdown global
option chunk I include in the R Markdown template.</p>
<p>This homework assignment is due at the start of the class when we begin Chapter
4. We will look for the R Markdown file and the corresponding knitted PDF or
HTML document within your <code>/homework</code> file. Remember, make regular, memorable
commits, so you never lose your work. Your work will be considered late if the
latest knit occurs after the deadline.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rprog1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="dataviz.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
