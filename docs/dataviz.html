<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Visualization with ggplot2 | Engineering Data Analysis in R</title>
  <meta name="description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Visualization with ggplot2 | Engineering Data Analysis in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Visualization with ggplot2 | Engineering Data Analysis in R" />
  
  <meta name="twitter:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

<meta name="author" content="John Volckens" />


<meta name="date" content="2024-11-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rprog2.html"/>
<link rel="next" href="eda1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Data Analysis in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#grading"><i class="fa fa-check"></i><b>1.3</b> Grading</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#grading-for-mech-476"><i class="fa fa-check"></i><b>1.3.1</b> Grading for MECH 476</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#homework-submission"><i class="fa fa-check"></i><b>1.3.2</b> Homework submission</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-set-up"><i class="fa fa-check"></i><b>1.4</b> Course set-up</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.4.1</b> Install R and RStudio</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#install-git-and-create-a-github-account"><i class="fa fa-check"></i><b>1.4.2</b> Install Git and create a GitHub account</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#connect-git-github-and-rstudio"><i class="fa fa-check"></i><b>1.4.3</b> Connect Git, GitHub, and RStudio</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#create-new-project-github-first"><i class="fa fa-check"></i><b>1.4.4</b> Create new project, GitHub first</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#use-rstudiogithub-system-for-homework-submission"><i class="fa fa-check"></i><b>1.4.5</b> Use RStudio/GitHub system for homework submission</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#confirm-successful-set-up"><i class="fa fa-check"></i><b>1.4.6</b> Confirm successful set-up</a></li>
<li class="chapter" data-level="1.4.7" data-path="index.html"><a href="index.html#asking-for-help-properly"><i class="fa fa-check"></i><b>1.4.7</b> Asking for help (properly)</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#coursebook"><i class="fa fa-check"></i><b>1.5</b> Coursebook</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>1.5.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rprog1.html"><a href="rprog1.html"><i class="fa fa-check"></i><b>2</b> The R Programming Environment</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rprog1.html"><a href="rprog1.html#ch.-2-objectives"><i class="fa fa-check"></i><b>2.1</b> Ch. 2 Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="rprog1.html"><a href="rprog1.html#r-and-r-studio"><i class="fa fa-check"></i><b>2.2</b> R and R Studio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rprog1.html"><a href="rprog1.html#what-is-r"><i class="fa fa-check"></i><b>2.2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2.2" data-path="rprog1.html"><a href="rprog1.html#free-and-open-source-software"><i class="fa fa-check"></i><b>2.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="2.2.3" data-path="rprog1.html"><a href="rprog1.html#what-is-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rprog1.html"><a href="rprog1.html#communicating-with-r"><i class="fa fa-check"></i><b>2.3</b> Communicating with R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="rprog1.html"><a href="rprog1.html#r-sessions-console-and-command-prompt"><i class="fa fa-check"></i><b>2.3.1</b> R sessions, console, and command prompt</a></li>
<li class="chapter" data-level="2.3.2" data-path="rprog1.html"><a href="rprog1.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>2.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="rprog1.html"><a href="rprog1.html#r-scripts"><i class="fa fa-check"></i><b>2.4</b> R scripts</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rprog1.html"><a href="rprog1.html#commenting-code"><i class="fa fa-check"></i><b>2.4.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rprog1.html"><a href="rprog1.html#the-package-system"><i class="fa fa-check"></i><b>2.5</b> The “package” system</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="rprog1.html"><a href="rprog1.html#r-packages"><i class="fa fa-check"></i><b>2.5.1</b> R packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="rprog1.html"><a href="rprog1.html#installing-from-cran"><i class="fa fa-check"></i><b>2.5.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="2.5.3" data-path="rprog1.html"><a href="rprog1.html#loading-an-installed-package"><i class="fa fa-check"></i><b>2.5.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rprog1.html"><a href="rprog1.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>2.6</b> R’s most basic object types</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="rprog1.html"><a href="rprog1.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="rprog1.html"><a href="rprog1.html#dataframes"><i class="fa fa-check"></i><b>2.6.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="rprog1.html"><a href="rprog1.html#chapter-2-exercises"><i class="fa fa-check"></i><b>2.7</b> Chapter 2 Exercises</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="rprog1.html"><a href="rprog1.html#set-1-session-helpfiles-scripts-and-objects"><i class="fa fa-check"></i><b>2.7.1</b> Set 1: Session, helpfiles, scripts, and objects</a></li>
<li class="chapter" data-level="2.7.2" data-path="rprog1.html"><a href="rprog1.html#set-2-loading-and-using-packages"><i class="fa fa-check"></i><b>2.7.2</b> Set 2: Loading and using packages</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="rprog1.html"><a href="rprog1.html#chapter-2-homework"><i class="fa fa-check"></i><b>2.8</b> Chapter 2 Homework</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="rprog1.html"><a href="rprog1.html#special-swirl-commands"><i class="fa fa-check"></i><b>2.8.1</b> Special <code>swirl</code> commands</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rprog2.html"><a href="rprog2.html"><i class="fa fa-check"></i><b>3</b> Getting and Cleaning Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rprog2.html"><a href="rprog2.html#ch.-3-objectives"><i class="fa fa-check"></i><b>3.1</b> Ch. 3 Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rprog2.html"><a href="rprog2.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="rprog2.html"><a href="rprog2.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.3</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="rprog2.html"><a href="rprog2.html#reading-local-flat-files"><i class="fa fa-check"></i><b>3.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="3.3.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>3.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rprog2.html"><a href="rprog2.html#directories-and-pathnames"><i class="fa fa-check"></i><b>3.4</b> Directories and pathnames</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="rprog2.html"><a href="rprog2.html#directory-structure"><i class="fa fa-check"></i><b>3.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="3.4.2" data-path="rprog2.html"><a href="rprog2.html#working-directory"><i class="fa fa-check"></i><b>3.4.2</b> Working directory</a></li>
<li class="chapter" data-level="3.4.3" data-path="rprog2.html"><a href="rprog2.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>3.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="3.4.4" data-path="rprog2.html"><a href="rprog2.html#tangent-paste"><i class="fa fa-check"></i><b>3.4.4</b> Tangent: <code>paste</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="rprog2.html"><a href="rprog2.html#reading-online-flat-files"><i class="fa fa-check"></i><b>3.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rprog2.html"><a href="rprog2.html#data-cleaning"><i class="fa fa-check"></i><b>3.5</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="rprog2.html"><a href="rprog2.html#renaming-columns"><i class="fa fa-check"></i><b>3.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="3.5.2" data-path="rprog2.html"><a href="rprog2.html#selecting-columns"><i class="fa fa-check"></i><b>3.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="3.5.3" data-path="rprog2.html"><a href="rprog2.html#add-or-change-columns"><i class="fa fa-check"></i><b>3.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="3.5.4" data-path="rprog2.html"><a href="rprog2.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>3.5.4</b> Filtering to certain rows</a></li>
<li class="chapter" data-level="3.5.5" data-path="rprog2.html"><a href="rprog2.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>3.5.5</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rprog2.html"><a href="rprog2.html#merging-data-frames"><i class="fa fa-check"></i><b>3.6</b> Merging Data Frames</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="rprog2.html"><a href="rprog2.html#row-binding"><i class="fa fa-check"></i><b>3.6.1</b> Row Binding</a></li>
<li class="chapter" data-level="3.6.2" data-path="rprog2.html"><a href="rprog2.html#column-binding-_join"><i class="fa fa-check"></i><b>3.6.2</b> Column Binding (_join)</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rprog2.html"><a href="rprog2.html#piping"><i class="fa fa-check"></i><b>3.7</b> Piping</a></li>
<li class="chapter" data-level="3.8" data-path="rprog2.html"><a href="rprog2.html#markdowns"><i class="fa fa-check"></i><b>3.8</b> Markdowns</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="rprog2.html"><a href="rprog2.html#r-markdowns"><i class="fa fa-check"></i><b>3.8.1</b> R Markdowns</a></li>
<li class="chapter" data-level="3.8.2" data-path="rprog2.html"><a href="rprog2.html#header"><i class="fa fa-check"></i><b>3.8.2</b> Header</a></li>
<li class="chapter" data-level="3.8.3" data-path="rprog2.html"><a href="rprog2.html#text"><i class="fa fa-check"></i><b>3.8.3</b> Text</a></li>
<li class="chapter" data-level="3.8.4" data-path="rprog2.html"><a href="rprog2.html#code-chunks"><i class="fa fa-check"></i><b>3.8.4</b> Code Chunks</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="rprog2.html"><a href="rprog2.html#chapter-3-exercises"><i class="fa fa-check"></i><b>3.9</b> Chapter 3 Exercises</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="rprog2.html"><a href="rprog2.html#set-1-pathnames-and-data-import"><i class="fa fa-check"></i><b>3.9.1</b> Set 1: Pathnames and data import</a></li>
<li class="chapter" data-level="3.9.2" data-path="rprog2.html"><a href="rprog2.html#set-2-data-wrangling-and-piping"><i class="fa fa-check"></i><b>3.9.2</b> Set 2: Data wrangling and piping</a></li>
<li class="chapter" data-level="3.9.3" data-path="rprog2.html"><a href="rprog2.html#set-3-r-markdown"><i class="fa fa-check"></i><b>3.9.3</b> Set 3: R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="rprog2.html"><a href="rprog2.html#chapter-3-homework"><i class="fa fa-check"></i><b>3.10</b> Chapter 3 Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>4</b> Data Visualization with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="dataviz.html"><a href="dataviz.html#chapter-4-objectives"><i class="fa fa-check"></i><b>4.1</b> Chapter 4 Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dataviz.html"><a href="dataviz.html#install-and-load-ggplot2"><i class="fa fa-check"></i><b>4.2</b> Install and load <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.3" data-path="dataviz.html"><a href="dataviz.html#steps-to-create-a-ggplot2-object"><i class="fa fa-check"></i><b>4.3</b> Steps to create a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.4" data-path="dataviz.html"><a href="dataviz.html#initializing-a-ggplot2-object"><i class="fa fa-check"></i><b>4.4</b> Initializing a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.5" data-path="dataviz.html"><a href="dataviz.html#plot-aesthetics"><i class="fa fa-check"></i><b>4.5</b> Plot aesthetics</a></li>
<li class="chapter" data-level="4.6" data-path="dataviz.html"><a href="dataviz.html#adding-geoms"><i class="fa fa-check"></i><b>4.6</b> Adding geoms</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="dataviz.html"><a href="dataviz.html#aesthetic-override-a-warning"><i class="fa fa-check"></i><b>4.6.1</b> Aesthetic override: a warning</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="dataviz.html"><a href="dataviz.html#shapes-and-colors"><i class="fa fa-check"></i><b>4.7</b> Shapes and colors</a></li>
<li class="chapter" data-level="4.8" data-path="dataviz.html"><a href="dataviz.html#scales-useful-plot-edits"><i class="fa fa-check"></i><b>4.8</b> Scales: useful plot edits</a></li>
<li class="chapter" data-level="4.9" data-path="dataviz.html"><a href="dataviz.html#ggplot2-example-1"><i class="fa fa-check"></i><b>4.9</b> <code>ggplot2</code> example 1</a></li>
<li class="chapter" data-level="4.10" data-path="dataviz.html"><a href="dataviz.html#ggplot2-example-2"><i class="fa fa-check"></i><b>4.10</b> <code>ggplot2</code> example 2</a></li>
<li class="chapter" data-level="4.11" data-path="dataviz.html"><a href="dataviz.html#store-and-save-ggplot2-objects"><i class="fa fa-check"></i><b>4.11</b> Store and save <code>ggplot2</code> objects</a></li>
<li class="chapter" data-level="4.12" data-path="dataviz.html"><a href="dataviz.html#getting-help-with-ggplot2"><i class="fa fa-check"></i><b>4.12</b> Getting help with <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.13" data-path="dataviz.html"><a href="dataviz.html#chapter-4-homework"><i class="fa fa-check"></i><b>4.13</b> Chapter 4 Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="eda1.html"><a href="eda1.html"><i class="fa fa-check"></i><b>5</b> Univariate Data Exploration</a>
<ul>
<li class="chapter" data-level="5.1" data-path="eda1.html"><a href="eda1.html#ch.-5-objectives"><i class="fa fa-check"></i><b>5.1</b> Ch. 5 Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="eda1.html"><a href="eda1.html#univar"><i class="fa fa-check"></i><b>5.2</b> Univariate Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="eda1.html"><a href="eda1.html#location-dispersion-and-shape"><i class="fa fa-check"></i><b>5.2.1</b> Location, Dispersion, and Shape</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="eda1.html"><a href="eda1.html#quantile"><i class="fa fa-check"></i><b>5.3</b> Quantiles</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="eda1.html"><a href="eda1.html#descriptive-statistics"><i class="fa fa-check"></i><b>5.3.1</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="eda1.html"><a href="eda1.html#univariate-data-visualization"><i class="fa fa-check"></i><b>5.4</b> Univariate Data Visualization</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="eda1.html"><a href="eda1.html#summary-vs.-enumerative-plots"><i class="fa fa-check"></i><b>5.4.1</b> Summary vs. Enumerative Plots</a></li>
<li class="chapter" data-level="5.4.2" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot"><i class="fa fa-check"></i><b>5.4.2</b> Cumulative Distribution Plot</a></li>
<li class="chapter" data-level="5.4.3" data-path="eda1.html"><a href="eda1.html#hist"><i class="fa fa-check"></i><b>5.4.3</b> Histogram</a></li>
<li class="chapter" data-level="5.4.4" data-path="eda1.html"><a href="eda1.html#box"><i class="fa fa-check"></i><b>5.4.4</b> Boxplot</a></li>
<li class="chapter" data-level="5.4.5" data-path="eda1.html"><a href="eda1.html#time_series"><i class="fa fa-check"></i><b>5.4.5</b> Time-Series Plot</a></li>
<li class="chapter" data-level="5.4.6" data-path="eda1.html"><a href="eda1.html#autocorr"><i class="fa fa-check"></i><b>5.4.6</b> Autocorrelation Plot</a></li>
<li class="chapter" data-level="5.4.7" data-path="eda1.html"><a href="eda1.html#partial-autocorrelation-plot"><i class="fa fa-check"></i><b>5.4.7</b> Partial Autocorrelation Plot</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="eda1.html"><a href="eda1.html#exploring-data"><i class="fa fa-check"></i><b>5.5</b> Exploring Data</a></li>
<li class="chapter" data-level="5.6" data-path="eda1.html"><a href="eda1.html#chapter-5-homework"><i class="fa fa-check"></i><b>5.6</b> Chapter 5 Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rprog3.html"><a href="rprog3.html"><i class="fa fa-check"></i><b>6</b> Strings, Dates, and Tidying</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rprog3.html"><a href="rprog3.html#chapter-6-objectives"><i class="fa fa-check"></i><b>6.1</b> Chapter 6 Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="rprog3.html"><a href="rprog3.html#strings"><i class="fa fa-check"></i><b>6.2</b> Strings</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="rprog3.html"><a href="rprog3.html#string-detect-match-subset"><i class="fa fa-check"></i><b>6.2.1</b> String detect, match, subset</a></li>
<li class="chapter" data-level="6.2.2" data-path="rprog3.html"><a href="rprog3.html#regular-expressions"><i class="fa fa-check"></i><b>6.2.2</b> Regular Expressions</a></li>
<li class="chapter" data-level="6.2.3" data-path="rprog3.html"><a href="rprog3.html#string-split-replace"><i class="fa fa-check"></i><b>6.2.3</b> String split, replace</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rprog3.html"><a href="rprog3.html#dates-and-date-times"><i class="fa fa-check"></i><b>6.3</b> Dates and Date-times</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="rprog3.html"><a href="rprog3.html#dates-and-times-in-base-r"><i class="fa fa-check"></i><b>6.3.1</b> Dates and Times in base R</a></li>
<li class="chapter" data-level="6.3.2" data-path="rprog3.html"><a href="rprog3.html#date-time-formats"><i class="fa fa-check"></i><b>6.3.2</b> Date-time formats</a></li>
<li class="chapter" data-level="6.3.3" data-path="rprog3.html"><a href="rprog3.html#date-time-classes-in-r"><i class="fa fa-check"></i><b>6.3.3</b> Date-time classes in R</a></li>
<li class="chapter" data-level="6.3.4" data-path="rprog3.html"><a href="rprog3.html#reading-and-classifying-date-times"><i class="fa fa-check"></i><b>6.3.4</b> Reading and classifying date-times</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="rprog3.html"><a href="rprog3.html#lubridate"><i class="fa fa-check"></i><b>6.4</b> <code>lubridate</code></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="rprog3.html"><a href="rprog3.html#parsing-functions-in-lubridate"><i class="fa fa-check"></i><b>6.4.1</b> Parsing functions in <code>lubridate</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="rprog3.html"><a href="rprog3.html#date-time-manipulation-with-lubridate"><i class="fa fa-check"></i><b>6.4.2</b> Date-time manipulation with <code>lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="rprog3.html"><a href="rprog3.html#tidy-data"><i class="fa fa-check"></i><b>6.5</b> Tidy Data</a></li>
<li class="chapter" data-level="6.6" data-path="rprog3.html"><a href="rprog3.html#chapter-6-exercises"><i class="fa fa-check"></i><b>6.6</b> Chapter 6 Exercises</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="rprog3.html"><a href="rprog3.html#set-1-data-import-and-manipulation"><i class="fa fa-check"></i><b>6.6.1</b> Set 1: Data import and manipulation</a></li>
<li class="chapter" data-level="6.6.2" data-path="rprog3.html"><a href="rprog3.html#set-2-counting"><i class="fa fa-check"></i><b>6.6.2</b> Set 2: Counting</a></li>
<li class="chapter" data-level="6.6.3" data-path="rprog3.html"><a href="rprog3.html#set-3-weekly-tweets"><i class="fa fa-check"></i><b>6.6.3</b> Set 3: Weekly tweets</a></li>
<li class="chapter" data-level="6.6.4" data-path="rprog3.html"><a href="rprog3.html#are-tweets-correlated-in-time"><i class="fa fa-check"></i><b>6.6.4</b> Are tweets correlated in time?</a></li>
<li class="chapter" data-level="6.6.5" data-path="rprog3.html"><a href="rprog3.html#set-4-csu-vs.-cu"><i class="fa fa-check"></i><b>6.6.5</b> Set 4: CSU vs. CU</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="rprog3.html"><a href="rprog3.html#chapter-6-homework"><i class="fa fa-check"></i><b>6.7</b> Chapter 6 Homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="eda2.html"><a href="eda2.html"><i class="fa fa-check"></i><b>7</b> Multivariate Data Exploration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="eda2.html"><a href="eda2.html#chapter-7-objectives"><i class="fa fa-check"></i><b>7.1</b> Chapter 7 Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="eda2.html"><a href="eda2.html#bivariate"><i class="fa fa-check"></i><b>7.2</b> Bivariate Data</a></li>
<li class="chapter" data-level="7.3" data-path="eda2.html"><a href="eda2.html#scatt"><i class="fa fa-check"></i><b>7.3</b> Scatterplot</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="eda2.html"><a href="eda2.html#causality"><i class="fa fa-check"></i><b>7.3.1</b> Causality</a></li>
<li class="chapter" data-level="7.3.2" data-path="eda2.html"><a href="eda2.html#corr"><i class="fa fa-check"></i><b>7.3.2</b> Correlation</a></li>
<li class="chapter" data-level="7.3.3" data-path="eda2.html"><a href="eda2.html#correlation-neq-causation"><i class="fa fa-check"></i><b>7.3.3</b> Correlation <span class="math inline">\(\neq\)</span> causation</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="eda2.html"><a href="eda2.html#exploring-multivariate-data"><i class="fa fa-check"></i><b>7.4</b> Exploring Multivariate Data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="eda2.html"><a href="eda2.html#facets"><i class="fa fa-check"></i><b>7.4.1</b> Facets</a></li>
<li class="chapter" data-level="7.4.2" data-path="eda2.html"><a href="eda2.html#colors"><i class="fa fa-check"></i><b>7.4.2</b> Colors</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="eda2.html"><a href="eda2.html#chapter-7-exercises"><i class="fa fa-check"></i><b>7.5</b> Chapter 7 Exercises</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="eda2.html"><a href="eda2.html#fuel-economy-data"><i class="fa fa-check"></i><b>7.5.1</b> Fuel economy data</a></li>
<li class="chapter" data-level="7.5.2" data-path="eda2.html"><a href="eda2.html#import-and-wrangle-data"><i class="fa fa-check"></i><b>7.5.2</b> Import and wrangle data</a></li>
<li class="chapter" data-level="7.5.3" data-path="eda2.html"><a href="eda2.html#check-data"><i class="fa fa-check"></i><b>7.5.3</b> Check data</a></li>
<li class="chapter" data-level="7.5.4" data-path="eda2.html"><a href="eda2.html#check-for-missing-data"><i class="fa fa-check"></i><b>7.5.4</b> Check for missing data</a></li>
<li class="chapter" data-level="7.5.5" data-path="eda2.html"><a href="eda2.html#visualize-data"><i class="fa fa-check"></i><b>7.5.5</b> Visualize data</a></li>
<li class="chapter" data-level="7.5.6" data-path="eda2.html"><a href="eda2.html#multivariate-time-series"><i class="fa fa-check"></i><b>7.5.6</b> Multivariate time series</a></li>
<li class="chapter" data-level="7.5.7" data-path="eda2.html"><a href="eda2.html#density-plots"><i class="fa fa-check"></i><b>7.5.7</b> Density plots</a></li>
<li class="chapter" data-level="7.5.8" data-path="eda2.html"><a href="eda2.html#more-multivariate-plotting"><i class="fa fa-check"></i><b>7.5.8</b> More multivariate plotting</a></li>
<li class="chapter" data-level="7.5.9" data-path="eda2.html"><a href="eda2.html#practice-questions"><i class="fa fa-check"></i><b>7.5.9</b> Practice questions</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="eda2.html"><a href="eda2.html#chapter-7-homework"><i class="fa fa-check"></i><b>7.6</b> Chapter 7 Homework</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rprog4.html"><a href="rprog4.html"><i class="fa fa-check"></i><b>8</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="8.1" data-path="rprog4.html"><a href="rprog4.html#ch.-8-objectives"><i class="fa fa-check"></i><b>8.1</b> Ch. 8 Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="rprog4.html"><a href="rprog4.html#what-is-functional-programming"><i class="fa fa-check"></i><b>8.2</b> What is <strong><em>functional programming</em></strong>?</a></li>
<li class="chapter" data-level="8.3" data-path="rprog4.html"><a href="rprog4.html#writng-functions"><i class="fa fa-check"></i><b>8.3</b> Writng Functions</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="rprog4.html"><a href="rprog4.html#example-function-my_mean"><i class="fa fa-check"></i><b>8.3.1</b> Example Function: my_mean</a></li>
<li class="chapter" data-level="8.3.2" data-path="rprog4.html"><a href="rprog4.html#example-function-import.w.name"><i class="fa fa-check"></i><b>8.3.2</b> Example Function: “import.w.name”</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="rprog4.html"><a href="rprog4.html#the-purrr-package"><i class="fa fa-check"></i><b>8.4</b> The <code>purrr::</code> package</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="rprog4.html"><a href="rprog4.html#function-mapping"><i class="fa fa-check"></i><b>8.4.1</b> Function Mapping</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="rprog4.html"><a href="rprog4.html#applying-functions-to-multiple-columns-dplyracross"><i class="fa fa-check"></i><b>8.5</b> Applying functions to multiple columns: <code>dplyr::across()</code></a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="rprog4.html"><a href="rprog4.html#using-tidy-select-syntax-to-select-columns"><i class="fa fa-check"></i><b>8.5.1</b> Using <code>&lt;tidy-select&gt;</code> syntax to select columns</a></li>
<li class="chapter" data-level="8.5.2" data-path="rprog4.html"><a href="rprog4.html#examples-dplyracross"><i class="fa fa-check"></i><b>8.5.2</b> Examples <code>dplyr::across()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="rprog4.html"><a href="rprog4.html#homework"><i class="fa fa-check"></i><b>8.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>9</b> Transformations and Other Tricks</a>
<ul>
<li class="chapter" data-level="9.1" data-path="transform.html"><a href="transform.html#ch.-9-objectives"><i class="fa fa-check"></i><b>9.1</b> Ch. 9 Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="transform.html"><a href="transform.html#transformation"><i class="fa fa-check"></i><b>9.2</b> Transformation</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="transform.html"><a href="transform.html#centering"><i class="fa fa-check"></i><b>9.2.1</b> Centering</a></li>
<li class="chapter" data-level="9.2.2" data-path="transform.html"><a href="transform.html#rescaling"><i class="fa fa-check"></i><b>9.2.2</b> Rescaling</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="transform.html"><a href="transform.html#normalization-and-standardization"><i class="fa fa-check"></i><b>9.3</b> Normalization and Standardization</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="transform.html"><a href="transform.html#rate-normalization"><i class="fa fa-check"></i><b>9.3.1</b> Rate normalization</a></li>
<li class="chapter" data-level="9.3.2" data-path="transform.html"><a href="transform.html#standardizing"><i class="fa fa-check"></i><b>9.3.2</b> Standardizing</a></li>
<li class="chapter" data-level="9.3.3" data-path="transform.html"><a href="transform.html#reducing-skewness"><i class="fa fa-check"></i><b>9.3.3</b> Reducing Skewness</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="transform.html"><a href="transform.html#stratification"><i class="fa fa-check"></i><b>9.4</b> Stratification</a></li>
<li class="chapter" data-level="9.5" data-path="transform.html"><a href="transform.html#outliers-and-censoring"><i class="fa fa-check"></i><b>9.5</b> Outliers and Censoring</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="transform.html"><a href="transform.html#outliers"><i class="fa fa-check"></i><b>9.5.1</b> Detecting Outliers</a></li>
<li class="chapter" data-level="9.5.2" data-path="transform.html"><a href="transform.html#censoring-outliers"><i class="fa fa-check"></i><b>9.5.2</b> Censoring outliers</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="transform.html"><a href="transform.html#ch-9-exercises"><i class="fa fa-check"></i><b>9.6</b> Ch-9 Exercises</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="transform.html"><a href="transform.html#salary-data-for-poly-sci-majors"><i class="fa fa-check"></i><b>9.6.1</b> Salary Data for Poly Sci Majors</a></li>
<li class="chapter" data-level="9.6.2" data-path="transform.html"><a href="transform.html#univariate-data-visualization-1"><i class="fa fa-check"></i><b>9.6.2</b> Univariate Data Visualization</a></li>
<li class="chapter" data-level="9.6.3" data-path="transform.html"><a href="transform.html#rescale-and-censor-data"><i class="fa fa-check"></i><b>9.6.3</b> Rescale and Censor Data</a></li>
<li class="chapter" data-level="9.6.4" data-path="transform.html"><a href="transform.html#logfit"><i class="fa fa-check"></i><b>9.6.4</b> Fit a Log-normal Distribution</a></li>
<li class="chapter" data-level="9.6.5" data-path="transform.html"><a href="transform.html#plot-fitted-vs-actual-data"><i class="fa fa-check"></i><b>9.6.5</b> Plot Fitted vs Actual Data</a></li>
<li class="chapter" data-level="9.6.6" data-path="transform.html"><a href="transform.html#transform-the-data"><i class="fa fa-check"></i><b>9.6.6</b> Transform the Data</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="transform.html"><a href="transform.html#ch-9-homework"><i class="fa fa-check"></i><b>9.7</b> Ch-9 Homework</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="measure.html"><a href="measure.html"><i class="fa fa-check"></i><b>10</b> Measurement</a>
<ul>
<li class="chapter" data-level="10.1" data-path="measure.html"><a href="measure.html#ch.-10-objectives"><i class="fa fa-check"></i><b>10.1</b> Ch. 10 Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="measure.html"><a href="measure.html#sampling"><i class="fa fa-check"></i><b>10.2</b> Sampling</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="measure.html"><a href="measure.html#sample"><i class="fa fa-check"></i><b>10.2.1</b> Samples vs. Populations</a></li>
<li class="chapter" data-level="10.2.2" data-path="measure.html"><a href="measure.html#sample.collect"><i class="fa fa-check"></i><b>10.2.2</b> Collecting a sample</a></li>
<li class="chapter" data-level="10.2.3" data-path="measure.html"><a href="measure.html#simple-random-sampling"><i class="fa fa-check"></i><b>10.2.3</b> Simple Random Sampling</a></li>
<li class="chapter" data-level="10.2.4" data-path="measure.html"><a href="measure.html#systematic-sampling"><i class="fa fa-check"></i><b>10.2.4</b> Systematic Sampling</a></li>
<li class="chapter" data-level="10.2.5" data-path="measure.html"><a href="measure.html#stratified-sampling"><i class="fa fa-check"></i><b>10.2.5</b> Stratified Sampling</a></li>
<li class="chapter" data-level="10.2.6" data-path="measure.html"><a href="measure.html#cluster-sampling"><i class="fa fa-check"></i><b>10.2.6</b> Cluster Sampling</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="measure.html"><a href="measure.html#figures-of-merit"><i class="fa fa-check"></i><b>10.3</b> Figures of Merit</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="measure.html"><a href="measure.html#LOD"><i class="fa fa-check"></i><b>10.3.1</b> Limit of Detection &amp; Quantification</a></li>
<li class="chapter" data-level="10.3.2" data-path="measure.html"><a href="measure.html#dynamic"><i class="fa fa-check"></i><b>10.3.2</b> Dynamic Range</a></li>
<li class="chapter" data-level="10.3.3" data-path="measure.html"><a href="measure.html#precision"><i class="fa fa-check"></i><b>10.3.3</b> Precision</a></li>
<li class="chapter" data-level="10.3.4" data-path="measure.html"><a href="measure.html#bias"><i class="fa fa-check"></i><b>10.3.4</b> Bias (accuracy)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="measure.html"><a href="measure.html#measurement-uncertainty"><i class="fa fa-check"></i><b>10.4</b> Measurement Uncertainty</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="measure.html"><a href="measure.html#repeated"><i class="fa fa-check"></i><b>10.4.1</b> Repeated Measures</a></li>
<li class="chapter" data-level="10.4.2" data-path="measure.html"><a href="measure.html#error-propagation"><i class="fa fa-check"></i><b>10.4.2</b> Error Propagation</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="measure.html"><a href="measure.html#ch-10-homework"><i class="fa fa-check"></i><b>10.5</b> CH-10 Homework</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>11</b> Modeling</a>
<ul>
<li class="chapter" data-level="11.1" data-path="model.html"><a href="model.html#ch.-11-objectives"><i class="fa fa-check"></i><b>11.1</b> Ch. 11 Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="model.html"><a href="model.html#process-modeling"><i class="fa fa-check"></i><b>11.2</b> Process Modeling</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="model.html"><a href="model.html#assumptions"><i class="fa fa-check"></i><b>11.2.1</b> Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="model.html"><a href="model.html#model-fitting"><i class="fa fa-check"></i><b>11.3</b> Model Fitting</a></li>
<li class="chapter" data-level="11.4" data-path="model.html"><a href="model.html#ols-regression"><i class="fa fa-check"></i><b>11.4</b> OLS Regression</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="model.html"><a href="model.html#OLS_example"><i class="fa fa-check"></i><b>11.4.1</b> Quick OLS Example</a></li>
<li class="chapter" data-level="11.4.2" data-path="model.html"><a href="model.html#OLS_assum"><i class="fa fa-check"></i><b>11.4.2</b> OLS Assumptions and Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="model.html"><a href="model.html#in-depth-example-ols-linear-regression"><i class="fa fa-check"></i><b>11.5</b> In-Depth Example: OLS Linear Regression</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="model.html"><a href="model.html#the-lm-function"><i class="fa fa-check"></i><b>11.5.1</b> The <code>lm()</code> function</a></li>
<li class="chapter" data-level="11.5.2" data-path="model.html"><a href="model.html#ols-diagnostics"><i class="fa fa-check"></i><b>11.5.2</b> OLS Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="model.html"><a href="model.html#calibration"><i class="fa fa-check"></i><b>11.6</b> Calibration</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="model.html"><a href="model.html#example-calibration"><i class="fa fa-check"></i><b>11.6.1</b> Example Calibration</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="model.html"><a href="model.html#ch-11-homework"><i class="fa fa-check"></i><b>11.7</b> Ch-11 Homework</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="dist.html"><a href="dist.html"><i class="fa fa-check"></i><b>12</b> Appendix: Stats &amp; Reference Distributions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="dist.html"><a href="dist.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>12.1</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="12.2" data-path="dist.html"><a href="dist.html#measures-of-dispersion"><i class="fa fa-check"></i><b>12.2</b> Measures of Dispersion</a></li>
<li class="chapter" data-level="12.3" data-path="dist.html"><a href="dist.html#unif_dist"><i class="fa fa-check"></i><b>12.3</b> Uniform Distribution</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="dist.html"><a href="dist.html#uniform-characteristic-plots"><i class="fa fa-check"></i><b>12.3.1</b> Uniform Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="dist.html"><a href="dist.html#normal_dist"><i class="fa fa-check"></i><b>12.4</b> Normal Distribution</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="dist.html"><a href="dist.html#normal-characteristic-plots"><i class="fa fa-check"></i><b>12.4.1</b> Normal Characteristic Plots</a></li>
<li class="chapter" data-level="12.4.2" data-path="dist.html"><a href="dist.html#rule"><i class="fa fa-check"></i><b>12.4.2</b> 68-95-99 rule</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="dist.html"><a href="dist.html#log_normal_dist"><i class="fa fa-check"></i><b>12.5</b> Log-normal Distribution</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="dist.html"><a href="dist.html#lognormal-characteristic-plots"><i class="fa fa-check"></i><b>12.5.1</b> Lognormal Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="dist.html"><a href="dist.html#pearson"><i class="fa fa-check"></i><b>12.6</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="dist.html"><a href="dist.html#anscombes-quartet"><i class="fa fa-check"></i><b>12.6.1</b> Anscombe’s Quartet</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="dist.html"><a href="dist.html#OLS"><i class="fa fa-check"></i><b>12.7</b> OLS Regression Coefficients</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Data Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dataviz" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Visualization with <code>ggplot2</code><a href="dataviz.html#dataviz" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="chapter-4-objectives" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Chapter 4 Objectives<a href="dataviz.html#chapter-4-objectives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter is designed around the following learning objectives for basic
data visualization in R. Upon completing this chapter, you should be able to:</p>
<ul>
<li>Install, load, and use <code>ggplot2</code> functions to visualize dataframe elements</li>
<li>Differentiate between data, aesthetics, and layers in a <code>ggplot2</code> object</li>
<li>Customize element properties such as color, size, and shape in a <code>ggplot2</code> layer</li>
<li>Create, store, and save a <code>ggplot2</code> object in an R script</li>
</ul>
</div>
<div id="install-and-load-ggplot2" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Install and load <code>ggplot2</code><a href="dataviz.html#install-and-load-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p><span style="color: blue;"> “The best design gets out of the way between the viewer’s brain and the content.” - Edward Tufte </span></p>
</blockquote>
<p>In this chapter, you will learn how to make basic plots using the <code>ggplot2</code>
package in R, which is another package in <code>tidyverse</code>, like <code>dplyr</code> and <code>readr</code>.
This section will focus on making <strong>useful</strong>, rather than
<strong>attractive</strong> graphs because, at this stage, we are focusing on exploring data
rather than presenting results to others. Later on, you will learn about
how to customize <code>ggplot2</code> objects. Customization often helps to make plots that
“get out of the way” between the content you wish to present and the viewer’s
brain, wherein you hope understanding takes root.</p>
<p>If you don’t already have <code>ggplot2</code> installed, you’ll need to install it. You
then need to load the package in your current session of R:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="dataviz.html#cb166-1" tabindex="-1"></a><span class="co"># install ggplot2 package (done once per R/RStudio installation)</span></span>
<span id="cb166-2"><a href="dataviz.html#cb166-2" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)  </span>
<span id="cb166-3"><a href="dataviz.html#cb166-3" tabindex="-1"></a><span class="co"># load ggplot2 in current R session</span></span>
<span id="cb166-4"><a href="dataviz.html#cb166-4" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>Alternatively, if you are planning on using other <code>tidyverse</code> R packages in the
same R session, you can simply install and load the <code>tidyverse</code> “R
package suite of R packages” with <code>library(tidyverse)</code>.</p>
</div>
<div id="steps-to-create-a-ggplot2-object" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Steps to create a <code>ggplot2</code> object<a href="dataviz.html#steps-to-create-a-ggplot2-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The process of creating a plot using <code>ggplot2</code> follows conventions that are a
bit different than most of the code you’ve seen so far in R, although it is
somewhat similar to the idea of piping I introduced in the last chapter. The
basic steps behind creating a plot with <code>ggplot2</code> are:</p>
<ol style="list-style-type: decimal">
<li><p>Create an object of the <code>ggplot2</code> class, typically specifying the <strong>data</strong>
and some or all of the <strong>aesthetics</strong></p></li>
<li><p>Add a layer or <strong>geom</strong> to the plot, along with other specific elements,
using <code>+</code></p></li>
</ol>
<p><strong>Aesthetics</strong> or <code>aes()</code> in R represent the things that we are plotting: the x
and y data. <strong>Geoms</strong> like <code>geom_point()</code> represent the way in which we layer
the aesthetics onto the plot. The geom is the type of plot that we are calling.</p>
<p>You can layer on one or many geoms and other elements to create plots that
range from very simple to very customized. We will start by focusing on simple
geoms and added elements; later on, we will explore more options for
customization.</p>
</div>
<div id="initializing-a-ggplot2-object" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Initializing a <code>ggplot2</code> object<a href="dataviz.html#initializing-a-ggplot2-object" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The first step in creating a plot using <code>ggplot()</code> is to create a ggplot
object. This object will not, by itself, create a plot with anything in it.
Instead, this first step typically specifies the data frame you want to use and
which aesthetics will be mapped to certain columns of that data frame.
Aesthetics are explained more in the next subsection.</p>
<p>Outside of a pipeline, you can use the following conventions to initialize a
<code>ggplot2</code> object:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="dataviz.html#cb167-1" tabindex="-1"></a><span class="do">## generic code; will not run</span></span>
<span id="cb167-2"><a href="dataviz.html#cb167-2" tabindex="-1"></a>object <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> my_dataframe, <span class="fu">aes</span>(<span class="at">x =</span> data_column_1, <span class="at">y =</span> data_column_2))</span></code></pre></div>
<p>The dataframe is the first parameter in a <code>ggplot()</code> function and, if you like,
you can use the parameter definition with that call (e.g., <code>data = dataframe</code>).
Aesthetics are defined within an <code>aes()</code> function call that is typically
defined within the <code>ggplot()</code> function.</p>
<div class="rmdnote">
<p>
While the <code>ggplot()</code> call is the place where you will most
often see an <code>aes()</code> call, you can also make calls to
<code>aes()</code> within the calls to specific geoms. This can be
particularly useful if you want to map aesthetics differently for
different geoms in your plot. We’ll see some examples of this use of
<code>aes()</code> more in later sections, when we talk about
customizing plots. The <code>data =</code> argument can be used in
specific geom calls to use different dataframes (from the one defined
when creating the original <code>ggplot</code> object), although this is
less common.
</p>
</div>
</div>
<div id="plot-aesthetics" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Plot aesthetics<a href="dataviz.html#plot-aesthetics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>Aesthetics</strong> are properties of the plot that can show certain elements of the
data. For example, in Figure <a href="dataviz.html#fig:mpg-bar">4.1</a>, we call an x-axis aesthetic
(<code>x = class</code>) from the <code>mpg</code> dataset. We then plot counts of cars within
different vehicle classes using <code>geom_bar()</code>. The <code>mpg</code> dataframe is included
in the <code>ggplot2</code> package; you can learn more about it by typing <code>?mpg</code> (no
parentheses) into the console after loading <code>ggplot2</code> with <code>library(ggplot2)</code>.
You can also learn more by typing <code>str(mpg)</code> and <code>head(mpg)</code>. As seen in
Chapters 2 and 3, one should always <em>look</em> at the data upon import and examine
the dataframe structure and variable classes.</p>
<p>According to <code>?mpg</code>:</p>
<blockquote>
<p>“This dataset contains a subset of the fuel economy data that the EPA makes available on <a href="http://fueleconomy.gov" target="_blank">http://fueleconomy.gov</a>. It contains only models which had a new release every year between 1999 and 2008 - this was used as a proxy for the popularity of the car.”</p>
</blockquote>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="dataviz.html#cb168-1" tabindex="-1"></a><span class="co"># use ggplot() to map the data and a single aesthetic (variable = class)</span></span>
<span id="cb168-2"><a href="dataviz.html#cb168-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class)) <span class="sc">+</span> </span>
<span id="cb168-3"><a href="dataviz.html#cb168-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="co"># call to a specific geom to plot the mapped data</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:mpg-bar"></span>
<img src="04-dataviz_files/figure-html/mpg-bar-1.png" alt="Example of a simple call to `ggplot` showing counts of vehicle classes from the `mpg` dataframe." width="672" />
<p class="caption">
Figure 4.1: Example of a simple call to <code>ggplot</code> showing counts of vehicle classes from the <code>mpg</code> dataframe.
</p>
</div>
<p>Let’s call this plot again with a second aesthetic, the <code>fill</code> color, which
will be mapped to <code>drv</code>, a variable in the <code>mpg</code> data frame that specifies
vehicle drive type (i.e., 4-wheel, font-wheel, or rear-wheel). The x-position
will continue to show vehicle class (<code>class</code>), but we will <code>fill</code> each bar
with colors pertaining to <code>drv</code> (i.e., to show the counts within each vehicle
class colored colored by <code>drv</code>).</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="dataviz.html#cb169-1" tabindex="-1"></a><span class="co"># call to ggplot to map the data and a single aesthetic</span></span>
<span id="cb169-2"><a href="dataviz.html#cb169-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">fill =</span> drv)) <span class="sc">+</span></span>
<span id="cb169-3"><a href="dataviz.html#cb169-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()  <span class="co"># call to a specific geom to plot the mapped data</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:mpg-fill"></span>
<img src="04-dataviz_files/figure-html/mpg-fill-1.png" alt="Example of a call to `ggplot` showing counts of vehicle classes from the `mpg` dataframe and colored by the `fill` aesthetic mapped to drive type (`drv`)." width="672" />
<p class="caption">
Figure 4.2: Example of a call to <code>ggplot</code> showing counts of vehicle classes from the <code>mpg</code> dataframe and colored by the <code>fill</code> aesthetic mapped to drive type (<code>drv</code>).
</p>
</div>
<p>What new information can we learn from the Figure <a href="dataviz.html#fig:mpg-fill">4.2</a>? For
starters, we can see that compact and mid-size cars tend to be front-wheel
drive, whereas pickups and SUVs (who tend to share the same chassis) tend to
be 4-wheel drive. <em>This result is not surprising to anyone who studies cars and trucks, but it’s nice to confirm one’s knowledge with quantitative data!</em></p>
<div class="rmdnote">
<p>
<code>ggplot()</code> will choose colors and add legends to plots
when an aesthetic mapping creates such opportunities. You will learn
ways to customize colors, legends, and other plot elements later.
</p>
</div>
<p>Which aesthetics are required for a plot depend on which geoms (more on those
in a second) you’re adding to the plot. You can find out the aesthetics you can
use for a geom in the “Aesthetics” section of the geom’s helpfile (e.g.,
<code>?geom_bar</code>). Required aesthetics are often shown <strong>in bold</strong> in this section of
the helpfile. You can also view a concise summary of aesthetic specification by typing <code>vignette("ggplot2-specs")</code> into the R console. Common plot aesthetics you might want to specify include:</p>
<table>
<caption><span id="tab:aes-table">Table 4.1: </span>Common Plot Aesthetics</caption>
<thead>
<tr class="header">
<th align="left">Code</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>x</code></td>
<td align="left">Variable to plot on x-axis</td>
</tr>
<tr class="even">
<td align="left"><code>y</code></td>
<td align="left">Variable to plot on y-axis</td>
</tr>
<tr class="odd">
<td align="left"><code>shape</code></td>
<td align="left">Shape of the element being plotted</td>
</tr>
<tr class="even">
<td align="left"><code>color</code></td>
<td align="left">Color of border of elements</td>
</tr>
<tr class="odd">
<td align="left"><code>fill</code></td>
<td align="left">Color of inside of elements</td>
</tr>
<tr class="even">
<td align="left"><code>size</code></td>
<td align="left">Size of the element</td>
</tr>
<tr class="odd">
<td align="left"><code>alpha</code></td>
<td align="left">Transparency (1: opaque; 0: transparent)</td>
</tr>
<tr class="even">
<td align="left"><code>linetype</code></td>
<td align="left">Type of line (e.g., solid, dashed)</td>
</tr>
</tbody>
</table>
</div>
<div id="adding-geoms" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Adding geoms<a href="dataviz.html#adding-geoms" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When creating plots, you’ll often want to add more than one <code>geom</code> to the plot.
You can add these with <code>+</code> after the <code>ggplot()</code> statement to initialize the
<code>ggplot2</code> object. Some of the most common geoms are:</p>
<table>
<caption><span id="tab:geom-table">Table 4.2: </span>A Few Basic Geom Types</caption>
<colgroup>
<col width="75%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Plot type</th>
<th align="left">ggplot2 function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Histogram (1 numeric variable)</td>
<td align="left"><code>geom_histogram()</code></td>
</tr>
<tr class="even">
<td align="left">Scatterplot (2 numeric variables)</td>
<td align="left"><code>geom_point()</code></td>
</tr>
<tr class="odd">
<td align="left">Boxplot (1 numeric variable, possibly 1 factor variable)</td>
<td align="left"><code>geom_boxplot()</code></td>
</tr>
<tr class="even">
<td align="left">Line graph (2 numeric variables)</td>
<td align="left"><code>geom_line()</code></td>
</tr>
</tbody>
</table>
<div class="rmdwarning">
<p>
A common error when writing <code>ggplot2</code> code is to put the
<code>+</code> to add a geom or element at the beginning of a line
rather than the end of a previous line. In this case, R will try to
execute the call too soon. If R gets to the end of a line and there is
no indication to continue the call (e.g., <code>%&gt;%</code> for piping
or <code>+</code> for <code>ggplot2</code> plots), R interprets that as
a message to run the call without reading in further code. Thus, to
avoid errors, be sure to end each line in <code>ggplot2</code> calls
with <code>+</code>, except for the final line when the call is actually
done. Don’t start lines with <code>+</code>.
</p>
</div>
<div id="aesthetic-override-a-warning" class="section level3 hasAnchor" number="4.6.1">
<h3><span class="header-section-number">4.6.1</span> Aesthetic override: a warning<a href="dataviz.html#aesthetic-override-a-warning" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>ggplot2</code> package, like many <code>tidyverse</code> packages, is both flexible and
forgiving, designed to accommodate the user by “filling in the blanks” when no
information is provided. For example, in the <code>ggplot()</code> call that created
Figure <a href="dataviz.html#fig:mpg-fill">4.2</a>, we didn’t specify the colors to be used or the
contents of the legend; instead, <code>ggplot2</code> figured those out for us. The
<code>ggplot2</code> package is also somewhat <em>flexible</em> in how calls and aesthetic
mappings can be structured. For example, the following four calls all produce
the same (identical) plot as shown in Figure <a href="dataviz.html#fig:mpg-fill">4.2</a>. Try it for
yourself.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="dataviz.html#cb170-1" tabindex="-1"></a><span class="co"># call to ggplot() with aes() specified in main call</span></span>
<span id="cb170-2"><a href="dataviz.html#cb170-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">fill =</span> drv)) <span class="sc">+</span></span>
<span id="cb170-3"><a href="dataviz.html#cb170-3" tabindex="-1"></a><span class="fu">geom_bar</span>()</span>
<span id="cb170-4"><a href="dataviz.html#cb170-4" tabindex="-1"></a></span>
<span id="cb170-5"><a href="dataviz.html#cb170-5" tabindex="-1"></a><span class="co"># call to ggplot() with aes() specified in geom</span></span>
<span id="cb170-6"><a href="dataviz.html#cb170-6" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span></span>
<span id="cb170-7"><a href="dataviz.html#cb170-7" tabindex="-1"></a><span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">fill =</span> drv))</span>
<span id="cb170-8"><a href="dataviz.html#cb170-8" tabindex="-1"></a></span>
<span id="cb170-9"><a href="dataviz.html#cb170-9" tabindex="-1"></a><span class="co"># call to ggplot() with a mix of aes() mappings </span></span>
<span id="cb170-10"><a href="dataviz.html#cb170-10" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class)) <span class="sc">+</span></span>
<span id="cb170-11"><a href="dataviz.html#cb170-11" tabindex="-1"></a><span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">fill =</span> drv))</span>
<span id="cb170-12"><a href="dataviz.html#cb170-12" tabindex="-1"></a></span>
<span id="cb170-13"><a href="dataviz.html#cb170-13" tabindex="-1"></a><span class="co"># call to ggplot() with all mappings in the geom </span></span>
<span id="cb170-14"><a href="dataviz.html#cb170-14" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb170-15"><a href="dataviz.html#cb170-15" tabindex="-1"></a><span class="fu">geom_bar</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">fill =</span> drv))</span></code></pre></div>
<p>For most plots that you make, the first example is best, where the aesthetics
are called out as arguments within the main call to <code>ggplot()</code>, such as:</p>
<p><code>ggplot(data = mpg, aes(x = class, fill = drv)) +</code><br />
<code>geom_bar()</code></p>
<p>In this case, the <code>geom_bar()</code> function inherits the aesthetics that were called
above in the main <code>ggplot</code> call. Specifying aesthetics in the main call to
<code>ggplot()</code> makes it easier to keep track of what you are trying to do!</p>
<p>The <code>ggplot</code> flexibility also comes with occasional confusion, as you can often
<strong><em>override</em></strong> one mapping with another one later on in the same call. For
example, see what happens when two different <code>fill</code> mappings are specified at
different points in the call:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="dataviz.html#cb171-1" tabindex="-1"></a><span class="co"># call to ggplot where one `fill` overrides another</span></span>
<span id="cb171-2"><a href="dataviz.html#cb171-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">fill =</span> drv)) <span class="sc">+</span></span>
<span id="cb171-3"><a href="dataviz.html#cb171-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">&quot;darkgreen&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:mpg-green"></span>
<img src="04-dataviz_files/figure-html/mpg-green-1.png" alt="Example of a call to `ggplot` showing counts of vehicle classes from the `mpg` dataframe and colored by a `fill` aesthetic override." width="672" />
<p class="caption">
Figure 4.3: Example of a call to <code>ggplot</code> showing counts of vehicle classes from the <code>mpg</code> dataframe and colored by a <code>fill</code> aesthetic override.
</p>
</div>
<p>In this case, the aesthetic mapping of <code>aes(fill = drv)</code> was overridden by the
specification in <code>geom_bar()</code>, where we wrote <code>fill = "darkgreen"</code>. This second
specification essentially wiped away the stacked bar colors and the legend, as
shown in Figure <a href="dataviz.html#fig:mpg-fill">4.2</a>. As your <code>ggplot2</code> objects become more
customized this sort of issue can arise; it comes with the territory of having
flexible code.</p>
</div>
</div>
<div id="shapes-and-colors" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Shapes and colors<a href="dataviz.html#shapes-and-colors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In R, you can specify the shape of points with a number. Figure <a href="dataviz.html#fig:shape-examples">4.4</a> shows the shapes that correspond to the numbers 1 to
25 in the <code>shape</code> aesthetic. This figure also provides an example of the
difference between color (black for all these example points) and fill (red for
these examples). You can see that some point shapes include a fill (21 for
example), while some are either empty (1) or solid (19).</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:shape-examples"></span>
<img src="04-dataviz_files/figure-html/shape-examples-1.png" alt="Examples of the shapes corresponding to different numeric choices for the `shape` aesthetic. For all examples, `color` is set to black and `fill` to red." width="480" />
<p class="caption">
Figure 4.4: Examples of the shapes corresponding to different numeric choices for the <code>shape</code> aesthetic. For all examples, <code>color</code> is set to black and <code>fill</code> to red.
</p>
</div>
<p>If you want to set color to be a constant value, you can do that in R using
character strings for different colors. Figure <a href="dataviz.html#fig:color-examples">4.5</a> gives
an example of some of the different blues available in R. To find links to
listings of different R colors, look up “R colors” and search by “Images”. Note
that colors are specified as <em>character strings</em> and define using quotes <code>" "</code>.
See the code chunk for Figure <a href="dataviz.html#fig:mpg-green">4.3</a> where color is defined by
<code>fill = "darkgreen"</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:color-examples"></span>
<img src="04-dataviz_files/figure-html/color-examples-1.png" alt="Example of available shades of blue in R." width="480" />
<p class="caption">
Figure 4.5: Example of available shades of blue in R.
</p>
</div>
</div>
<div id="scales-useful-plot-edits" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Scales: useful plot edits<a href="dataviz.html#scales-useful-plot-edits" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>ggplot2</code> package uses <strong><em>scales</em></strong> as a way to make all sorts of tweaks
and changes to how the plot is presented. According to the <code>ggplot2</code>
documentation:</p>
<blockquote>
<p>“Scales control the details of how data values are translated to visual properties. Override the default scales to tweak details like the axis labels or legend keys, or to use a completely different translation from data to aesthetic.”</p>
</blockquote>
<p>There are many scale elements that you can add onto a <code>ggplot2</code> object using
<code>+</code>. A few that are used very frequently are:</p>
<table>
<caption><span id="tab:scale-elements">Table 4.3: </span>Common Scale Elements</caption>
<thead>
<tr class="header">
<th align="left">Element</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>ggtitle()</code></td>
<td align="left">Plot title</td>
</tr>
<tr class="even">
<td align="left"><code>xlab()</code>, <code>ylab()</code></td>
<td align="left">Labels for x- and y-axis</td>
</tr>
<tr class="odd">
<td align="left"><code>xlim()</code>, <code>ylim()</code></td>
<td align="left">Limits of x- and y-axis</td>
</tr>
<tr class="even">
<td align="left"><code>scale_x_log10()</code></td>
<td align="left">Log scale of x-axis</td>
</tr>
</tbody>
</table>
<p><em>Note</em>: There is also a separate R package called <code>scales</code>, which has various
function options to automatically detect and show breaks and labels for axes
and legends. These additional functions can be called on a <code>ggplot</code> object.</p>
</div>
<div id="ggplot2-example-1" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> <code>ggplot2</code> example 1<a href="dataviz.html#ggplot2-example-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For the example plots, we will continue to use the <code>mpg</code> dataset from the
<code>ggplot2</code> package. We will use functions from the <code>dplyr</code> package, too, so both
need to be loaded. Fortunately, the <code>ggplot2</code> package is loaded in addition to regular <code>tidyverse</code> packages when you call <code>library(tidyverse)</code>.</p>
<p>The first example is actually of two similar <a href="eda2.html#scatt">scatterplots</a>: one using
<code>geom_point()</code> and one using <code>geom_jitter()</code>. These plots will examine the
agreement (i.e., the <a href="eda2.html#corr">correlation</a>) between a vehicle’s highway (<code>hwy</code>)
and city (<code>cty</code>) fuel economies for model year 2008.</p>
<p>Because the <code>mpg</code> dataset contains data from model year 1999 and 2008, we will
apply a <code>dplyr::filter()</code> command within our call to <code>ggplot()</code> to limit the
data to <code>year == 2008</code>.</p>
<p>We will also color the points on the plot according to the <code>class</code> of vehicle.<br />
If you are wondering what types of vehicle classes are included with <code>mpg</code>, you
could type <code>unique(mpg$class)</code> or, if you want to see a quantitative summary,
you could pipe together the following:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="dataviz.html#cb172-1" tabindex="-1"></a><span class="co"># quantitative summary in pipe</span></span>
<span id="cb172-2"><a href="dataviz.html#cb172-2" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb172-3"><a href="dataviz.html#cb172-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2008</span>) <span class="sc">%&gt;%</span></span>
<span id="cb172-4"><a href="dataviz.html#cb172-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(class) <span class="sc">%&gt;%</span></span>
<span id="cb172-5"><a href="dataviz.html#cb172-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">tally</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb172-6"><a href="dataviz.html#cb172-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">ungroup</span>()</span></code></pre></div>
<pre><code>## # A tibble: 7 × 2
##   class          n
##   &lt;chr&gt;      &lt;int&gt;
## 1 2seater        3
## 2 compact       22
## 3 midsize       21
## 4 minivan        5
## 5 pickup        17
## 6 subcompact    16
## 7 suv           33</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="dataviz.html#cb174-1" tabindex="-1"></a><span class="co"># alternative</span></span>
<span id="cb174-2"><a href="dataviz.html#cb174-2" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb174-3"><a href="dataviz.html#cb174-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2008</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb174-4"><a href="dataviz.html#cb174-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(class)</span></code></pre></div>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="dataviz.html#cb175-1" tabindex="-1"></a><span class="co"># load required R packages</span></span>
<span id="cb175-2"><a href="dataviz.html#cb175-2" tabindex="-1"></a><span class="fu">library</span>(dplyr) <span class="co"># for data wrangling and manipulation</span></span>
<span id="cb175-3"><a href="dataviz.html#cb175-3" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># for data visualization</span></span>
<span id="cb175-4"><a href="dataviz.html#cb175-4" tabindex="-1"></a><span class="do">## alternatively, use `library(tidyverse)`, if you will need multiple packages</span></span>
<span id="cb175-5"><a href="dataviz.html#cb175-5" tabindex="-1"></a></span>
<span id="cb175-6"><a href="dataviz.html#cb175-6" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb175-7"><a href="dataviz.html#cb175-7" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(mpg, year <span class="sc">==</span> <span class="dv">2008</span>), <span class="co"># filter data</span></span>
<span id="cb175-8"><a href="dataviz.html#cb175-8" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">y =</span> cty, <span class="at">color =</span> class)) <span class="co"># assign x, y, and color</span></span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:mpg-example1"></span>
<img src="04-dataviz_files/figure-html/mpg-example1-1.png" alt="Scatterplot (geom_point) of highway vs. city fuel economy for model year 2008, colored by vehicle type" width="672" />
<p class="caption">
Figure 4.6: Scatterplot (geom_point) of highway vs. city fuel economy for model year 2008, colored by vehicle type
</p>
</div>
<p>A few things to note about this plot. First, there is a clear relationship
between a vehicle’s highway and city fuel economy, but the correlation is not
necessarily one-to-one. Second, we can see that compact and midsize cars tend
to have better fuel efficiency that pickups and SUVs (…duh). Third, in my
opinion, this plot has a few drawbacks:</p>
<ul>
<li>If you were paying close attention, the sum of the <code>tally()</code> function above
reported over 100 different entries (117 to be precise), but the plot above
shows only about 50 data points… Why? (Hint: if you look at the <code>mpg</code>
data, the fuel economies are rounded to the nearest mile per gallon.)
<ul>
<li>We will address this issue with <code>geom_jitter()</code> below.<br />
</li>
</ul></li>
<li>The limits of the x- and y-axes are not equal, which distorts the relationship
a bit.
<ul>
<li>We will address this issue with <code>coord_fixed()</code> below.<br />
</li>
</ul></li>
<li>The relationship between <code>cty</code> and <code>hwy</code> might be easier to distinguish if
we drew a “one-to-one” line on the plot (i.e., y = x).
<ul>
<li>We will accomplish this need with <code>geom_abline</code> below.<br />
</li>
</ul></li>
<li>Personally, I don’t like the grey background and I think that the x and y
axis labels are a little vague. I prefer my axis labels to be more
descriptive and to communicate the units being plotted.
<ul>
<li>We will use a <code>theme_</code> call to clean up the background and will specify
axis labels with <code>xlab()</code> and <code>ylab()</code> elements.</li>
</ul></li>
</ul>
<p>Below is the same data from Figure <a href="dataviz.html#fig:mpg-example1">4.6</a> plotted using
<code>geom_jitter()</code>. This geom is just like <code>geom_point()</code> except that it allows
the plotted points to contain some “jitter” (a small amount of wobble as to where
the point actually shows up in x and y space) so that overlapping data points
can be distinguished from one another. The degree of jitter is set using
<code>height =</code> and/or <code>width =</code> arguments. Note that adding jitter to data is the
same as making the plotted data less precise (in a random way) so be careful not
to add too much jitter to a plot—aim for just enough jitter so that the points
are visible without impacting the overall conclusion to be drawn from the plot.</p>
<p>We can also add a degree of transparency to the plotted data by
using <code>alpha = 0.6</code> within the <code>geom_jitter()</code> layer. The <code>alpha =</code> argument is
available in most geoms within the <code>ggplot2</code> package and allows you to set the
degree of transparency between 0 (transparent) and 1 (completely solid).</p>
<p>We add a one-to-one line (y = x) that communicates what perfect
agreement between variables would look like. This is accomplished using
<code>geom_abline()</code> (<em>the name comes from drawing a line between points a and b on</em>
<em>a plot</em>). A <code>geom_abline()</code> call requires us to specify a slope and an
intercept, which we will set to 1 and 0, respectively.</p>
<p>Finally, we clean up the plot by:</p>
<ul>
<li>fixing the scale of the x and y axes (i.e., ensuring that 10 units of x
distance are equal to 10 units of y distance) by specifying a
<strong>fixed coordinate system</strong> with <code>coord_fixed()</code>;<br />
</li>
<li>adding x and y axis labels using strings as arguments to <code>xlab()</code> and
<code>ylab()</code> elements; and<br />
</li>
<li>setting a <strong>theme</strong> for the plot that removes the grey background using
<code>theme_minimal()</code>.</li>
</ul>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="dataviz.html#cb176-1" tabindex="-1"></a><span class="co"># call to ggplot, note that data and aesthetics are called in first geom layer</span></span>
<span id="cb176-2"><a href="dataviz.html#cb176-2" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb176-3"><a href="dataviz.html#cb176-3" tabindex="-1"></a>  <span class="co"># first geom layer (jitter)</span></span>
<span id="cb176-4"><a href="dataviz.html#cb176-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">data =</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(mpg, year <span class="sc">==</span> <span class="dv">2008</span>),</span>
<span id="cb176-5"><a href="dataviz.html#cb176-5" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">y =</span> cty, <span class="at">color =</span> class),</span>
<span id="cb176-6"><a href="dataviz.html#cb176-6" tabindex="-1"></a>             <span class="at">width =</span> <span class="fl">0.4</span>,</span>
<span id="cb176-7"><a href="dataviz.html#cb176-7" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">0.6</span>,</span>
<span id="cb176-8"><a href="dataviz.html#cb176-8" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb176-9"><a href="dataviz.html#cb176-9" tabindex="-1"></a>  <span class="co"># second geom layer (line)</span></span>
<span id="cb176-10"><a href="dataviz.html#cb176-10" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>,</span>
<span id="cb176-11"><a href="dataviz.html#cb176-11" tabindex="-1"></a>              <span class="at">slope =</span> <span class="dv">1</span>, </span>
<span id="cb176-12"><a href="dataviz.html#cb176-12" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>,</span>
<span id="cb176-13"><a href="dataviz.html#cb176-13" tabindex="-1"></a>              <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb176-14"><a href="dataviz.html#cb176-14" tabindex="-1"></a>  <span class="co"># fix x and y coordinates to be equal in relative scale</span></span>
<span id="cb176-15"><a href="dataviz.html#cb176-15" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb176-16"><a href="dataviz.html#cb176-16" tabindex="-1"></a>  <span class="co"># set axis limits</span></span>
<span id="cb176-17"><a href="dataviz.html#cb176-17" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">40</span>)) <span class="sc">+</span></span>
<span id="cb176-18"><a href="dataviz.html#cb176-18" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">40</span>)) <span class="sc">+</span></span>
<span id="cb176-19"><a href="dataviz.html#cb176-19" tabindex="-1"></a>  <span class="co"># add axis labels</span></span>
<span id="cb176-20"><a href="dataviz.html#cb176-20" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Highway Fuel Economy, mi/gal&quot;</span>) <span class="sc">+</span></span>
<span id="cb176-21"><a href="dataviz.html#cb176-21" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;City Fuel Economy, mi/gal&quot;</span>) <span class="sc">+</span></span>
<span id="cb176-22"><a href="dataviz.html#cb176-22" tabindex="-1"></a>  <span class="co"># adopt theme without grey background</span></span>
<span id="cb176-23"><a href="dataviz.html#cb176-23" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:mpg-example1a"></span>
<img src="04-dataviz_files/figure-html/mpg-example1a-1.png" alt="Scatterplot (geom_jitter) of highway vs. city fuel economy for model year 2008, colored by vehicle type" width="672" />
<p class="caption">
Figure 4.7: Scatterplot (geom_jitter) of highway vs. city fuel economy for model year 2008, colored by vehicle type
</p>
</div>
</div>
<div id="ggplot2-example-2" class="section level2 hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> <code>ggplot2</code> example 2<a href="dataviz.html#ggplot2-example-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the second example, we will look at highway fuel efficiency for SUVs in 2008,
ordered by manufacturer and colored by the engine displacement size in liters.
We create subsets of the <code>mpg</code> dataframe in two ways:</p>
<ol style="list-style-type: decimal">
<li><p>We create a summary dataframe (<code>mpg_subset</code>) by applying two <code>filter()</code>
calls on the <code>mpg</code> object. We then <code>group_by()</code> the manufacturer so that
average values for highway fuel economy (<code>hwy_mean</code>) and engine displacement
(<code>displ_mean</code>) can be calculated through a call to <code>summarize()</code>.</p></li>
<li><p>We subset the <code>mpg</code> dataframe again, this time directly within the <code>data =</code>
call for <code>ggplot()</code>.</p></li>
</ol>
<ul>
<li><p>The first layer (<code>geom_jitter()</code>) is a point plot that adds a slight amount
of “wobble” or “jitter” to the data points so that they don’t overlap on the
plot. Here, we have called <code>geom_jitter()</code> to display the individual values for
2008 SUV fuel economy on the highway as a function of manufacturer.</p></li>
<li><p>The second layer (<code>geom_errorbar()</code>) is a horizontal line plot showing the
mean values for SUV models within each manufacturer. The <code>geom_errorbar()</code>
function is often used to show precision (or uncertainty) about data; here we
are using it to identify a single value (the mean) for each SUV manufacturer.</p></li>
</ul>
<p>We also add custom labels and a color scale to investigate whether engine
displacement has an effect on fuel efficiency. Note the additional aesthetic
calls for <code>color =</code> in each layer. The final part of the call in
<code>theme_classic()</code> tells <code>ggplot()</code> to remove the gray background and the grid
lines, which are neither necessary nor visually appealing.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="dataviz.html#cb177-1" tabindex="-1"></a><span class="co"># use dplyr to create a summary subset from the `mpg` dataframe</span></span>
<span id="cb177-2"><a href="dataviz.html#cb177-2" tabindex="-1"></a>mpg_subset <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span></span>
<span id="cb177-3"><a href="dataviz.html#cb177-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(class <span class="sc">==</span> <span class="st">&quot;suv&quot;</span>, year <span class="sc">==</span> <span class="dv">2008</span>) <span class="sc">%&gt;%</span></span>
<span id="cb177-4"><a href="dataviz.html#cb177-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb177-5"><a href="dataviz.html#cb177-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">hwy_mean =</span> <span class="fu">mean</span>(hwy), <span class="at">displ_mean =</span> <span class="fu">mean</span>(displ))</span>
<span id="cb177-6"><a href="dataviz.html#cb177-6" tabindex="-1"></a></span>
<span id="cb177-7"><a href="dataviz.html#cb177-7" tabindex="-1"></a><span class="co"># call to ggplot, note that data and aesthetics are called in each geom layer</span></span>
<span id="cb177-8"><a href="dataviz.html#cb177-8" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb177-9"><a href="dataviz.html#cb177-9" tabindex="-1"></a>  <span class="co"># first layer - note the main dataframe was called</span></span>
<span id="cb177-10"><a href="dataviz.html#cb177-10" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> <span class="fu">filter</span>(mpg, class <span class="sc">==</span> <span class="st">&quot;suv&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2008</span>),</span>
<span id="cb177-11"><a href="dataviz.html#cb177-11" tabindex="-1"></a>           <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, </span>
<span id="cb177-12"><a href="dataviz.html#cb177-12" tabindex="-1"></a>               <span class="at">y =</span> hwy, </span>
<span id="cb177-13"><a href="dataviz.html#cb177-13" tabindex="-1"></a>               <span class="at">color =</span> displ),</span>
<span id="cb177-14"><a href="dataviz.html#cb177-14" tabindex="-1"></a>           <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb177-15"><a href="dataviz.html#cb177-15" tabindex="-1"></a>  <span class="co"># second layer - note the subset dataframe was called </span></span>
<span id="cb177-16"><a href="dataviz.html#cb177-16" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">data =</span> mpg_subset,</span>
<span id="cb177-17"><a href="dataviz.html#cb177-17" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">x =</span> manufacturer,</span>
<span id="cb177-18"><a href="dataviz.html#cb177-18" tabindex="-1"></a>                 <span class="at">ymin =</span> hwy_mean,</span>
<span id="cb177-19"><a href="dataviz.html#cb177-19" tabindex="-1"></a>                 <span class="at">ymax =</span> hwy_mean,</span>
<span id="cb177-20"><a href="dataviz.html#cb177-20" tabindex="-1"></a>                 <span class="at">color =</span> displ_mean),</span>
<span id="cb177-21"><a href="dataviz.html#cb177-21" tabindex="-1"></a>             <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb177-22"><a href="dataviz.html#cb177-22" tabindex="-1"></a>  <span class="co"># customize plot labels</span></span>
<span id="cb177-23"><a href="dataviz.html#cb177-23" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Fuel Economy for 2008 SUVs by Manufacturer and Engine Displacement&quot;</span>,</span>
<span id="cb177-24"><a href="dataviz.html#cb177-24" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Disp (L)&quot;</span>) <span class="sc">+</span></span>
<span id="cb177-25"><a href="dataviz.html#cb177-25" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;highway fuel economy (miles/gal)&quot;</span>) <span class="sc">+</span></span>
<span id="cb177-26"><a href="dataviz.html#cb177-26" tabindex="-1"></a>  <span class="co"># add a fancy color scale</span></span>
<span id="cb177-27"><a href="dataviz.html#cb177-27" tabindex="-1"></a>  <span class="fu">scale_colour_stepsn</span>(<span class="at">colours =</span> <span class="fu">hcl.colors</span>(<span class="at">n=</span><span class="dv">5</span>, <span class="at">palette =</span> <span class="st">&quot;plasma&quot;</span>)) <span class="sc">+</span></span>
<span id="cb177-28"><a href="dataviz.html#cb177-28" tabindex="-1"></a>  <span class="co"># adopt a theme without a gray background</span></span>
<span id="cb177-29"><a href="dataviz.html#cb177-29" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb177-30"><a href="dataviz.html#cb177-30" tabindex="-1"></a>  <span class="co"># enclose the plot on all sides with a black line</span></span>
<span id="cb177-31"><a href="dataviz.html#cb177-31" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb177-32"><a href="dataviz.html#cb177-32" tabindex="-1"></a>                                        <span class="at">size =</span> <span class="dv">1</span>))</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:mpg-example2"></span>
<img src="04-dataviz_files/figure-html/mpg-example2-1.png" alt="A two-layer (two `geom`) plot with customization" width="672" />
<p class="caption">
Figure 4.8: A two-layer (two <code>geom</code>) plot with customization
</p>
</div>
<p>What conclusions can you draw from examining Figure <a href="dataviz.html#fig:mpg-example2">4.8</a>?
In general, model year 2008 SUVs did not have great fuel economy, evidenced by
both the means and the individual data points.</p>
</div>
<div id="store-and-save-ggplot2-objects" class="section level2 hasAnchor" number="4.11">
<h2><span class="header-section-number">4.11</span> Store and save <code>ggplot2</code> objects<a href="dataviz.html#store-and-save-ggplot2-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes, you will want to store a ggplot2 plot as an object in your global
environment, so that it can be called or manipulated later. This is done in the
same way as you would create and assign a name to any other object in R. But
remember to <strong>use descriptive plot names</strong> following the naming advice from
Chapter 3 (i.e., meaningful words; lowercase; underscore as separator).</p>
<p><strong>In the following example, <code>plot1</code> does not follow proper naming conventions!</strong></p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="dataviz.html#cb178-1" tabindex="-1"></a><span class="co"># create a ggplot object called &quot;plot1&quot;</span></span>
<span id="cb178-2"><a href="dataviz.html#cb178-2" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class)) <span class="sc">+</span></span>
<span id="cb178-3"><a href="dataviz.html#cb178-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<div class="rmdnote">
<p>
When you create and store a <code>ggplot()</code> object, the plot
itself will be created and stored but not returned as output.If you want
to “see” the plot, just enter its name into the console or script, and
it will appear in the Viewer pane.
</p>
</div>
<p>You can also save <code>ggplot2</code> plots as image files to a local directory using the
<code>ggsave()</code> function. This function requires a file name but also allows you to
specify parameters including image resolution (<code>dpi = 300</code>), image type
(<code>device = png()</code>), and image <code>height</code>, <code>width</code> and <code>units</code> of measurement.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="dataviz.html#cb179-1" tabindex="-1"></a><span class="co"># create a ggplot object called &quot;plot1&quot;</span></span>
<span id="cb179-2"><a href="dataviz.html#cb179-2" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> class)) <span class="sc">+</span></span>
<span id="cb179-3"><a href="dataviz.html#cb179-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb179-4"><a href="dataviz.html#cb179-4" tabindex="-1"></a></span>
<span id="cb179-5"><a href="dataviz.html#cb179-5" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggsave</span>(<span class="st">&quot;images/mpg-bar.png&quot;</span>,</span>
<span id="cb179-6"><a href="dataviz.html#cb179-6" tabindex="-1"></a>       <span class="at">plot =</span> plot1,</span>
<span id="cb179-7"><a href="dataviz.html#cb179-7" tabindex="-1"></a>       <span class="at">dpi =</span> <span class="dv">150</span>,</span>
<span id="cb179-8"><a href="dataviz.html#cb179-8" tabindex="-1"></a>       <span class="at">device =</span> <span class="fu">png</span>(),</span>
<span id="cb179-9"><a href="dataviz.html#cb179-9" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">20</span>,</span>
<span id="cb179-10"><a href="dataviz.html#cb179-10" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>)</span></code></pre></div>
</div>
<div id="getting-help-with-ggplot2" class="section level2 hasAnchor" number="4.12">
<h2><span class="header-section-number">4.12</span> Getting help with <code>ggplot2</code><a href="dataviz.html#getting-help-with-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>ggplot2</code> package has become so popular that most of my “how do I do this?”
questions have already been asked, answered, and archived on sites like
<a href="https://stackoverflow.com/" target="_blank">Stack Overflow</a>.</p>
<p>Another great source is the
<code>ggplot2</code> reference section on the <a href="https://ggplot2.tidyverse.org/reference/index.html" target="_blank">tidyverse site</a>.
This page contains a
nice, concise summary of how to call and customize plot objects. I recommend
starting there because (1) it is created and maintained by the <code>ggplot2</code>
developers (and, thus, is authoritative) and (2) the reference page contains
all the function calls in an organized list, for which you can conduct a
‘control/command F’ search. You can also print this RStudio <code>ggplot2</code>
<a href="https://rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" target="_blank">cheat sheet</a>
to reference while coding.</p>
<p>If you would like some hands-on training in <code>ggplot2</code>, look for tutorials or
webinars like
<a href="https://www.youtube.com/watch?v=umDKP7ofHKk&amp;feature=youtu.be" target="_blank">this one</a>
from Dr. Samantha Tyner, the creator and maintainer
of <code>geomnet</code>, a <code>ggplot2</code> extension. Speaking of which, the R community has
created a large number of <code>ggplot2</code> extensions for different data visualization
needs. If you are thinking about a custom <code>ggplot</code> style, it probably
already exists! Before building your own (which is sometimes necessary and/or
fun), take a look at this
<a href="https://exts.ggplot2.tidyverse.org/" target="_blank">compilation</a> of
<code>ggplot2</code> extensions.</p>
</div>
<div id="chapter-4-homework" class="section level2 hasAnchor" number="4.13">
<h2><span class="header-section-number">4.13</span> Chapter 4 Homework<a href="dataviz.html#chapter-4-homework" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You will continue to work with the ozone measurement data introduced in the
previous chapter.</p>
<p>On Canvas, download the R Markdown template (.Rmd), which includes a description
of the data, the homework questions, and the general framework of
code-figure-text integration, including the framework for a code appendix. Save
the data and template files in your local R Project in the <code>/data</code> and
<code>/homework</code> folders, respectively. You should already have the ozone data (.csv)
saved in your <code>/data</code> folder.</p>
<p>Remember to check and set your working directory (e.g., Session &gt; Set Working
Directory &gt; To Source File Location) to point from the R Markdown
file and detect the data file in <code>/data</code> and also points to <code>/figs</code> as the
place to save figures and images, which is determined in the R Markdown global
option chunk I include in the R Markdown template.</p>
<p>This homework assignment is due at the start of the class when we begin Chapter
5. We will look for the R Markdown file and the corresponding knitted PDF or
HTML document within your <code>/homework</code> file. Remember, make regular, memorable
commits, so you never lose your work. Your work will be considered late if the
latest knit occurs after the deadline.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rprog2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="eda1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
