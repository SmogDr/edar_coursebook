<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Strings, Dates, and Tidying | Engineering Data Analysis in R</title>
  <meta name="description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Strings, Dates, and Tidying | Engineering Data Analysis in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Strings, Dates, and Tidying | Engineering Data Analysis in R" />
  
  <meta name="twitter:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

<meta name="author" content="John Volckens and Kathleen E. Wendt" />


<meta name="date" content="2020-07-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="eda1.html"/>
<link rel="next" href="eda2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Data Analysis in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#grading"><i class="fa fa-check"></i><b>1.3</b> Grading</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#grading-for-mech-481a6"><i class="fa fa-check"></i><b>1.3.1</b> Grading for MECH 481A6</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-set-up"><i class="fa fa-check"></i><b>1.4</b> Course set-up</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#coursebook"><i class="fa fa-check"></i><b>1.5</b> Coursebook</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>1.5.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rprog1.html"><a href="rprog1.html"><i class="fa fa-check"></i><b>2</b> The R Programming Environment</a><ul>
<li class="chapter" data-level="2.1" data-path="rprog1.html"><a href="rprog1.html#objectives"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="rprog1.html"><a href="rprog1.html#r-and-r-studio"><i class="fa fa-check"></i><b>2.2</b> R and R Studio</a><ul>
<li class="chapter" data-level="2.2.1" data-path="rprog1.html"><a href="rprog1.html#what-is-r"><i class="fa fa-check"></i><b>2.2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2.2" data-path="rprog1.html"><a href="rprog1.html#free-and-open-source-software"><i class="fa fa-check"></i><b>2.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="2.2.3" data-path="rprog1.html"><a href="rprog1.html#what-is-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rprog1.html"><a href="rprog1.html#communicating-with-r"><i class="fa fa-check"></i><b>2.3</b> Communicating with R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="rprog1.html"><a href="rprog1.html#r-sessions-console-and-command-prompt"><i class="fa fa-check"></i><b>2.3.1</b> R sessions, console, and command prompt</a></li>
<li class="chapter" data-level="2.3.2" data-path="rprog1.html"><a href="rprog1.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>2.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="rprog1.html"><a href="rprog1.html#r-scripts"><i class="fa fa-check"></i><b>2.4</b> R scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="rprog1.html"><a href="rprog1.html#commenting-code"><i class="fa fa-check"></i><b>2.4.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rprog1.html"><a href="rprog1.html#the-package-system"><i class="fa fa-check"></i><b>2.5</b> The “package” system</a><ul>
<li class="chapter" data-level="2.5.1" data-path="rprog1.html"><a href="rprog1.html#r-packages"><i class="fa fa-check"></i><b>2.5.1</b> R packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="rprog1.html"><a href="rprog1.html#installing-from-cran"><i class="fa fa-check"></i><b>2.5.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="2.5.3" data-path="rprog1.html"><a href="rprog1.html#loading-an-installed-package"><i class="fa fa-check"></i><b>2.5.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rprog1.html"><a href="rprog1.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>2.6</b> R’s most basic object types</a><ul>
<li class="chapter" data-level="2.6.1" data-path="rprog1.html"><a href="rprog1.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="rprog1.html"><a href="rprog1.html#dataframes"><i class="fa fa-check"></i><b>2.6.2</b> Dataframes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rprog2.html"><a href="rprog2.html"><i class="fa fa-check"></i><b>3</b> Getting and Cleaning Data</a><ul>
<li class="chapter" data-level="3.1" data-path="rprog2.html"><a href="rprog2.html#objectives-1"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rprog2.html"><a href="rprog2.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="rprog2.html"><a href="rprog2.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.3</b> Reading data into R</a><ul>
<li class="chapter" data-level="3.3.1" data-path="rprog2.html"><a href="rprog2.html#reading-local-flat-files"><i class="fa fa-check"></i><b>3.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="3.3.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>3.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rprog2.html"><a href="rprog2.html#directories-and-pathnames"><i class="fa fa-check"></i><b>3.4</b> Directories and pathnames</a><ul>
<li class="chapter" data-level="3.4.1" data-path="rprog2.html"><a href="rprog2.html#directory-structure"><i class="fa fa-check"></i><b>3.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="3.4.2" data-path="rprog2.html"><a href="rprog2.html#working-directory"><i class="fa fa-check"></i><b>3.4.2</b> Working directory</a></li>
<li class="chapter" data-level="3.4.3" data-path="rprog2.html"><a href="rprog2.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>3.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="3.4.4" data-path="rprog2.html"><a href="rprog2.html#tangent-paste"><i class="fa fa-check"></i><b>3.4.4</b> Tangent: <code>paste</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="rprog2.html"><a href="rprog2.html#reading-online-flat-files"><i class="fa fa-check"></i><b>3.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rprog2.html"><a href="rprog2.html#data-cleaning"><i class="fa fa-check"></i><b>3.5</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.5.1" data-path="rprog2.html"><a href="rprog2.html#renaming-columns"><i class="fa fa-check"></i><b>3.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="3.5.2" data-path="rprog2.html"><a href="rprog2.html#selecting-columns"><i class="fa fa-check"></i><b>3.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="3.5.3" data-path="rprog2.html"><a href="rprog2.html#add-or-change-columns"><i class="fa fa-check"></i><b>3.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="3.5.4" data-path="rprog2.html"><a href="rprog2.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>3.5.4</b> Base R equivalents to <code>dplyr</code> functions</a></li>
<li class="chapter" data-level="3.5.5" data-path="rprog2.html"><a href="rprog2.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>3.5.5</b> Filtering to certain rows</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rprog2.html"><a href="rprog2.html#piping"><i class="fa fa-check"></i><b>3.6</b> Piping</a></li>
<li class="chapter" data-level="3.7" data-path="rprog2.html"><a href="rprog2.html#in-class-exercise"><i class="fa fa-check"></i><b>3.7</b> In-Class Exercise</a></li>
<li class="chapter" data-level="3.8" data-path="rprog2.html"><a href="rprog2.html#homework"><i class="fa fa-check"></i><b>3.8</b> Homework</a><ul>
<li class="chapter" data-level="3.8.1" data-path="rprog2.html"><a href="rprog2.html#downloading-and-checking-out-the-example-data"><i class="fa fa-check"></i><b>3.8.1</b> Downloading and checking out the example data</a></li>
<li class="chapter" data-level="3.8.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-different-types-of-files"><i class="fa fa-check"></i><b>3.8.2</b> Reading in different types of files</a></li>
<li class="chapter" data-level="3.8.3" data-path="rprog2.html"><a href="rprog2.html#directory-structure-1"><i class="fa fa-check"></i><b>3.8.3</b> Directory structure</a></li>
<li class="chapter" data-level="3.8.4" data-path="rprog2.html"><a href="rprog2.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>3.8.4</b> Cleaning up data #1</a></li>
<li class="chapter" data-level="3.8.5" data-path="rprog2.html"><a href="rprog2.html#cleaning-up-data-2"><i class="fa fa-check"></i><b>3.8.5</b> Cleaning up data #2</a></li>
<li class="chapter" data-level="3.8.6" data-path="rprog2.html"><a href="rprog2.html#piping-1"><i class="fa fa-check"></i><b>3.8.6</b> Piping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>4</b> Data Visualization with <code>ggplot2</code></a><ul>
<li class="chapter" data-level="4.1" data-path="dataviz.html"><a href="dataviz.html#objectives-2"><i class="fa fa-check"></i><b>4.1</b> Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dataviz.html"><a href="dataviz.html#install-and-load-ggplot2"><i class="fa fa-check"></i><b>4.2</b> Install and load <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.3" data-path="dataviz.html"><a href="dataviz.html#steps-to-create-a-ggplot2-object"><i class="fa fa-check"></i><b>4.3</b> Steps to create a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.4" data-path="dataviz.html"><a href="dataviz.html#initializing-a-ggplot2-object"><i class="fa fa-check"></i><b>4.4</b> Initializing a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.5" data-path="dataviz.html"><a href="dataviz.html#plot-aesthetics"><i class="fa fa-check"></i><b>4.5</b> Plot aesthetics</a></li>
<li class="chapter" data-level="4.6" data-path="dataviz.html"><a href="dataviz.html#adding-geoms"><i class="fa fa-check"></i><b>4.6</b> Adding geoms</a><ul>
<li class="chapter" data-level="4.6.1" data-path="dataviz.html"><a href="dataviz.html#aesthetic-override-a-warning"><i class="fa fa-check"></i><b>4.6.1</b> Aesthetic override: a warning</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="dataviz.html"><a href="dataviz.html#shapes-and-colors"><i class="fa fa-check"></i><b>4.7</b> Shapes and colors</a></li>
<li class="chapter" data-level="4.8" data-path="dataviz.html"><a href="dataviz.html#scales-useful-plot-edits"><i class="fa fa-check"></i><b>4.8</b> Scales: useful plot edits</a></li>
<li class="chapter" data-level="4.9" data-path="dataviz.html"><a href="dataviz.html#example-plot"><i class="fa fa-check"></i><b>4.9</b> Example plot</a></li>
<li class="chapter" data-level="4.10" data-path="dataviz.html"><a href="dataviz.html#store-and-save-ggplot2-objects"><i class="fa fa-check"></i><b>4.10</b> Store and save <code>ggplot2</code> objects</a></li>
<li class="chapter" data-level="4.11" data-path="dataviz.html"><a href="dataviz.html#getting-help-with-ggplot2"><i class="fa fa-check"></i><b>4.11</b> Getting help with ggplot2</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="class-exercises.html"><a href="class-exercises.html"><i class="fa fa-check"></i><b>5</b> Class Exercises</a></li>
<li class="chapter" data-level="6" data-path="eda1.html"><a href="eda1.html"><i class="fa fa-check"></i><b>6</b> Univariate Data Exploration</a><ul>
<li class="chapter" data-level="6.1" data-path="eda1.html"><a href="eda1.html#objectives-3"><i class="fa fa-check"></i><b>6.1</b> Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="eda1.html"><a href="eda1.html#univariate-data"><i class="fa fa-check"></i><b>6.2</b> Univariate Data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="eda1.html"><a href="eda1.html#location-dispersion-and-shape"><i class="fa fa-check"></i><b>6.2.1</b> Location, Dispersion, and Shape</a></li>
<li class="chapter" data-level="6.2.2" data-path="eda1.html"><a href="eda1.html#example-location-and-dispersion"><i class="fa fa-check"></i><b>6.2.2</b> Example: Location and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="eda1.html"><a href="eda1.html#quantiles"><i class="fa fa-check"></i><b>6.3</b> Quantiles</a><ul>
<li class="chapter" data-level="6.3.1" data-path="eda1.html"><a href="eda1.html#quantiles-and-descriptive-statistics"><i class="fa fa-check"></i><b>6.3.1</b> Quantiles and Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="eda1.html"><a href="eda1.html#univariate-data-visualization"><i class="fa fa-check"></i><b>6.4</b> Univariate Data Visualization</a><ul>
<li class="chapter" data-level="6.4.1" data-path="eda1.html"><a href="eda1.html#summary-vs.-enumerative-plots"><i class="fa fa-check"></i><b>6.4.1</b> Summary vs. Enumerative Plots</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot"><i class="fa fa-check"></i><b>6.5</b> Cumulative Distribution Plot</a><ul>
<li class="chapter" data-level="6.5.1" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot-example"><i class="fa fa-check"></i><b>6.5.1</b> Cumulative Distribution Plot Example</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="eda1.html"><a href="eda1.html#hist"><i class="fa fa-check"></i><b>6.6</b> Histogram</a><ul>
<li class="chapter" data-level="6.6.1" data-path="eda1.html"><a href="eda1.html#histogram-what-to-look-for"><i class="fa fa-check"></i><b>6.6.1</b> Histogram: what to look for?</a></li>
<li class="chapter" data-level="6.6.2" data-path="eda1.html"><a href="eda1.html#what-causes-skewed-histograms"><i class="fa fa-check"></i><b>6.6.2</b> What causes skewed histograms?</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="eda1.html"><a href="eda1.html#box"><i class="fa fa-check"></i><b>6.7</b> Boxplot</a></li>
<li class="chapter" data-level="6.8" data-path="eda1.html"><a href="eda1.html#time_series"><i class="fa fa-check"></i><b>6.8</b> Time-Series</a></li>
<li class="chapter" data-level="6.9" data-path="eda1.html"><a href="eda1.html#autocorr"><i class="fa fa-check"></i><b>6.9</b> Autocorrelation</a><ul>
<li class="chapter" data-level="6.9.1" data-path="eda1.html"><a href="eda1.html#partial-autocorrelation"><i class="fa fa-check"></i><b>6.9.1</b> Partial Autocorrelation</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="eda1.html"><a href="eda1.html#exploring-data"><i class="fa fa-check"></i><b>6.10</b> Exploring Data</a></li>
<li class="chapter" data-level="6.11" data-path="eda1.html"><a href="eda1.html#in-course-exercises"><i class="fa fa-check"></i><b>6.11</b> In-course Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rprog3.html"><a href="rprog3.html"><i class="fa fa-check"></i><b>7</b> Strings, Dates, and Tidying</a><ul>
<li class="chapter" data-level="7.1" data-path="rprog3.html"><a href="rprog3.html#objectives-4"><i class="fa fa-check"></i><b>7.1</b> Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="rprog3.html"><a href="rprog3.html#strings"><i class="fa fa-check"></i><b>7.2</b> Strings</a><ul>
<li class="chapter" data-level="7.2.1" data-path="rprog3.html"><a href="rprog3.html#string-detect-match"><i class="fa fa-check"></i><b>7.2.1</b> String detect &amp; match</a></li>
<li class="chapter" data-level="7.2.2" data-path="rprog3.html"><a href="rprog3.html#regular-expressions"><i class="fa fa-check"></i><b>7.2.2</b> Regular Expressions</a></li>
<li class="chapter" data-level="7.2.3" data-path="rprog3.html"><a href="rprog3.html#string-split-separate"><i class="fa fa-check"></i><b>7.2.3</b> String split &amp; separate</a></li>
<li class="chapter" data-level="7.2.4" data-path="rprog3.html"><a href="rprog3.html#string-extract-remove"><i class="fa fa-check"></i><b>7.2.4</b> String extract &amp; remove</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="rprog3.html"><a href="rprog3.html#dates-and-date-times"><i class="fa fa-check"></i><b>7.3</b> Dates and Date-times</a><ul>
<li class="chapter" data-level="7.3.1" data-path="rprog3.html"><a href="rprog3.html#dates-and-times-in-base-r"><i class="fa fa-check"></i><b>7.3.1</b> Dates and Times in base R</a></li>
<li class="chapter" data-level="7.3.2" data-path="rprog3.html"><a href="rprog3.html#date-time-formats"><i class="fa fa-check"></i><b>7.3.2</b> Date-time formats</a></li>
<li class="chapter" data-level="7.3.3" data-path="rprog3.html"><a href="rprog3.html#date-time-classes-in-r"><i class="fa fa-check"></i><b>7.3.3</b> Date-time classes in R</a></li>
<li class="chapter" data-level="7.3.4" data-path="rprog3.html"><a href="rprog3.html#reading-and-classifying-date-times"><i class="fa fa-check"></i><b>7.3.4</b> Reading and classifying date-times</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="rprog3.html"><a href="rprog3.html#lubridate"><i class="fa fa-check"></i><b>7.4</b> <code>Lubridate</code></a><ul>
<li class="chapter" data-level="7.4.1" data-path="rprog3.html"><a href="rprog3.html#lubridate-parsing-functions"><i class="fa fa-check"></i><b>7.4.1</b> <code>Lubridate</code> Parsing Functions</a></li>
<li class="chapter" data-level="7.4.2" data-path="rprog3.html"><a href="rprog3.html#date-time-manipulation-with-lubridate"><i class="fa fa-check"></i><b>7.4.2</b> Date-time manipulation with <code>Lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="rprog3.html"><a href="rprog3.html#tidy-data"><i class="fa fa-check"></i><b>7.5</b> Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="eda2.html"><a href="eda2.html"><i class="fa fa-check"></i><b>8</b> Multivariate Data Exploration</a><ul>
<li class="chapter" data-level="8.1" data-path="eda2.html"><a href="eda2.html#objectives-5"><i class="fa fa-check"></i><b>8.1</b> Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="eda2.html"><a href="eda2.html#bivariate"><i class="fa fa-check"></i><b>8.2</b> Bivariate Data</a></li>
<li class="chapter" data-level="8.3" data-path="eda2.html"><a href="eda2.html#scatt"><i class="fa fa-check"></i><b>8.3</b> Scatterplot</a><ul>
<li class="chapter" data-level="8.3.1" data-path="eda2.html"><a href="eda2.html#causality"><i class="fa fa-check"></i><b>8.3.1</b> Causality</a></li>
<li class="chapter" data-level="8.3.2" data-path="eda2.html"><a href="eda2.html#correlation"><i class="fa fa-check"></i><b>8.3.2</b> Correlation</a></li>
<li class="chapter" data-level="8.3.3" data-path="eda2.html"><a href="eda2.html#correlation-neq-causation"><i class="fa fa-check"></i><b>8.3.3</b> Correlation <span class="math inline">\(\neq\)</span> causation</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="eda2.html"><a href="eda2.html#Tukey"><i class="fa fa-check"></i><b>8.4</b> Tukey Mean Difference Plot</a></li>
<li class="chapter" data-level="8.5" data-path="eda2.html"><a href="eda2.html#exploring-multivariate-data"><i class="fa fa-check"></i><b>8.5</b> Exploring Multivariate Data</a><ul>
<li class="chapter" data-level="8.5.1" data-path="eda2.html"><a href="eda2.html#contour-plots"><i class="fa fa-check"></i><b>8.5.1</b> Contour Plots</a></li>
<li class="chapter" data-level="8.5.2" data-path="eda2.html"><a href="eda2.html#time-series-density"><i class="fa fa-check"></i><b>8.5.2</b> Time-Series Density</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="rprog4.html"><a href="rprog4.html"><i class="fa fa-check"></i><b>9</b> Functional Programming</a><ul>
<li class="chapter" data-level="9.1" data-path="rprog4.html"><a href="rprog4.html#step-iii-1"><i class="fa fa-check"></i><b>9.1</b> Step III-1</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="eda3.html"><a href="eda3.html"><i class="fa fa-check"></i><b>10</b> Tips and Tricks for Data Exploration</a><ul>
<li class="chapter" data-level="10.1" data-path="eda3.html"><a href="eda3.html#transformation"><i class="fa fa-check"></i><b>10.1</b> Transformation</a></li>
<li class="chapter" data-level="10.2" data-path="eda3.html"><a href="eda3.html#centering"><i class="fa fa-check"></i><b>10.2</b> Centering</a></li>
<li class="chapter" data-level="10.3" data-path="eda3.html"><a href="eda3.html#normalizing"><i class="fa fa-check"></i><b>10.3</b> Normalizing</a><ul>
<li class="chapter" data-level="10.3.1" data-path="eda3.html"><a href="eda3.html#standardizing"><i class="fa fa-check"></i><b>10.3.1</b> Standardizing</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="eda3.html"><a href="eda3.html#stratification"><i class="fa fa-check"></i><b>10.4</b> Stratification</a></li>
<li class="chapter" data-level="10.5" data-path="eda3.html"><a href="eda3.html#censoring-and-truncating"><i class="fa fa-check"></i><b>10.5</b> Censoring and Truncating</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="measure.html"><a href="measure.html"><i class="fa fa-check"></i><b>11</b> Measurement</a><ul>
<li class="chapter" data-level="11.1" data-path="measure.html"><a href="measure.html#objectives-6"><i class="fa fa-check"></i><b>11.1</b> Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="measure.html"><a href="measure.html#sampling"><i class="fa fa-check"></i><b>11.2</b> Sampling</a><ul>
<li class="chapter" data-level="11.2.1" data-path="measure.html"><a href="measure.html#samples-vs.-populations"><i class="fa fa-check"></i><b>11.2.1</b> Samples vs. Populations</a></li>
<li class="chapter" data-level="11.2.2" data-path="measure.html"><a href="measure.html#collecting-a-sample"><i class="fa fa-check"></i><b>11.2.2</b> Collecting a sample</a></li>
<li class="chapter" data-level="11.2.3" data-path="measure.html"><a href="measure.html#simple-random-sampling"><i class="fa fa-check"></i><b>11.2.3</b> Simple Random Sampling</a></li>
<li class="chapter" data-level="11.2.4" data-path="measure.html"><a href="measure.html#systematic-sampling"><i class="fa fa-check"></i><b>11.2.4</b> Systematic Sampling</a></li>
<li class="chapter" data-level="11.2.5" data-path="measure.html"><a href="measure.html#stratified-sampling"><i class="fa fa-check"></i><b>11.2.5</b> Stratified Sampling</a></li>
<li class="chapter" data-level="11.2.6" data-path="measure.html"><a href="measure.html#cluster-sampling"><i class="fa fa-check"></i><b>11.2.6</b> Cluster Sampling</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="measure.html"><a href="measure.html#figures-of-merit"><i class="fa fa-check"></i><b>11.3</b> Figures of Merit</a><ul>
<li class="chapter" data-level="11.3.1" data-path="measure.html"><a href="measure.html#limit-of-detection-quantification"><i class="fa fa-check"></i><b>11.3.1</b> Limit of Detection &amp; Quantification</a></li>
<li class="chapter" data-level="11.3.2" data-path="measure.html"><a href="measure.html#dynamic-range"><i class="fa fa-check"></i><b>11.3.2</b> Dynamic Range</a></li>
<li class="chapter" data-level="11.3.3" data-path="measure.html"><a href="measure.html#measurement-precision"><i class="fa fa-check"></i><b>11.3.3</b> Measurement Precision</a></li>
<li class="chapter" data-level="11.3.4" data-path="measure.html"><a href="measure.html#measurement-bias-accuracy"><i class="fa fa-check"></i><b>11.3.4</b> Measurement Bias (accuracy)</a></li>
<li class="chapter" data-level="11.3.5" data-path="measure.html"><a href="measure.html#measurement-uncertainty"><i class="fa fa-check"></i><b>11.3.5</b> Measurement Uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="measure.html"><a href="measure.html#failure-and-reliability"><i class="fa fa-check"></i><b>11.4</b> Failure and Reliability</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>12</b> Modeling</a><ul>
<li class="chapter" data-level="12.1" data-path="model.html"><a href="model.html#fitting"><i class="fa fa-check"></i><b>12.1</b> Fitting</a><ul>
<li class="chapter" data-level="12.1.1" data-path="model.html"><a href="model.html#pdf"><i class="fa fa-check"></i><b>12.1.1</b> Probability Density Function</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="model.html"><a href="model.html#qqplot"><i class="fa fa-check"></i><b>12.2</b> Q-Q Plot (Quantile-Quantile)</a></li>
<li class="chapter" data-level="12.3" data-path="model.html"><a href="model.html#linear-models"><i class="fa fa-check"></i><b>12.3</b> Linear Models</a><ul>
<li class="chapter" data-level="12.3.1" data-path="model.html"><a href="model.html#assumptions-of-linear-regression"><i class="fa fa-check"></i><b>12.3.1</b> Assumptions of Linear Regression</a></li>
<li class="chapter" data-level="12.3.2" data-path="model.html"><a href="model.html#diagnostics"><i class="fa fa-check"></i><b>12.3.2</b> Diagnostics</a></li>
<li class="chapter" data-level="12.3.3" data-path="model.html"><a href="model.html#ordinary-least-squares"><i class="fa fa-check"></i><b>12.3.3</b> Ordinary Least Squares</a></li>
<li class="chapter" data-level="12.3.4" data-path="model.html"><a href="model.html#weighted-least-squares"><i class="fa fa-check"></i><b>12.3.4</b> Weighted Least Squares</a></li>
<li class="chapter" data-level="12.3.5" data-path="model.html"><a href="model.html#deming-regression"><i class="fa fa-check"></i><b>12.3.5</b> Deming Regression</a></li>
<li class="chapter" data-level="12.3.6" data-path="model.html"><a href="model.html#calibration"><i class="fa fa-check"></i><b>12.3.6</b> Calibration</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="simulate.html"><a href="simulate.html"><i class="fa fa-check"></i><b>13</b> Simulation</a><ul>
<li class="chapter" data-level="13.1" data-path="simulate.html"><a href="simulate.html#introduction-to-simulation"><i class="fa fa-check"></i><b>13.1</b> Introduction to simulation</a></li>
<li class="chapter" data-level="13.2" data-path="simulate.html"><a href="simulate.html#simulation-example"><i class="fa fa-check"></i><b>13.2</b> Simulation Example:</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="dist.html"><a href="dist.html"><i class="fa fa-check"></i><b>14</b> Appendix: Reference Distributions</a><ul>
<li class="chapter" data-level="14.1" data-path="dist.html"><a href="dist.html#unif_dist"><i class="fa fa-check"></i><b>14.1</b> Uniform Distribution</a><ul>
<li class="chapter" data-level="14.1.1" data-path="dist.html"><a href="dist.html#characteristic-plots-uniform-distribution"><i class="fa fa-check"></i><b>14.1.1</b> Characteristic Plots: Uniform Distribution</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="dist.html"><a href="dist.html#normal_dist"><i class="fa fa-check"></i><b>14.2</b> Normal Distribution</a><ul>
<li class="chapter" data-level="14.2.1" data-path="dist.html"><a href="dist.html#normal-distribution-characteristic-plots"><i class="fa fa-check"></i><b>14.2.1</b> Normal Distribution: Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="dist.html"><a href="dist.html#log_normal_dist"><i class="fa fa-check"></i><b>14.3</b> Log-normal Distribution</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Data Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rprog3" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Strings, Dates, and Tidying</h1>
<div id="objectives-4" class="section level2">
<h2><span class="header-section-number">7.1</span> Objectives</h2>
<p>This Chapter is designed around the following learning objectives. Upon completing this Chapter, you should be able to:</p>
<ul>
<li>Describe how R stores the POSIXct date and time object internally</li>
<li>Convert a column to a date format using <code>lubridate</code> functions</li>
<li>Extract information from a date object (e.g., month, year, day of week) using <code>lubridate</code> functions</li>
<li>Search, organize, and visualize data that are linked to date objects</li>
<li>Manipulate character strings using the <code>stringr</code> and <code>tidyr</code> packages of functions</li>
<li>Parse strings using regular expressions (regex)</li>
<li>Define the primary characteristics of <em>“Tidy Data”</em></li>
<li>Apply functions from the <code>dplyr</code> and <code>tidyr</code> packages to make dataframes “tidy”</li>
</ul>
</div>
<div id="strings" class="section level2">
<h2><span class="header-section-number">7.2</span> Strings</h2>
<p>Strings are class of character vectors</p>
<div id="string-detect-match" class="section level3">
<h3><span class="header-section-number">7.2.1</span> String detect &amp; match</h3>
</div>
<div id="regular-expressions" class="section level3">
<h3><span class="header-section-number">7.2.2</span> Regular Expressions</h3>
</div>
<div id="string-split-separate" class="section level3">
<h3><span class="header-section-number">7.2.3</span> String split &amp; separate</h3>
</div>
<div id="string-extract-remove" class="section level3">
<h3><span class="header-section-number">7.2.4</span> String extract &amp; remove</h3>
</div>
</div>
<div id="dates-and-date-times" class="section level2">
<h2><span class="header-section-number">7.3</span> Dates and Date-times</h2>
<p>To begin, we discuss how the core R code <code>{base}</code> handles dates and times, since there is a ton of code out there that utilizes these older functions. We will then quickly transition to the <code>lubridate</code> family of functions (part of the Tidyverse) because of their versatility and ease-of-use.</p>
<div id="dates-and-times-in-base-r" class="section level3">
<h3><span class="header-section-number">7.3.1</span> Dates and Times in base R</h3>
<p>Dates and times in base R all proceed from an <em>“epoch”</em> or <em>time origin</em>. In R, the <em>epoch</em> or “dawn of time” occurred at midnight on January 1<sup>st</sup>, 1970. For the sake of the R programming world, the concept of time started at that precise moment and has moved forward ever since. To note: R can handle date-times before 1/1/1970; it just treats them as negative values!</p>
<p>To see a date-time object, you can tell R to give you the current “System Time” by calling the <code>Sys.time()</code> function.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="rprog3.html#cb227-1"></a><span class="kw">Sys.time</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2020-07-20 21:30:07 MDT&quot;</code></pre>
<p>As you can see, we got back the date, time, and current timezone used by my computer. If you want to see how this time is stored in R internally, you can use <code>unclass()</code>, which returns an object value with its class attributes removed. When we wrap <code>unclass()</code> around <code>Sys.time()</code>, we will see the number of seconds that have occurred between the epoch of 1/1/1970 and right now:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="rprog3.html#cb229-1"></a><span class="kw">unclass</span>(<span class="kw">Sys.time</span>())</span></code></pre></div>
<pre><code>## [1] 1595302207</code></pre>
<p>That’s a lot of seconds. How many years is that?<br />
Just divide that number by [60s/min <span class="math inline">\(\cdot\)</span> 60min/hr <span class="math inline">\(\cdot\)</span> 24hr/d <span class="math inline">\(\cdot\)</span> 365d/yr] ~ 50.5867011 years.<br />
This calculation ignores leap years but you get the point…</p>
</div>
<div id="date-time-formats" class="section level3">
<h3><span class="header-section-number">7.3.2</span> Date-time formats</h3>
<p>Note that the <code>Sys.time()</code> function provided the date in a <strong><em>“year-month-day”</em></strong> format and the time in an <strong><em>“hour-minute-second”</em></strong> format: 2020-07-20 21:30:07</p>
<p>Not everyone uses this exact ordering when they record dates and times, which is one of the reasons working with dates and times can be tricky. You probably have little difficulty recognizing the following date-time objects as equivalent but not-so-much for some computer programs:</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:date-times-1">Table 7.1: </span>Date-time objects come in different forms
</caption>
<tbody>
<tr>
<td style="text-align:left;">
12/1/99 8:46 PM
</td>
</tr>
<tr>
<td style="text-align:left;">
1-Dec-1999 20: UTC
</td>
</tr>
<tr>
<td style="text-align:left;">
December 1st, 1999, 20:46:00
</td>
</tr>
</tbody>
</table>
<div class="rmdnote">
<p>
You will often see time referenced with a <strong>“UTC”</strong>, which stands for <em>“Universal Time, Coordinated”</em>. UTC is preferred by programmers because it doesn’t have a timezone and it doesn’t follow <em>Daylight Savings Time</em> conventions (DST is the bane of many coders).
</p>
<p>
In practice, UTC is the same time as GMT (Greenwich Mean Time, pronounced “gren-itch”) but with an important distinction. GMT is one of the many <a href="https://wikipedia.org/wiki/List_of_tz_database_time_zones">time-zones</a> across the planet, whereas, UTC has no time zone.
</p>
</div>
</div>
<div id="date-time-classes-in-r" class="section level3">
<h3><span class="header-section-number">7.3.3</span> Date-time classes in R</h3>
<p>R has several classes of date-time objects, none of which are easy to remember:</p>
<ol style="list-style-type: decimal">
<li><strong><code>POSIXct</code></strong> - stored as the time, in seconds, between the <code>epoch</code> of 1970-01-01 00:00:00 UTC and the date-time object in question.
<ul>
<li>the ‘ct’ stands for <em>“continuous time”</em> to represent “continuous seconds from origin”;</li>
<li>A <code>POSIXct</code> object is a single numeric vector (and so provides for efficient computing).</li>
</ul></li>
<li><strong><code>POSIXlt</code></strong> - stored as a list of date-time objects.
<ul>
<li>the ‘lt’ stands for <em>“list time”</em>.</li>
<li>A <code>POSIXlt</code> list contains the following elements:
<ul>
<li><em>sec</em> as 0–61 seconds</li>
<li><em>min</em> as 0–59 minutes</li>
<li><em>hour</em> as 0–23 hours</li>
<li><em>mday</em> as 1–31 day of the month</li>
<li><em>mon</em> as 0–11 months after the first of the year</li>
<li><em>year</em> as Years since 1900</li>
<li><em>wday</em> as 0–6 day of the week, starting on Sunday</li>
<li><em>yday</em> as 0–365 days of the year.</li>
<li><em>isdst</em> as a flag for Daylight savings time. Positive if in force, zero if not, negative if unknown.</li>
</ul></li>
</ul></li>
<li><strong><code>POSIXt</code></strong> - this is a virtual class. <code>POSIXt</code> (without the “l”) is an internal way for R to convert between <code>POSIXct</code> and <code>POSIXlt</code> date-time objects.
<ul>
<li>Think of the <code>POSIXt</code> as a way for R to perform operations/conversions between a <code>POSIXct</code> and <code>POSIXlt</code> object without throwing an error your way.</li>
</ul></li>
</ol>
<p>As a reminder, here are some of the most common <strong>vector classes</strong> in R:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Class
</th>
<th style="text-align:left;">
Example
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>character</code>
</td>
<td style="text-align:left;">
“Chemistry”, “Physics”, “Mathematics”
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>numeric</code>
</td>
<td style="text-align:left;">
10, 20, 30, 40
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>factor</code>
</td>
<td style="text-align:left;">
Male [underlying number: 1], Female [2]
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>Date</code>
</td>
<td style="text-align:left;">
“2010-01-01” [underlying number: 14,610]
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>logical</code>
</td>
<td style="text-align:left;">
TRUE, FALSE
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>date-time</code>
</td>
<td style="text-align:left;">
“2020-06-23 11:05:20 MDT”
</td>
</tr>
</tbody>
</table>
<p>To discover the class of a vector (including a column in a dataframe – remember
each column can be thought of as a vector), you can use <code>class()</code>:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="rprog3.html#cb231-1"></a><span class="kw">class</span>(<span class="kw">Sys.time</span>())</span></code></pre></div>
<pre><code>## [1] &quot;POSIXct&quot; &quot;POSIXt&quot;</code></pre>
<p>Both the <code>POSIXct</code> and <code>POSIXlt</code> class of objects return the same value to the user; the difference is really in how these classes store date-time objects internally. To examine them, you can coerce <code>Sys.time()</code> into each of the two classes using <code>as.POSIXct</code> and <code>as.POSIXlt</code> functions and then examine their attributes.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="rprog3.html#cb233-1"></a>time_now_ct &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(<span class="kw">Sys.time</span>())</span>
<span id="cb233-2"><a href="rprog3.html#cb233-2"></a><span class="kw">unclass</span>(time_now_ct)</span></code></pre></div>
<pre><code>## [1] 1595302207</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="rprog3.html#cb235-1"></a>time_now_lt &lt;-<span class="st"> </span><span class="kw">as.POSIXlt</span>(<span class="kw">Sys.time</span>())</span>
<span id="cb235-2"><a href="rprog3.html#cb235-2"></a><span class="kw">str</span>(<span class="kw">unclass</span>(time_now_lt)) <span class="co"># the `str()` function makes the output more compact</span></span></code></pre></div>
<pre><code>## List of 11
##  $ sec   : num 7.47
##  $ min   : int 30
##  $ hour  : int 21
##  $ mday  : int 20
##  $ mon   : int 6
##  $ year  : int 120
##  $ wday  : int 1
##  $ yday  : int 201
##  $ isdst : int 1
##  $ zone  : chr &quot;MDT&quot;
##  $ gmtoff: int -21600
##  - attr(*, &quot;tzone&quot;)= chr [1:3] &quot;&quot; &quot;MST&quot; &quot;MDT&quot;</code></pre>
<p>It’s easy to see why the <code>POSIXct</code> object class is more computationally efficient; but it’s also nice to see all the date-time information packed into the <code>POSIXlt</code>. This is why R keeps a key to unlock both using <code>POSIXt</code>. As my father used to say: clear as mud?</p>
</div>
<div id="reading-and-classifying-date-times" class="section level3">
<h3><span class="header-section-number">7.3.4</span> Reading and classifying date-times</h3>
<p>Oftentimes, when data is read into R, there are column elements that contain date and time information. These dates and times are often interpreted by R as <em>character</em> vectors, which means they have lost their relational attributes (i.e., you cannot subtract “Monday 08:00” from “Wednesday 12:00” and get “2 days 4 hours”). If we want to analyze dates and times in a relational way, we need to instruct R to recognize these as date-time objects (i.e., as either the <code>POSIXct</code> or <code>POSIXlt</code> class). Thus, to convert a character vector into date or date-time object requires a change of that vector’s <strong><em>class</em></strong>.</p>
<p>Date-time elements can be tricky to work with for a few reasons:</p>
<ol style="list-style-type: decimal">
<li>Different programs store and handle dates and times in different ways<br />
</li>
<li>The existence of time zones means that date-time values can change with location</li>
<li>Date-time strings can be separated with spaces, colons, commas, slashes, dashes, or a mix of all those together (see Table <a href="rprog3.html#tab:date-times-1">7.1</a>)</li>
</ol>
<p>The <code>{base}</code> R function to convert between <code>character</code> classes and <code>date-time</code> classes is the function <code>strptime()</code>, which is short for <em>“<strong>str</strong>ing <strong>p</strong>arse into date-<strong>time</strong>”</em>. I mention this function not because I encourage you to use it but because I want you to be able to recognize it. The function has over 39 conversion specifications that it can take as arguments. That is to say, this function not simple to master. If you are a glutton for punishment, I invite you to read the R Documentation <code>?strptime</code>.</p>
<p>In <strong>summary</strong> here are a few <code>{base}</code> R functions on date-time object that are worth knowing:</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:base-r-times">Table 7.2: </span>Basic Date-time functions
</caption>
<thead>
<tr>
<th style="text-align:left;">
{base} R Function
</th>
<th style="text-align:left;">
Value Returned
</th>
<th style="text-align:left;">
Example
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Sys.Date()
</td>
<td style="text-align:left;">
Current system date
</td>
<td style="text-align:left;">
“2020-06-23”
</td>
</tr>
<tr>
<td style="text-align:left;">
Sys.time()
</td>
<td style="text-align:left;">
Current system date-Time
</td>
<td style="text-align:left;">
“2020-06-23 11:05:20 MDT”
</td>
</tr>
<tr>
<td style="text-align:left;">
Sys.timezone()
</td>
<td style="text-align:left;">
Current system timezone
</td>
<td style="text-align:left;">
“America/Denver”
</td>
</tr>
<tr>
<td style="text-align:left;">
as.POSIXct()
</td>
<td style="text-align:left;">
date-time object of class POSIXct
</td>
<td style="text-align:left;">
“2020-06-23 11:05:20 MDT”
</td>
</tr>
<tr>
<td style="text-align:left;">
as.POSIXlt()
</td>
<td style="text-align:left;">
date-time object of class POSIXlt
</td>
<td style="text-align:left;">
“2020-06-23 11:05:20 MDT”
</td>
</tr>
<tr>
<td style="text-align:left;">
strptime()
</td>
<td style="text-align:left;">
date-time object of class POSIXlt
</td>
<td style="text-align:left;">
“2020-06-23 11:05:20 MDT”
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="lubridate" class="section level2">
<h2><span class="header-section-number">7.4</span> <code>Lubridate</code></h2>
<p>The <code>lubridate</code> package was developed specifically to make life easier when working with date-time objects.</p>
<div id="lubridate-parsing-functions" class="section level3">
<h3><span class="header-section-number">7.4.1</span> <code>Lubridate</code> Parsing Functions</h3>
<p>One of best aspects of <code>lubridate</code> is its ability to parse date-time objects with simplicity and ease; the <code>lubridate</code> parsing functions are designed as “named-to-order”. Let me explain:</p>
<blockquote>
<p><span style="color: purple;"> <strong>Parse</strong>: <strong><em>to break apart and analyze the individual components</em></strong> (of something, like a character string) </span></p>
</blockquote>
<ul>
<li><p>If a character vector is written in “<strong>y</strong>ear-<strong>m</strong>onth-<strong>d</strong>ay” format (i.e., <code>"2020-Dec-18"</code>), then the <code>lubridate</code> function to convert that vector is <code>ymd()</code>.</p></li>
<li><p>If a character vector is written in “<strong>d</strong>ay-<strong>m</strong>onth-<strong>y</strong>ear” format (i.e., <code>"18-Dec-2020"</code>), then the <code>lubridate</code> function to convert that vector is <code>dmy()</code>. Try it out:</p></li>
</ul>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="rprog3.html#cb237-1"></a><span class="co">#create a character vector</span></span>
<span id="cb237-2"><a href="rprog3.html#cb237-2"></a>date_old &lt;-<span class="st"> &quot;2020-Dec-18&quot;</span></span>
<span id="cb237-3"><a href="rprog3.html#cb237-3"></a></span>
<span id="cb237-4"><a href="rprog3.html#cb237-4"></a><span class="co">#prove to yourself it&#39;s a character class</span></span>
<span id="cb237-5"><a href="rprog3.html#cb237-5"></a><span class="kw">class</span>(date_old)</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="rprog3.html#cb239-1"></a><span class="co">#convert it to a `Date` class with `ymd()`</span></span>
<span id="cb239-2"><a href="rprog3.html#cb239-2"></a>date_new &lt;-<span class="st"> </span><span class="kw">ymd</span>(date_old)</span>
<span id="cb239-3"><a href="rprog3.html#cb239-3"></a></span>
<span id="cb239-4"><a href="rprog3.html#cb239-4"></a><span class="co">#prove to yourself it worked</span></span>
<span id="cb239-5"><a href="rprog3.html#cb239-5"></a><span class="kw">class</span>(date_new)</span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>That little conversion exercise may not have blown you away, but watch what happens when I feed the following set of wacky character vectors into that same <code>lubridate</code> parsing function, <code>ymd()</code>:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="rprog3.html#cb241-1"></a>messy_dates &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;2020------Dec the 12&quot;</span>,</span>
<span id="cb241-2"><a href="rprog3.html#cb241-2"></a>                 <span class="st">&quot;20.-.12.-.12&quot;</span>,</span>
<span id="cb241-3"><a href="rprog3.html#cb241-3"></a>                 <span class="st">&quot;2020aaa12aaa12&quot;</span>,</span>
<span id="cb241-4"><a href="rprog3.html#cb241-4"></a>                 <span class="st">&quot;20,12,12&quot;</span>,</span>
<span id="cb241-5"><a href="rprog3.html#cb241-5"></a>                 <span class="st">&quot;2020x12-12&quot;</span>,</span>
<span id="cb241-6"><a href="rprog3.html#cb241-6"></a>                 <span class="st">&quot;2020   ....    12        ......     12&quot;</span>,</span>
<span id="cb241-7"><a href="rprog3.html#cb241-7"></a>                 <span class="st">&quot;&#39;20.December-12&quot;</span>)</span>
<span id="cb241-8"><a href="rprog3.html#cb241-8"></a></span>
<span id="cb241-9"><a href="rprog3.html#cb241-9"></a><span class="kw">ymd</span>(messy_dates)</span></code></pre></div>
<pre><code>## [1] &quot;2020-12-12&quot; &quot;2020-12-12&quot; &quot;2020-12-12&quot; &quot;2020-12-12&quot; &quot;2020-12-12&quot;
## [6] &quot;2020-12-12&quot; &quot;2020-12-12&quot;</code></pre>
<p>That’s right. The <code>ymd()</code> parsing function figured them all out correctly with almost no effort on your part. But wait, there’s more! The <code>lubridate</code> package contains parsing functions for almost any order you can dream up.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Parsing Function
</th>
<th style="text-align:left;">
Format to Convert
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>ymd()</code>
</td>
<td style="text-align:left;">
year-month-day
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>mdy()</code>
</td>
<td style="text-align:left;">
month-day-year
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>dmy()</code>
</td>
<td style="text-align:left;">
day-month-year
</td>
</tr>
</tbody>
</table>
<p>And if you need to parse a time component, simply add a combination of <code>_hms</code> to the function call to parse time in “hours-minutes-seconds” format. Some additional examples of how you would parse time that followed from a <code>ymd</code> format:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Parsing Function
</th>
<th style="text-align:left;">
Format to Convert
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
<code>ymd_h()</code>
</td>
<td style="text-align:left;">
year-month-day_hours
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>mdy_hm()</code>
</td>
<td style="text-align:left;">
year-month-day_hours-minutes
</td>
</tr>
<tr>
<td style="text-align:left;">
<code>dmy_hms()</code>
</td>
<td style="text-align:left;">
year-month-day_hours-minutes-seconds
</td>
</tr>
</tbody>
</table>
<p>The beauty of the <code>lubridate</code> parsers is that they do the hard work of cleaning up the character vector, regardless of separators or delimiters within each string, and return either a <code>Date</code> or <code>Date-time</code> object class.</p>
</div>
<div id="date-time-manipulation-with-lubridate" class="section level3">
<h3><span class="header-section-number">7.4.2</span> Date-time manipulation with <code>Lubridate</code></h3>
<p>To convert the <code>date</code> column in the <code>daily_show</code> data into a Date
class, then, you can run:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="rprog3.html#cb243-1"></a><span class="kw">library</span>(<span class="dt">package =</span> <span class="st">&quot;lubridate&quot;</span>)</span>
<span id="cb243-2"><a href="rprog3.html#cb243-2"></a></span>
<span id="cb243-3"><a href="rprog3.html#cb243-3"></a><span class="kw">class</span>(<span class="dt">x =</span> daily_show<span class="op">$</span>date) <span class="co"># Check the class of the &#39;date&#39; column before mutating it</span></span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="rprog3.html#cb245-1"></a>daily_show &lt;-<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">.data =</span> daily_show,</span>
<span id="cb245-2"><a href="rprog3.html#cb245-2"></a>                     <span class="dt">date =</span> <span class="kw">mdy</span>(date))</span>
<span id="cb245-3"><a href="rprog3.html#cb245-3"></a><span class="kw">head</span>(<span class="dt">x =</span> daily_show, <span class="dt">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##    year job                date       category guest_name     
##   &lt;dbl&gt; &lt;chr&gt;              &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;          
## 1  1999 actor              1999-01-11 Acting   Michael J. Fox 
## 2  1999 Comedian           1999-01-12 Comedy   Sandra Bernhard
## 3  1999 television actress 1999-01-13 Acting   Tracey Ullman</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="rprog3.html#cb247-1"></a><span class="kw">class</span>(<span class="dt">x =</span> daily_show<span class="op">$</span>date) <span class="co"># Check the class of the &#39;date&#39; column after mutating it</span></span></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>Once you have an object in the <code>Date</code> class, you can do things like plot by
date, calculate the range of dates, and calculate the total number of days the
dataset covers:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="rprog3.html#cb249-1"></a><span class="co"># report the min and max dates</span></span>
<span id="cb249-2"><a href="rprog3.html#cb249-2"></a><span class="kw">range</span>(daily_show<span class="op">$</span>date)</span>
<span id="cb249-3"><a href="rprog3.html#cb249-3"></a></span>
<span id="cb249-4"><a href="rprog3.html#cb249-4"></a><span class="co"># calculate the duration from first to last date</span></span>
<span id="cb249-5"><a href="rprog3.html#cb249-5"></a><span class="kw">diff</span>(<span class="dt">x =</span> <span class="kw">range</span>(daily_show<span class="op">$</span>date)) </span></code></pre></div>
<p>We could have used these to transform the date in <code>daily_show</code>, using the following pipe chain:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="rprog3.html#cb250-1"></a>daily_show &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/daily_show_guests.csv&quot;</span>,</span>
<span id="cb250-2"><a href="rprog3.html#cb250-2"></a>                       <span class="dt">skip =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span></span>
<span id="cb250-3"><a href="rprog3.html#cb250-3"></a><span class="st">  </span><span class="kw">rename</span>(<span class="dt">job =</span> GoogleKnowlege_Occupation, </span>
<span id="cb250-4"><a href="rprog3.html#cb250-4"></a>         <span class="dt">date =</span> Show,</span>
<span id="cb250-5"><a href="rprog3.html#cb250-5"></a>         <span class="dt">category =</span> Group,</span>
<span id="cb250-6"><a href="rprog3.html#cb250-6"></a>         <span class="dt">guest_name =</span> Raw_Guest_List) <span class="op">%&gt;%</span></span>
<span id="cb250-7"><a href="rprog3.html#cb250-7"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>YEAR) <span class="op">%&gt;%</span></span>
<span id="cb250-8"><a href="rprog3.html#cb250-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">mdy</span>(date)) <span class="op">%&gt;%</span></span>
<span id="cb250-9"><a href="rprog3.html#cb250-9"></a><span class="st">  </span><span class="kw">filter</span>(category <span class="op">==</span><span class="st"> &quot;Science&quot;</span>)</span>
<span id="cb250-10"><a href="rprog3.html#cb250-10"></a><span class="kw">head</span>(<span class="dt">x =</span> daily_show, <span class="dt">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   job          date       category guest_name     
##   &lt;chr&gt;        &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;          
## 1 neurosurgeon 2003-04-28 Science  Dr Sanjay Gupta
## 2 scientist    2004-01-13 Science  Catherine Weitz</code></pre>
<p>The <code>lubridate</code> package also includes functions to pull out certain elements of a date, including:</p>
<ul>
<li><code>wday</code> return the day of the week pertaining to a Date object</li>
<li><code>mday</code> return the day of the month pertaining to a Date object</li>
<li><code>yday</code> return the day of the year pertaining to a Date object</li>
<li><code>month</code> return the month pertaining to a Date object</li>
<li><code>quarter</code> return the quarter of hte year pertaining to a Date object</li>
<li><code>year</code> return the year pertaining to a date object</li>
</ul>
<p>For example, we could use <code>wday</code> to create a new column with the weekday of each show:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="rprog3.html#cb252-1"></a><span class="kw">mutate</span>(<span class="dt">.data =</span> daily_show,</span>
<span id="cb252-2"><a href="rprog3.html#cb252-2"></a>       <span class="dt">show_day =</span> <span class="kw">wday</span>(<span class="dt">x =</span> date, <span class="dt">label =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></span>
<span id="cb252-3"><a href="rprog3.html#cb252-3"></a><span class="st">  </span><span class="kw">select</span>(date, show_day, guest_name) <span class="op">%&gt;%</span></span>
<span id="cb252-4"><a href="rprog3.html#cb252-4"></a><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   date       show_day guest_name            
##   &lt;date&gt;     &lt;ord&gt;    &lt;chr&gt;                 
## 1 2003-04-28 Mon      Dr Sanjay Gupta       
## 2 2004-01-13 Tue      Catherine Weitz       
## 3 2004-06-15 Tue      Hassan Ibrahim        
## 4 2005-09-06 Tue      Dr. Marc Siegel       
## 5 2006-02-13 Mon      Astronaut Mike Mullane</code></pre>
<div class="rmdwarning">
<p>
R functions tend to use the timezone of <strong>YOUR</strong> computer’s operating system by default, or UTC, or GMT. You need to be careful when working with dates and times to either specify the time zone or convince yourself the default behavior works for your application.
</p>
</div>
</div>
</div>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">7.5</span> Tidy Data</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="eda1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="eda2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
