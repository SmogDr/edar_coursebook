<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Dates, Strings, and Tidying | Engineering Data Analysis in R</title>
  <meta name="description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Dates, Strings, and Tidying | Engineering Data Analysis in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Dates, Strings, and Tidying | Engineering Data Analysis in R" />
  
  <meta name="twitter:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

<meta name="author" content="John Volckens" />


<meta name="date" content="2020-06-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="eda1.html"/>
<link rel="next" href="eda2.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Data Analysis in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#grading"><i class="fa fa-check"></i><b>1.3</b> Grading</a><ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#grading-for-mech-481a6"><i class="fa fa-check"></i><b>1.3.1</b> Grading for MECH 481A6</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-set-up"><i class="fa fa-check"></i><b>1.4</b> Course set-up</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#coursebook"><i class="fa fa-check"></i><b>1.5</b> Coursebook</a><ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>1.5.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rprog1.html"><a href="rprog1.html"><i class="fa fa-check"></i><b>2</b> The R Programming Environment</a><ul>
<li class="chapter" data-level="2.1" data-path="rprog1.html"><a href="rprog1.html#objectives"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="rprog1.html"><a href="rprog1.html#r-and-r-studio"><i class="fa fa-check"></i><b>2.2</b> R and R Studio</a><ul>
<li class="chapter" data-level="2.2.1" data-path="rprog1.html"><a href="rprog1.html#what-is-r"><i class="fa fa-check"></i><b>2.2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2.2" data-path="rprog1.html"><a href="rprog1.html#free-and-open-source-software"><i class="fa fa-check"></i><b>2.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="2.2.3" data-path="rprog1.html"><a href="rprog1.html#what-is-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rprog1.html"><a href="rprog1.html#communicating-with-r"><i class="fa fa-check"></i><b>2.3</b> Communicating with R</a><ul>
<li class="chapter" data-level="2.3.1" data-path="rprog1.html"><a href="rprog1.html#r-sessions-the-console-and-the-command-prompt"><i class="fa fa-check"></i><b>2.3.1</b> R sessions, the console, and the command prompt</a></li>
<li class="chapter" data-level="2.3.2" data-path="rprog1.html"><a href="rprog1.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>2.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="rprog1.html"><a href="rprog1.html#r-scripts"><i class="fa fa-check"></i><b>2.4</b> R scripts</a><ul>
<li class="chapter" data-level="2.4.1" data-path="rprog1.html"><a href="rprog1.html#commenting-code"><i class="fa fa-check"></i><b>2.4.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rprog1.html"><a href="rprog1.html#the-package-system"><i class="fa fa-check"></i><b>2.5</b> The “package” system</a><ul>
<li class="chapter" data-level="2.5.1" data-path="rprog1.html"><a href="rprog1.html#r-packages"><i class="fa fa-check"></i><b>2.5.1</b> R packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="rprog1.html"><a href="rprog1.html#installing-from-cran"><i class="fa fa-check"></i><b>2.5.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="2.5.3" data-path="rprog1.html"><a href="rprog1.html#loading-an-installed-package"><i class="fa fa-check"></i><b>2.5.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rprog1.html"><a href="rprog1.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>2.6</b> R’s most basic object types</a><ul>
<li class="chapter" data-level="2.6.1" data-path="rprog1.html"><a href="rprog1.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="rprog1.html"><a href="rprog1.html#dataframes"><i class="fa fa-check"></i><b>2.6.2</b> Dataframes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rprog2.html"><a href="rprog2.html"><i class="fa fa-check"></i><b>3</b> Getting and Cleaning Data</a><ul>
<li class="chapter" data-level="3.1" data-path="rprog2.html"><a href="rprog2.html#objectives-1"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rprog2.html"><a href="rprog2.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="rprog2.html"><a href="rprog2.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.3</b> Reading data into R</a><ul>
<li class="chapter" data-level="3.3.1" data-path="rprog2.html"><a href="rprog2.html#reading-local-flat-files"><i class="fa fa-check"></i><b>3.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="3.3.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>3.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rprog2.html"><a href="rprog2.html#directories-and-pathnames"><i class="fa fa-check"></i><b>3.4</b> Directories and pathnames</a><ul>
<li class="chapter" data-level="3.4.1" data-path="rprog2.html"><a href="rprog2.html#directory-structure"><i class="fa fa-check"></i><b>3.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="3.4.2" data-path="rprog2.html"><a href="rprog2.html#working-directory"><i class="fa fa-check"></i><b>3.4.2</b> Working directory</a></li>
<li class="chapter" data-level="3.4.3" data-path="rprog2.html"><a href="rprog2.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>3.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="3.4.4" data-path="rprog2.html"><a href="rprog2.html#diversion-paste"><i class="fa fa-check"></i><b>3.4.4</b> Diversion: <code>paste</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="rprog2.html"><a href="rprog2.html#reading-online-flat-files"><i class="fa fa-check"></i><b>3.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rprog2.html"><a href="rprog2.html#data-cleaning"><i class="fa fa-check"></i><b>3.5</b> Data cleaning</a><ul>
<li class="chapter" data-level="3.5.1" data-path="rprog2.html"><a href="rprog2.html#renaming-columns"><i class="fa fa-check"></i><b>3.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="3.5.2" data-path="rprog2.html"><a href="rprog2.html#selecting-columns"><i class="fa fa-check"></i><b>3.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="3.5.3" data-path="rprog2.html"><a href="rprog2.html#add-or-change-columns"><i class="fa fa-check"></i><b>3.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="3.5.4" data-path="rprog2.html"><a href="rprog2.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>3.5.4</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rprog2.html"><a href="rprog2.html#dates-and-filtering"><i class="fa fa-check"></i><b>3.6</b> Dates and filtering</a><ul>
<li class="chapter" data-level="3.6.1" data-path="rprog2.html"><a href="rprog2.html#dates-in-r"><i class="fa fa-check"></i><b>3.6.1</b> Dates in R</a></li>
<li class="chapter" data-level="3.6.2" data-path="rprog2.html"><a href="rprog2.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>3.6.2</b> Filtering to certain rows</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rprog2.html"><a href="rprog2.html#piping"><i class="fa fa-check"></i><b>3.7</b> Piping</a></li>
<li class="chapter" data-level="3.8" data-path="rprog2.html"><a href="rprog2.html#in-course-exercise"><i class="fa fa-check"></i><b>3.8</b> In-course Exercise</a><ul>
<li class="chapter" data-level="3.8.1" data-path="rprog2.html"><a href="rprog2.html#downloading-and-checking-out-the-example-data"><i class="fa fa-check"></i><b>3.8.1</b> Downloading and checking out the example data</a></li>
<li class="chapter" data-level="3.8.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-different-types-of-files"><i class="fa fa-check"></i><b>3.8.2</b> Reading in different types of files</a></li>
<li class="chapter" data-level="3.8.3" data-path="rprog2.html"><a href="rprog2.html#directory-structure-1"><i class="fa fa-check"></i><b>3.8.3</b> Directory structure</a></li>
<li class="chapter" data-level="3.8.4" data-path="rprog2.html"><a href="rprog2.html#cleaning-up-data-1"><i class="fa fa-check"></i><b>3.8.4</b> Cleaning up data #1</a></li>
<li class="chapter" data-level="3.8.5" data-path="rprog2.html"><a href="rprog2.html#cleaning-up-data-2"><i class="fa fa-check"></i><b>3.8.5</b> Cleaning up data #2</a></li>
<li class="chapter" data-level="3.8.6" data-path="rprog2.html"><a href="rprog2.html#piping-1"><i class="fa fa-check"></i><b>3.8.6</b> Piping</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="eda1.html"><a href="eda1.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis I: Univariate</a><ul>
<li class="chapter" data-level="4.1" data-path="eda1.html"><a href="eda1.html#univariate-data"><i class="fa fa-check"></i><b>4.1</b> Univariate Data</a><ul>
<li class="chapter" data-level="4.1.1" data-path="eda1.html"><a href="eda1.html#location-dispersion-and-shape"><i class="fa fa-check"></i><b>4.1.1</b> Location, Dispersion, and Shape</a></li>
<li class="chapter" data-level="4.1.2" data-path="eda1.html"><a href="eda1.html#example-location-and-dispersion"><i class="fa fa-check"></i><b>4.1.2</b> Example: Location and Dispersion</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="eda1.html"><a href="eda1.html#quantiles"><i class="fa fa-check"></i><b>4.2</b> Quantiles</a><ul>
<li class="chapter" data-level="4.2.1" data-path="eda1.html"><a href="eda1.html#quantiles-and-descriptive-statistics"><i class="fa fa-check"></i><b>4.2.1</b> Quantiles and Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="eda1.html"><a href="eda1.html#univariate-data-visualization"><i class="fa fa-check"></i><b>4.3</b> Univariate Data Visualization</a></li>
<li class="chapter" data-level="4.4" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot"><i class="fa fa-check"></i><b>4.4</b> Cumulative Distribution Plot</a><ul>
<li class="chapter" data-level="4.4.1" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot-example"><i class="fa fa-check"></i><b>4.4.1</b> Cumulative Distribution Plot Example</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="eda1.html"><a href="eda1.html#hist"><i class="fa fa-check"></i><b>4.5</b> Histogram</a><ul>
<li class="chapter" data-level="4.5.1" data-path="eda1.html"><a href="eda1.html#histogram-what-to-look-for"><i class="fa fa-check"></i><b>4.5.1</b> Histogram: what to look for?</a></li>
<li class="chapter" data-level="4.5.2" data-path="eda1.html"><a href="eda1.html#what-causes-skewed-histograms"><i class="fa fa-check"></i><b>4.5.2</b> What causes skewed histograms?</a></li>
<li class="chapter" data-level="4.5.3" data-path="eda1.html"><a href="eda1.html#pdf"><i class="fa fa-check"></i><b>4.5.3</b> Probability Density Function</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="eda1.html"><a href="eda1.html#time_series"><i class="fa fa-check"></i><b>4.6</b> Time-Series</a></li>
<li class="chapter" data-level="4.7" data-path="eda1.html"><a href="eda1.html#autocorr"><i class="fa fa-check"></i><b>4.7</b> Autocorrelation</a><ul>
<li class="chapter" data-level="4.7.1" data-path="eda1.html"><a href="eda1.html#partial-autocorrelation"><i class="fa fa-check"></i><b>4.7.1</b> Partial Autocorrelation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="rprog3.html"><a href="rprog3.html"><i class="fa fa-check"></i><b>5</b> Dates, Strings, and Tidying</a><ul>
<li class="chapter" data-level="5.1" data-path="rprog3.html"><a href="rprog3.html#objectives-2"><i class="fa fa-check"></i><b>5.1</b> Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="rprog3.html"><a href="rprog3.html#dates"><i class="fa fa-check"></i><b>5.2</b> Dates</a></li>
<li class="chapter" data-level="5.3" data-path="rprog3.html"><a href="rprog3.html#dates-in-r-1"><i class="fa fa-check"></i><b>5.3</b> Dates in R</a></li>
<li class="chapter" data-level="5.4" data-path="rprog3.html"><a href="rprog3.html#strings"><i class="fa fa-check"></i><b>5.4</b> Strings</a></li>
<li class="chapter" data-level="5.5" data-path="rprog3.html"><a href="rprog3.html#tidy-data"><i class="fa fa-check"></i><b>5.5</b> Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="eda2.html"><a href="eda2.html"><i class="fa fa-check"></i><b>6</b> Exploratory Data Analysis II: Multivariate</a><ul>
<li class="chapter" data-level="6.1" data-path="eda2.html"><a href="eda2.html#bivariate"><i class="fa fa-check"></i><b>6.1</b> Bivariate Data</a></li>
<li class="chapter" data-level="6.2" data-path="eda2.html"><a href="eda2.html#scatt"><i class="fa fa-check"></i><b>6.2</b> Scatterplot</a></li>
<li class="chapter" data-level="6.3" data-path="eda2.html"><a href="eda2.html#QQ"><i class="fa fa-check"></i><b>6.3</b> Q-Q Plot (Quantile-Quantile)</a></li>
<li class="chapter" data-level="6.4" data-path="eda2.html"><a href="eda2.html#Tukey"><i class="fa fa-check"></i><b>6.4</b> Tukey Mean Difference Plot</a></li>
<li class="chapter" data-level="6.5" data-path="eda2.html"><a href="eda2.html#boxplot-box"><i class="fa fa-check"></i><b>6.5</b> Boxplot (#box)</a></li>
<li class="chapter" data-level="6.6" data-path="eda2.html"><a href="eda2.html#exploring-multivariate-data"><i class="fa fa-check"></i><b>6.6</b> Exploring Multivariate Data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="measure.html"><a href="measure.html"><i class="fa fa-check"></i><b>7</b> Measurement</a><ul>
<li class="chapter" data-level="7.1" data-path="measure.html"><a href="measure.html#sampling"><i class="fa fa-check"></i><b>7.1</b> Sampling</a><ul>
<li class="chapter" data-level="7.1.1" data-path="measure.html"><a href="measure.html#samples-vs.populations"><i class="fa fa-check"></i><b>7.1.1</b> Samples vs. Populations</a></li>
<li class="chapter" data-level="7.1.2" data-path="measure.html"><a href="measure.html#collecting-a-sample"><i class="fa fa-check"></i><b>7.1.2</b> Collecting a sample</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="measure.html"><a href="measure.html#figures-of-merit"><i class="fa fa-check"></i><b>7.2</b> Figures of Merit</a><ul>
<li class="chapter" data-level="7.2.1" data-path="measure.html"><a href="measure.html#accuracy"><i class="fa fa-check"></i><b>7.2.1</b> Accuracy</a></li>
<li class="chapter" data-level="7.2.2" data-path="measure.html"><a href="measure.html#precision"><i class="fa fa-check"></i><b>7.2.2</b> Precision</a></li>
<li class="chapter" data-level="7.2.3" data-path="measure.html"><a href="measure.html#bias"><i class="fa fa-check"></i><b>7.2.3</b> Bias</a></li>
<li class="chapter" data-level="7.2.4" data-path="measure.html"><a href="measure.html#limit-of-detection"><i class="fa fa-check"></i><b>7.2.4</b> Limit of Detection</a></li>
<li class="chapter" data-level="7.2.5" data-path="measure.html"><a href="measure.html#failure-and-reliability"><i class="fa fa-check"></i><b>7.2.5</b> Failure and Reliability</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rprog4.html"><a href="rprog4.html"><i class="fa fa-check"></i><b>8</b> Functional Programming</a><ul>
<li class="chapter" data-level="8.1" data-path="rprog4.html"><a href="rprog4.html#step-iii-1"><i class="fa fa-check"></i><b>8.1</b> Step III-1</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="eda3.html"><a href="eda3.html"><i class="fa fa-check"></i><b>9</b> Tips and Tricks for Data Exploration</a><ul>
<li class="chapter" data-level="9.1" data-path="eda3.html"><a href="eda3.html#transformation"><i class="fa fa-check"></i><b>9.1</b> Transformation</a></li>
<li class="chapter" data-level="9.2" data-path="eda3.html"><a href="eda3.html#centering"><i class="fa fa-check"></i><b>9.2</b> Centering</a></li>
<li class="chapter" data-level="9.3" data-path="eda3.html"><a href="eda3.html#normalizing"><i class="fa fa-check"></i><b>9.3</b> Normalizing</a><ul>
<li class="chapter" data-level="9.3.1" data-path="eda3.html"><a href="eda3.html#standardizing"><i class="fa fa-check"></i><b>9.3.1</b> Standardizing</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="eda3.html"><a href="eda3.html#stratification"><i class="fa fa-check"></i><b>9.4</b> Stratification</a></li>
<li class="chapter" data-level="9.5" data-path="eda3.html"><a href="eda3.html#censoring-and-truncating"><i class="fa fa-check"></i><b>9.5</b> Censoring and Truncating</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>10</b> Modeling</a><ul>
<li class="chapter" data-level="10.1" data-path="model.html"><a href="model.html#fitting"><i class="fa fa-check"></i><b>10.1</b> Fitting</a></li>
<li class="chapter" data-level="10.2" data-path="model.html"><a href="model.html#linear-models"><i class="fa fa-check"></i><b>10.2</b> Linear Models</a><ul>
<li class="chapter" data-level="10.2.1" data-path="model.html"><a href="model.html#assumptions-of-linear-regression"><i class="fa fa-check"></i><b>10.2.1</b> Assumptions of Linear Regression</a></li>
<li class="chapter" data-level="10.2.2" data-path="model.html"><a href="model.html#diagnostics"><i class="fa fa-check"></i><b>10.2.2</b> Diagnostics</a></li>
<li class="chapter" data-level="10.2.3" data-path="model.html"><a href="model.html#ordinary-least-squares"><i class="fa fa-check"></i><b>10.2.3</b> Ordinary Least Squares</a></li>
<li class="chapter" data-level="10.2.4" data-path="model.html"><a href="model.html#weighted-least-squares"><i class="fa fa-check"></i><b>10.2.4</b> Weighted Least Squares</a></li>
<li class="chapter" data-level="10.2.5" data-path="model.html"><a href="model.html#deming-regression"><i class="fa fa-check"></i><b>10.2.5</b> Deming Regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="simulate.html"><a href="simulate.html"><i class="fa fa-check"></i><b>11</b> Simulation</a><ul>
<li class="chapter" data-level="11.1" data-path="simulate.html"><a href="simulate.html#introduction-to-simulation"><i class="fa fa-check"></i><b>11.1</b> Introduction to simulation</a></li>
<li class="chapter" data-level="11.2" data-path="simulate.html"><a href="simulate.html#simulation-example"><i class="fa fa-check"></i><b>11.2</b> Simulation Example:</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="dist.html"><a href="dist.html"><i class="fa fa-check"></i><b>12</b> Appendix: Reference Distributions</a><ul>
<li class="chapter" data-level="12.1" data-path="dist.html"><a href="dist.html#unif_dist"><i class="fa fa-check"></i><b>12.1</b> Uniform Distribution</a><ul>
<li class="chapter" data-level="12.1.1" data-path="dist.html"><a href="dist.html#characteristic-plots-uniform-distribution"><i class="fa fa-check"></i><b>12.1.1</b> Characteristic Plots: Uniform Distribution</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="dist.html"><a href="dist.html#normal_dist"><i class="fa fa-check"></i><b>12.2</b> Normal Distribution</a><ul>
<li class="chapter" data-level="12.2.1" data-path="dist.html"><a href="dist.html#normal-distribution-characteristic-plots"><i class="fa fa-check"></i><b>12.2.1</b> Normal Distribution: Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="dist.html"><a href="dist.html#log-normal-distribution"><i class="fa fa-check"></i><b>12.3</b> Log-normal Distribution</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Data Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rprog3" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Dates, Strings, and Tidying</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;dplyr&quot;</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">daily_show &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/daily_show_guests.csv&quot;</span>, <span class="dt">skip =</span> <span class="dv">4</span>)</a></code></pre></div>
<div id="objectives-2" class="section level2">
<h2><span class="header-section-number">5.1</span> Objectives</h2>
<p>After this chapter, you should (know / understand / be able to ):</p>
<ul>
<li>Convert a column to a date format using <code>lubridate</code> functions</li>
<li>Extract information from a date object (e.g., month, year, day of week) using <code>lubridate</code> functions</li>
<li>Search, organize, and visualize data that are linked according to date objects</li>
<li>Manipulate character strings using the <code>stringr</code> package of functions</li>
<li>Parse strings using regular expressions (regex)</li>
<li>Apply the <code>tidyr</code> package of functions to create tidy data</li>
</ul>
</div>
<div id="dates" class="section level2">
<h2><span class="header-section-number">5.2</span> Dates</h2>
</div>
<div id="dates-in-r-1" class="section level2">
<h2><span class="header-section-number">5.3</span> Dates in R</h2>
<p>As part of the data cleaning process, you may want to change the class of some
of the columns in the dataframe. For example, you may want to change a column
from a character to a date.</p>
<p>Here are some of the most common vector classes in R:</p>
<table>
<thead>
<tr class="header">
<th>Class</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>character</code></td>
<td>“Chemistry”, “Physics”, “Mathematics”</td>
</tr>
<tr class="even">
<td><code>numeric</code></td>
<td>10, 20, 30, 40</td>
</tr>
<tr class="odd">
<td><code>factor</code></td>
<td>Male [underlying number: 1], Female [2]</td>
</tr>
<tr class="even">
<td><code>Date</code></td>
<td>“2010-01-01” [underlying number: 14,610]</td>
</tr>
<tr class="odd">
<td><code>logical</code></td>
<td>TRUE, FALSE</td>
</tr>
</tbody>
</table>
<p>To find out the class of a vector (including a column in a dataframe – remember
each column can be thought of as a vector), you can use <code>class()</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">class</span>(daily_show<span class="op">$</span>date)</a></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `date`.</code></pre>
<pre><code>## [1] &quot;NULL&quot;</code></pre>
<p>It is especially common to need to convert dates during the data cleaning
process, since date columns will usually be read into R as characters or
factors—you can do some interesting things with vectors that are in a Date
class that you cannot do with a vector in a character class.</p>
<p>To convert a vector to the <code>Date</code> class, if you’d like to only use base R, you
can use the <code>as.Date</code> function. I’ll walk through how to use <code>as.Date</code>, since
it’s often used in older R code. However, I recommend in your own code that you
instead use the <code>lubridate</code> package, which I’ll talk about later in this
section.</p>
<p>To convert a vector to the <code>Date</code> class, you can use functions in the
<code>lubridate</code> package. This package has a series of functions based on the order
that date elements are given in the incoming character with date information.
For example, in “12/31/99”, the date elements are given in the order of month
(<strong>m</strong>), day (<strong>d</strong>), year (<strong>y</strong>), so this character string could be converted
to the date class with the function <code>mdy</code>. As another example, the <code>ymd</code>
function from lubridate can be used to parse a column into a Date class,
regardless of the original format of the date, as long as the date elements are
in the order: year, month, day. For example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;lubridate&quot;</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">ymd</span>(<span class="st">&quot;2008-10-13&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2008-10-13&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">ymd</span>(<span class="st">&quot;&#39;08 Oct 13&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2008-10-13&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">ymd</span>(<span class="st">&quot;&#39;08 Oct 13&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;2008-10-13&quot;</code></pre>
<p>To convert the <code>date</code> column in the <code>daily_show</code> data into a Date
class, then, you can run:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">library</span>(<span class="dt">package =</span> <span class="st">&quot;lubridate&quot;</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw">class</span>(<span class="dt">x =</span> daily_show<span class="op">$</span>date) <span class="co"># Check the class of the &#39;date&#39; column before mutating it</span></a></code></pre></div>
<pre><code>## Warning: Unknown or uninitialised column: `date`.</code></pre>
<pre><code>## [1] &quot;NULL&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">daily_show &lt;-<span class="st"> </span><span class="kw">rename</span>(<span class="dt">.data =</span> daily_show,</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">                     <span class="dt">year =</span> YEAR,</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">                     <span class="dt">job =</span> GoogleKnowlege_Occupation, </a>
<a class="sourceLine" id="cb14-4" data-line-number="4">                     <span class="dt">date =</span> Show, </a>
<a class="sourceLine" id="cb14-5" data-line-number="5">                     <span class="dt">category =</span> Group,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">                     <span class="dt">guest_name =</span> Raw_Guest_List)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7"></a>
<a class="sourceLine" id="cb14-8" data-line-number="8">daily_show &lt;-<span class="st"> </span><span class="kw">mutate</span>(<span class="dt">.data =</span> daily_show,</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">                     <span class="dt">date =</span> <span class="kw">mdy</span>(date))</a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="kw">head</span>(<span class="dt">x =</span> daily_show, <span class="dt">n =</span> <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##    year job                date       category guest_name     
##   &lt;dbl&gt; &lt;chr&gt;              &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;          
## 1  1999 actor              1999-01-11 Acting   Michael J. Fox 
## 2  1999 Comedian           1999-01-12 Comedy   Sandra Bernhard
## 3  1999 television actress 1999-01-13 Acting   Tracey Ullman</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">class</span>(<span class="dt">x =</span> daily_show<span class="op">$</span>date) <span class="co"># Check the class of the &#39;date&#39; column after mutating it</span></a></code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>Once you have an object in the <code>Date</code> class, you can do things like plot by
date, calculate the range of dates, and calculate the total number of days the
dataset covers:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">range</span>(daily_show<span class="op">$</span>date)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">diff</span>(<span class="dt">x =</span> <span class="kw">range</span>(daily_show<span class="op">$</span>date))</a></code></pre></div>
<p>We could have used these to transform the date in <code>daily_show</code>, using the following pipe chain:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">daily_show &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="dt">file =</span> <span class="st">&quot;data/daily_show_guests.csv&quot;</span>,</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">                       <span class="dt">skip =</span> <span class="dv">4</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">job =</span> GoogleKnowlege_Occupation, </a>
<a class="sourceLine" id="cb19-4" data-line-number="4">         <span class="dt">date =</span> Show,</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">         <span class="dt">category =</span> Group,</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">         <span class="dt">guest_name =</span> Raw_Guest_List) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>YEAR) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">mdy</span>(date)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="st">  </span><span class="kw">filter</span>(category <span class="op">==</span><span class="st"> &quot;Science&quot;</span>)</a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="kw">head</span>(<span class="dt">x =</span> daily_show, <span class="dt">n =</span> <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   job          date       category guest_name     
##   &lt;chr&gt;        &lt;date&gt;     &lt;chr&gt;    &lt;chr&gt;          
## 1 neurosurgeon 2003-04-28 Science  Dr Sanjay Gupta
## 2 scientist    2004-01-13 Science  Catherine Weitz</code></pre>
<p>The <code>lubridate</code> package also includes functions to pull out certain elements of a date, including:</p>
<ul>
<li><code>wday</code></li>
<li><code>mday</code></li>
<li><code>yday</code></li>
<li><code>month</code></li>
<li><code>quarter</code></li>
<li><code>year</code></li>
</ul>
<p>For example, we could use <code>wday</code> to create a new column with the weekday of each show:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">mutate</span>(<span class="dt">.data =</span> daily_show,</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">       <span class="dt">show_day =</span> <span class="kw">wday</span>(<span class="dt">x =</span> date, <span class="dt">label =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(date, show_day, guest_name) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="st">  </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   date       show_day guest_name            
##   &lt;date&gt;     &lt;ord&gt;    &lt;chr&gt;                 
## 1 2003-04-28 Mon      Dr Sanjay Gupta       
## 2 2004-01-13 Tue      Catherine Weitz       
## 3 2004-06-15 Tue      Hassan Ibrahim        
## 4 2005-09-06 Tue      Dr. Marc Siegel       
## 5 2006-02-13 Mon      Astronaut Mike Mullane</code></pre>
<div class="rmdwarning">
<p>
R functions tend to use the timezone of <strong>YOUR</strong> computer’s operating system by default, or UTC, or GMT. You need to be careful when working with dates and times to either specify the time zone or convince yourself the default behavior works for your application.
</p>
</div>
</div>
<div id="strings" class="section level2">
<h2><span class="header-section-number">5.4</span> Strings</h2>
</div>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">5.5</span> Tidy Data</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="eda1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="eda2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
