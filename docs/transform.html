<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Transformations and Other Tricks | Engineering Data Analysis in R</title>
  <meta name="description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  <meta name="generator" content="bookdown 0.44 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Transformations and Other Tricks | Engineering Data Analysis in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Transformations and Other Tricks | Engineering Data Analysis in R" />
  
  <meta name="twitter:description" content="This is an undergraduate technical elective course for mechanical engineers who wish to lean about data analysis using the R programming language." />
  

<meta name="author" content="John Volckens" />


<meta name="date" content="2025-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rprog4.html"/>
<link rel="next" href="measure.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Engineering Data Analysis in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-use-this-book"><i class="fa fa-check"></i><b>1.1</b> How to use this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#grading"><i class="fa fa-check"></i><b>1.3</b> Grading</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#grading-for-mech-476"><i class="fa fa-check"></i><b>1.3.1</b> Grading for MECH 476</a></li>
<li class="chapter" data-level="1.3.2" data-path="index.html"><a href="index.html#homework-submission"><i class="fa fa-check"></i><b>1.3.2</b> Homework submission</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#course-set-up"><i class="fa fa-check"></i><b>1.4</b> Course set-up</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#install-r-and-rstudio"><i class="fa fa-check"></i><b>1.4.1</b> Install R and RStudio</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#install-git-and-create-a-github-account"><i class="fa fa-check"></i><b>1.4.2</b> Install Git and create a GitHub account</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#connect-git-github-and-rstudio"><i class="fa fa-check"></i><b>1.4.3</b> Connect Git, GitHub, and RStudio</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#create-new-project-github-first"><i class="fa fa-check"></i><b>1.4.4</b> Create new project, GitHub first</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#use-rstudiogithub-system-for-homework-submission"><i class="fa fa-check"></i><b>1.4.5</b> Use RStudio/GitHub system for homework submission</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#confirm-successful-set-up"><i class="fa fa-check"></i><b>1.4.6</b> Confirm successful set-up</a></li>
<li class="chapter" data-level="1.4.7" data-path="index.html"><a href="index.html#asking-for-help-properly"><i class="fa fa-check"></i><b>1.4.7</b> Asking for help (properly)</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#coursebook"><i class="fa fa-check"></i><b>1.5</b> Coursebook</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#other-helpful-books-not-required"><i class="fa fa-check"></i><b>1.5.1</b> Other helpful books (not required)</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.6</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rprog1.html"><a href="rprog1.html"><i class="fa fa-check"></i><b>2</b> The R Programming Environment</a>
<ul>
<li class="chapter" data-level="2.1" data-path="rprog1.html"><a href="rprog1.html#ch.-2-objectives"><i class="fa fa-check"></i><b>2.1</b> Ch. 2 Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="rprog1.html"><a href="rprog1.html#r-and-r-studio"><i class="fa fa-check"></i><b>2.2</b> R and R Studio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="rprog1.html"><a href="rprog1.html#what-is-r"><i class="fa fa-check"></i><b>2.2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2.2" data-path="rprog1.html"><a href="rprog1.html#free-and-open-source-software"><i class="fa fa-check"></i><b>2.2.2</b> Free and open-source software</a></li>
<li class="chapter" data-level="2.2.3" data-path="rprog1.html"><a href="rprog1.html#what-is-rstudio"><i class="fa fa-check"></i><b>2.2.3</b> What is RStudio?</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="rprog1.html"><a href="rprog1.html#communicating-with-r"><i class="fa fa-check"></i><b>2.3</b> Communicating with R</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="rprog1.html"><a href="rprog1.html#r-sessions-console-and-command-prompt"><i class="fa fa-check"></i><b>2.3.1</b> R sessions, console, and command prompt</a></li>
<li class="chapter" data-level="2.3.2" data-path="rprog1.html"><a href="rprog1.html#r-expressions-function-calls-and-objects"><i class="fa fa-check"></i><b>2.3.2</b> R expressions, function calls, and objects</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="rprog1.html"><a href="rprog1.html#r-scripts"><i class="fa fa-check"></i><b>2.4</b> R scripts</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="rprog1.html"><a href="rprog1.html#commenting-code"><i class="fa fa-check"></i><b>2.4.1</b> Commenting code</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="rprog1.html"><a href="rprog1.html#the-package-system"><i class="fa fa-check"></i><b>2.5</b> The “package” system</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="rprog1.html"><a href="rprog1.html#r-packages"><i class="fa fa-check"></i><b>2.5.1</b> R packages</a></li>
<li class="chapter" data-level="2.5.2" data-path="rprog1.html"><a href="rprog1.html#installing-from-cran"><i class="fa fa-check"></i><b>2.5.2</b> Installing from CRAN</a></li>
<li class="chapter" data-level="2.5.3" data-path="rprog1.html"><a href="rprog1.html#loading-an-installed-package"><i class="fa fa-check"></i><b>2.5.3</b> Loading an installed package</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="rprog1.html"><a href="rprog1.html#rs-most-basic-object-types"><i class="fa fa-check"></i><b>2.6</b> R’s most basic object types</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="rprog1.html"><a href="rprog1.html#vectors"><i class="fa fa-check"></i><b>2.6.1</b> Vectors</a></li>
<li class="chapter" data-level="2.6.2" data-path="rprog1.html"><a href="rprog1.html#dataframes"><i class="fa fa-check"></i><b>2.6.2</b> Dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="rprog1.html"><a href="rprog1.html#chapter-2-exercises"><i class="fa fa-check"></i><b>2.7</b> Chapter 2 Exercises</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="rprog1.html"><a href="rprog1.html#set-1-session-helpfiles-scripts-and-objects"><i class="fa fa-check"></i><b>2.7.1</b> Set 1: Session, helpfiles, scripts, and objects</a></li>
<li class="chapter" data-level="2.7.2" data-path="rprog1.html"><a href="rprog1.html#set-2-loading-and-using-packages"><i class="fa fa-check"></i><b>2.7.2</b> Set 2: Loading and using packages</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="rprog1.html"><a href="rprog1.html#chapter-2-homework"><i class="fa fa-check"></i><b>2.8</b> Chapter 2 Homework</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="rprog1.html"><a href="rprog1.html#special-swirl-commands"><i class="fa fa-check"></i><b>2.8.1</b> Special <code>swirl</code> commands</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rprog2.html"><a href="rprog2.html"><i class="fa fa-check"></i><b>3</b> Getting and Cleaning Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="rprog2.html"><a href="rprog2.html#ch.-3-objectives"><i class="fa fa-check"></i><b>3.1</b> Ch. 3 Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="rprog2.html"><a href="rprog2.html#overview"><i class="fa fa-check"></i><b>3.2</b> Overview</a></li>
<li class="chapter" data-level="3.3" data-path="rprog2.html"><a href="rprog2.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.3</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="rprog2.html"><a href="rprog2.html#reading-local-flat-files"><i class="fa fa-check"></i><b>3.3.1</b> Reading local flat files</a></li>
<li class="chapter" data-level="3.3.2" data-path="rprog2.html"><a href="rprog2.html#reading-in-other-file-types"><i class="fa fa-check"></i><b>3.3.2</b> Reading in other file types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rprog2.html"><a href="rprog2.html#directories-and-pathnames"><i class="fa fa-check"></i><b>3.4</b> Directories and pathnames</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="rprog2.html"><a href="rprog2.html#directory-structure"><i class="fa fa-check"></i><b>3.4.1</b> Directory structure</a></li>
<li class="chapter" data-level="3.4.2" data-path="rprog2.html"><a href="rprog2.html#working-directory"><i class="fa fa-check"></i><b>3.4.2</b> Working directory</a></li>
<li class="chapter" data-level="3.4.3" data-path="rprog2.html"><a href="rprog2.html#file-and-directory-pathnames"><i class="fa fa-check"></i><b>3.4.3</b> File and directory pathnames</a></li>
<li class="chapter" data-level="3.4.4" data-path="rprog2.html"><a href="rprog2.html#tangent-paste"><i class="fa fa-check"></i><b>3.4.4</b> Tangent: <code>paste</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="rprog2.html"><a href="rprog2.html#reading-online-flat-files"><i class="fa fa-check"></i><b>3.4.5</b> Reading online flat files</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rprog2.html"><a href="rprog2.html#data-cleaning"><i class="fa fa-check"></i><b>3.5</b> Data cleaning</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="rprog2.html"><a href="rprog2.html#renaming-columns"><i class="fa fa-check"></i><b>3.5.1</b> Renaming columns</a></li>
<li class="chapter" data-level="3.5.2" data-path="rprog2.html"><a href="rprog2.html#selecting-columns"><i class="fa fa-check"></i><b>3.5.2</b> Selecting columns</a></li>
<li class="chapter" data-level="3.5.3" data-path="rprog2.html"><a href="rprog2.html#add-or-change-columns"><i class="fa fa-check"></i><b>3.5.3</b> Add or change columns</a></li>
<li class="chapter" data-level="3.5.4" data-path="rprog2.html"><a href="rprog2.html#filtering-to-certain-rows"><i class="fa fa-check"></i><b>3.5.4</b> Filtering to certain rows</a></li>
<li class="chapter" data-level="3.5.5" data-path="rprog2.html"><a href="rprog2.html#base-r-equivalents-to-dplyr-functions"><i class="fa fa-check"></i><b>3.5.5</b> Base R equivalents to <code>dplyr</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rprog2.html"><a href="rprog2.html#merging-data-frames"><i class="fa fa-check"></i><b>3.6</b> Merging Data Frames</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="rprog2.html"><a href="rprog2.html#row-binding"><i class="fa fa-check"></i><b>3.6.1</b> Row Binding</a></li>
<li class="chapter" data-level="3.6.2" data-path="rprog2.html"><a href="rprog2.html#column-binding-_join"><i class="fa fa-check"></i><b>3.6.2</b> Column Binding (_join)</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rprog2.html"><a href="rprog2.html#piping"><i class="fa fa-check"></i><b>3.7</b> Piping</a></li>
<li class="chapter" data-level="3.8" data-path="rprog2.html"><a href="rprog2.html#markdowns"><i class="fa fa-check"></i><b>3.8</b> Markdowns</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="rprog2.html"><a href="rprog2.html#r-markdowns"><i class="fa fa-check"></i><b>3.8.1</b> R Markdowns</a></li>
<li class="chapter" data-level="3.8.2" data-path="rprog2.html"><a href="rprog2.html#header"><i class="fa fa-check"></i><b>3.8.2</b> Header</a></li>
<li class="chapter" data-level="3.8.3" data-path="rprog2.html"><a href="rprog2.html#text"><i class="fa fa-check"></i><b>3.8.3</b> Text</a></li>
<li class="chapter" data-level="3.8.4" data-path="rprog2.html"><a href="rprog2.html#code-chunks"><i class="fa fa-check"></i><b>3.8.4</b> Code Chunks</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="rprog2.html"><a href="rprog2.html#chapter-3-exercises"><i class="fa fa-check"></i><b>3.9</b> Chapter 3 Exercises</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="rprog2.html"><a href="rprog2.html#set-1-pathnames-and-data-import"><i class="fa fa-check"></i><b>3.9.1</b> Set 1: Pathnames and data import</a></li>
<li class="chapter" data-level="3.9.2" data-path="rprog2.html"><a href="rprog2.html#set-2-data-wrangling-and-piping"><i class="fa fa-check"></i><b>3.9.2</b> Set 2: Data wrangling and piping</a></li>
<li class="chapter" data-level="3.9.3" data-path="rprog2.html"><a href="rprog2.html#set-3-r-markdown"><i class="fa fa-check"></i><b>3.9.3</b> Set 3: R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="rprog2.html"><a href="rprog2.html#chapter-3-homework"><i class="fa fa-check"></i><b>3.10</b> Chapter 3 Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>4</b> Data Visualization with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="dataviz.html"><a href="dataviz.html#chapter-4-objectives"><i class="fa fa-check"></i><b>4.1</b> Chapter 4 Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dataviz.html"><a href="dataviz.html#install-and-load-ggplot2"><i class="fa fa-check"></i><b>4.2</b> Install and load <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.3" data-path="dataviz.html"><a href="dataviz.html#steps-to-create-a-ggplot2-object"><i class="fa fa-check"></i><b>4.3</b> Steps to create a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.4" data-path="dataviz.html"><a href="dataviz.html#initializing-a-ggplot2-object"><i class="fa fa-check"></i><b>4.4</b> Initializing a <code>ggplot2</code> object</a></li>
<li class="chapter" data-level="4.5" data-path="dataviz.html"><a href="dataviz.html#plot-aesthetics"><i class="fa fa-check"></i><b>4.5</b> Plot aesthetics</a></li>
<li class="chapter" data-level="4.6" data-path="dataviz.html"><a href="dataviz.html#adding-geoms"><i class="fa fa-check"></i><b>4.6</b> Adding geoms</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="dataviz.html"><a href="dataviz.html#aesthetic-override-a-warning"><i class="fa fa-check"></i><b>4.6.1</b> Aesthetic override: a warning</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="dataviz.html"><a href="dataviz.html#shapes-and-colors"><i class="fa fa-check"></i><b>4.7</b> Shapes and colors</a></li>
<li class="chapter" data-level="4.8" data-path="dataviz.html"><a href="dataviz.html#scales-useful-plot-edits"><i class="fa fa-check"></i><b>4.8</b> Scales: useful plot edits</a></li>
<li class="chapter" data-level="4.9" data-path="dataviz.html"><a href="dataviz.html#ggplot2-example-1"><i class="fa fa-check"></i><b>4.9</b> <code>ggplot2</code> example 1</a></li>
<li class="chapter" data-level="4.10" data-path="dataviz.html"><a href="dataviz.html#ggplot2-example-2"><i class="fa fa-check"></i><b>4.10</b> <code>ggplot2</code> example 2</a></li>
<li class="chapter" data-level="4.11" data-path="dataviz.html"><a href="dataviz.html#store-and-save-ggplot2-objects"><i class="fa fa-check"></i><b>4.11</b> Store and save <code>ggplot2</code> objects</a></li>
<li class="chapter" data-level="4.12" data-path="dataviz.html"><a href="dataviz.html#getting-help-with-ggplot2"><i class="fa fa-check"></i><b>4.12</b> Getting help with <code>ggplot2</code></a></li>
<li class="chapter" data-level="4.13" data-path="dataviz.html"><a href="dataviz.html#chapter-4-homework"><i class="fa fa-check"></i><b>4.13</b> Chapter 4 Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="eda1.html"><a href="eda1.html"><i class="fa fa-check"></i><b>5</b> Univariate Data Exploration</a>
<ul>
<li class="chapter" data-level="5.1" data-path="eda1.html"><a href="eda1.html#ch.-5-objectives"><i class="fa fa-check"></i><b>5.1</b> Ch. 5 Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="eda1.html"><a href="eda1.html#univar"><i class="fa fa-check"></i><b>5.2</b> Univariate Data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="eda1.html"><a href="eda1.html#location-dispersion-and-shape"><i class="fa fa-check"></i><b>5.2.1</b> Location, Dispersion, and Shape</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="eda1.html"><a href="eda1.html#quantile"><i class="fa fa-check"></i><b>5.3</b> Quantiles</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="eda1.html"><a href="eda1.html#descriptive-statistics"><i class="fa fa-check"></i><b>5.3.1</b> Descriptive Statistics</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="eda1.html"><a href="eda1.html#univariate-data-visualization"><i class="fa fa-check"></i><b>5.4</b> Univariate Data Visualization</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="eda1.html"><a href="eda1.html#summary-vs.-enumerative-plots"><i class="fa fa-check"></i><b>5.4.1</b> Summary vs. Enumerative Plots</a></li>
<li class="chapter" data-level="5.4.2" data-path="eda1.html"><a href="eda1.html#cumulative-distribution-plot"><i class="fa fa-check"></i><b>5.4.2</b> Cumulative Distribution Plot</a></li>
<li class="chapter" data-level="5.4.3" data-path="eda1.html"><a href="eda1.html#hist"><i class="fa fa-check"></i><b>5.4.3</b> Histogram</a></li>
<li class="chapter" data-level="5.4.4" data-path="eda1.html"><a href="eda1.html#box"><i class="fa fa-check"></i><b>5.4.4</b> Boxplot</a></li>
<li class="chapter" data-level="5.4.5" data-path="eda1.html"><a href="eda1.html#time_series"><i class="fa fa-check"></i><b>5.4.5</b> Time-Series Plot</a></li>
<li class="chapter" data-level="5.4.6" data-path="eda1.html"><a href="eda1.html#autocorr"><i class="fa fa-check"></i><b>5.4.6</b> Autocorrelation Plot</a></li>
<li class="chapter" data-level="5.4.7" data-path="eda1.html"><a href="eda1.html#partial-autocorrelation-plot"><i class="fa fa-check"></i><b>5.4.7</b> Partial Autocorrelation Plot</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="eda1.html"><a href="eda1.html#exploring-data"><i class="fa fa-check"></i><b>5.5</b> Exploring Data</a></li>
<li class="chapter" data-level="5.6" data-path="eda1.html"><a href="eda1.html#chapter-5-homework"><i class="fa fa-check"></i><b>5.6</b> Chapter 5 Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rprog3.html"><a href="rprog3.html"><i class="fa fa-check"></i><b>6</b> Strings, Dates, and Tidying</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rprog3.html"><a href="rprog3.html#chapter-6-objectives"><i class="fa fa-check"></i><b>6.1</b> Chapter 6 Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="rprog3.html"><a href="rprog3.html#strings"><i class="fa fa-check"></i><b>6.2</b> Strings</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="rprog3.html"><a href="rprog3.html#string-detect-match-subset"><i class="fa fa-check"></i><b>6.2.1</b> String detect, match, subset</a></li>
<li class="chapter" data-level="6.2.2" data-path="rprog3.html"><a href="rprog3.html#regular-expressions"><i class="fa fa-check"></i><b>6.2.2</b> Regular Expressions</a></li>
<li class="chapter" data-level="6.2.3" data-path="rprog3.html"><a href="rprog3.html#string-split-replace"><i class="fa fa-check"></i><b>6.2.3</b> String split, replace</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="rprog3.html"><a href="rprog3.html#dates-and-date-times"><i class="fa fa-check"></i><b>6.3</b> Dates and Date-times</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="rprog3.html"><a href="rprog3.html#dates-and-times-in-base-r"><i class="fa fa-check"></i><b>6.3.1</b> Dates and Times in base R</a></li>
<li class="chapter" data-level="6.3.2" data-path="rprog3.html"><a href="rprog3.html#date-time-formats"><i class="fa fa-check"></i><b>6.3.2</b> Date-time formats</a></li>
<li class="chapter" data-level="6.3.3" data-path="rprog3.html"><a href="rprog3.html#date-time-classes-in-r"><i class="fa fa-check"></i><b>6.3.3</b> Date-time classes in R</a></li>
<li class="chapter" data-level="6.3.4" data-path="rprog3.html"><a href="rprog3.html#reading-and-classifying-date-times"><i class="fa fa-check"></i><b>6.3.4</b> Reading and classifying date-times</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="rprog3.html"><a href="rprog3.html#lubridate"><i class="fa fa-check"></i><b>6.4</b> <code>lubridate</code></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="rprog3.html"><a href="rprog3.html#parsing-functions-in-lubridate"><i class="fa fa-check"></i><b>6.4.1</b> Parsing functions in <code>lubridate</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="rprog3.html"><a href="rprog3.html#date-time-manipulation-with-lubridate"><i class="fa fa-check"></i><b>6.4.2</b> Date-time manipulation with <code>lubridate</code></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="rprog3.html"><a href="rprog3.html#tidy-data"><i class="fa fa-check"></i><b>6.5</b> Tidy Data</a></li>
<li class="chapter" data-level="6.6" data-path="rprog3.html"><a href="rprog3.html#chapter-6-exercises"><i class="fa fa-check"></i><b>6.6</b> Chapter 6 Exercises</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="rprog3.html"><a href="rprog3.html#set-1-data-import-and-manipulation"><i class="fa fa-check"></i><b>6.6.1</b> Set 1: Data import and manipulation</a></li>
<li class="chapter" data-level="6.6.2" data-path="rprog3.html"><a href="rprog3.html#set-2-counting"><i class="fa fa-check"></i><b>6.6.2</b> Set 2: Counting</a></li>
<li class="chapter" data-level="6.6.3" data-path="rprog3.html"><a href="rprog3.html#set-3-weekly-tweets"><i class="fa fa-check"></i><b>6.6.3</b> Set 3: Weekly tweets</a></li>
<li class="chapter" data-level="6.6.4" data-path="rprog3.html"><a href="rprog3.html#are-tweets-correlated-in-time"><i class="fa fa-check"></i><b>6.6.4</b> Are tweets correlated in time?</a></li>
<li class="chapter" data-level="6.6.5" data-path="rprog3.html"><a href="rprog3.html#set-4-csu-vs.-cu"><i class="fa fa-check"></i><b>6.6.5</b> Set 4: CSU vs. CU</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="rprog3.html"><a href="rprog3.html#chapter-6-homework"><i class="fa fa-check"></i><b>6.7</b> Chapter 6 Homework</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="eda2.html"><a href="eda2.html"><i class="fa fa-check"></i><b>7</b> Multivariate Data Exploration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="eda2.html"><a href="eda2.html#chapter-7-objectives"><i class="fa fa-check"></i><b>7.1</b> Chapter 7 Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="eda2.html"><a href="eda2.html#bivariate"><i class="fa fa-check"></i><b>7.2</b> Bivariate Data</a></li>
<li class="chapter" data-level="7.3" data-path="eda2.html"><a href="eda2.html#scatt"><i class="fa fa-check"></i><b>7.3</b> Scatterplot</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="eda2.html"><a href="eda2.html#causality"><i class="fa fa-check"></i><b>7.3.1</b> Causality</a></li>
<li class="chapter" data-level="7.3.2" data-path="eda2.html"><a href="eda2.html#corr"><i class="fa fa-check"></i><b>7.3.2</b> Correlation</a></li>
<li class="chapter" data-level="7.3.3" data-path="eda2.html"><a href="eda2.html#correlation-neq-causation"><i class="fa fa-check"></i><b>7.3.3</b> Correlation <span class="math inline">\(\neq\)</span> causation</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="eda2.html"><a href="eda2.html#exploring-multivariate-data"><i class="fa fa-check"></i><b>7.4</b> Exploring Multivariate Data</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="eda2.html"><a href="eda2.html#facets"><i class="fa fa-check"></i><b>7.4.1</b> Facets</a></li>
<li class="chapter" data-level="7.4.2" data-path="eda2.html"><a href="eda2.html#colors"><i class="fa fa-check"></i><b>7.4.2</b> Colors</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="eda2.html"><a href="eda2.html#chapter-7-exercises"><i class="fa fa-check"></i><b>7.5</b> Chapter 7 Exercises</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="eda2.html"><a href="eda2.html#fuel-economy-data"><i class="fa fa-check"></i><b>7.5.1</b> Fuel economy data</a></li>
<li class="chapter" data-level="7.5.2" data-path="eda2.html"><a href="eda2.html#import-and-wrangle-data"><i class="fa fa-check"></i><b>7.5.2</b> Import and wrangle data</a></li>
<li class="chapter" data-level="7.5.3" data-path="eda2.html"><a href="eda2.html#check-data"><i class="fa fa-check"></i><b>7.5.3</b> Check data</a></li>
<li class="chapter" data-level="7.5.4" data-path="eda2.html"><a href="eda2.html#check-for-missing-data"><i class="fa fa-check"></i><b>7.5.4</b> Check for missing data</a></li>
<li class="chapter" data-level="7.5.5" data-path="eda2.html"><a href="eda2.html#visualize-data"><i class="fa fa-check"></i><b>7.5.5</b> Visualize data</a></li>
<li class="chapter" data-level="7.5.6" data-path="eda2.html"><a href="eda2.html#multivariate-time-series"><i class="fa fa-check"></i><b>7.5.6</b> Multivariate time series</a></li>
<li class="chapter" data-level="7.5.7" data-path="eda2.html"><a href="eda2.html#density-plots"><i class="fa fa-check"></i><b>7.5.7</b> Density plots</a></li>
<li class="chapter" data-level="7.5.8" data-path="eda2.html"><a href="eda2.html#more-multivariate-plotting"><i class="fa fa-check"></i><b>7.5.8</b> More multivariate plotting</a></li>
<li class="chapter" data-level="7.5.9" data-path="eda2.html"><a href="eda2.html#practice-questions"><i class="fa fa-check"></i><b>7.5.9</b> Practice questions</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="eda2.html"><a href="eda2.html#chapter-7-homework"><i class="fa fa-check"></i><b>7.6</b> Chapter 7 Homework</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="rprog4.html"><a href="rprog4.html"><i class="fa fa-check"></i><b>8</b> Functional Programming</a>
<ul>
<li class="chapter" data-level="8.1" data-path="rprog4.html"><a href="rprog4.html#ch.-8-objectives"><i class="fa fa-check"></i><b>8.1</b> Ch. 8 Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="rprog4.html"><a href="rprog4.html#what-is-functional-programming"><i class="fa fa-check"></i><b>8.2</b> What is <strong><em>functional programming</em></strong>?</a></li>
<li class="chapter" data-level="8.3" data-path="rprog4.html"><a href="rprog4.html#writng-functions"><i class="fa fa-check"></i><b>8.3</b> Writng Functions</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="rprog4.html"><a href="rprog4.html#example-function-my_mean"><i class="fa fa-check"></i><b>8.3.1</b> Example Function: my_mean</a></li>
<li class="chapter" data-level="8.3.2" data-path="rprog4.html"><a href="rprog4.html#example-function-import.w.name"><i class="fa fa-check"></i><b>8.3.2</b> Example Function: “import.w.name”</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="rprog4.html"><a href="rprog4.html#the-purrr-package"><i class="fa fa-check"></i><b>8.4</b> The <code>purrr::</code> package</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="rprog4.html"><a href="rprog4.html#function-mapping"><i class="fa fa-check"></i><b>8.4.1</b> Function Mapping</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="rprog4.html"><a href="rprog4.html#applying-functions-to-multiple-columns-dplyracross"><i class="fa fa-check"></i><b>8.5</b> Applying functions to multiple columns: <code>dplyr::across()</code></a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="rprog4.html"><a href="rprog4.html#using-tidy-select-syntax-to-select-columns"><i class="fa fa-check"></i><b>8.5.1</b> Using <code>&lt;tidy-select&gt;</code> syntax to select columns</a></li>
<li class="chapter" data-level="8.5.2" data-path="rprog4.html"><a href="rprog4.html#examples-dplyracross"><i class="fa fa-check"></i><b>8.5.2</b> Examples <code>dplyr::across()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="rprog4.html"><a href="rprog4.html#homework"><i class="fa fa-check"></i><b>8.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="transform.html"><a href="transform.html"><i class="fa fa-check"></i><b>9</b> Transformations and Other Tricks</a>
<ul>
<li class="chapter" data-level="9.1" data-path="transform.html"><a href="transform.html#ch.-9-objectives"><i class="fa fa-check"></i><b>9.1</b> Ch. 9 Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="transform.html"><a href="transform.html#transformation"><i class="fa fa-check"></i><b>9.2</b> Transformation</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="transform.html"><a href="transform.html#centering"><i class="fa fa-check"></i><b>9.2.1</b> Centering</a></li>
<li class="chapter" data-level="9.2.2" data-path="transform.html"><a href="transform.html#rescaling"><i class="fa fa-check"></i><b>9.2.2</b> Rescaling</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="transform.html"><a href="transform.html#normalization-and-standardization"><i class="fa fa-check"></i><b>9.3</b> Normalization and Standardization</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="transform.html"><a href="transform.html#rate-normalization"><i class="fa fa-check"></i><b>9.3.1</b> Rate normalization</a></li>
<li class="chapter" data-level="9.3.2" data-path="transform.html"><a href="transform.html#standardizing"><i class="fa fa-check"></i><b>9.3.2</b> Standardizing</a></li>
<li class="chapter" data-level="9.3.3" data-path="transform.html"><a href="transform.html#reducing-skewness"><i class="fa fa-check"></i><b>9.3.3</b> Reducing Skewness</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="transform.html"><a href="transform.html#stratification"><i class="fa fa-check"></i><b>9.4</b> Stratification</a></li>
<li class="chapter" data-level="9.5" data-path="transform.html"><a href="transform.html#outliers-and-censoring"><i class="fa fa-check"></i><b>9.5</b> Outliers and Censoring</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="transform.html"><a href="transform.html#outliers"><i class="fa fa-check"></i><b>9.5.1</b> Detecting Outliers</a></li>
<li class="chapter" data-level="9.5.2" data-path="transform.html"><a href="transform.html#censoring-outliers"><i class="fa fa-check"></i><b>9.5.2</b> Censoring outliers</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="transform.html"><a href="transform.html#ch-9-exercises"><i class="fa fa-check"></i><b>9.6</b> Ch-9 Exercises</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="transform.html"><a href="transform.html#salary-data-for-poly-sci-majors"><i class="fa fa-check"></i><b>9.6.1</b> Salary Data for Poly Sci Majors</a></li>
<li class="chapter" data-level="9.6.2" data-path="transform.html"><a href="transform.html#univariate-data-visualization-1"><i class="fa fa-check"></i><b>9.6.2</b> Univariate Data Visualization</a></li>
<li class="chapter" data-level="9.6.3" data-path="transform.html"><a href="transform.html#rescale-and-censor-data"><i class="fa fa-check"></i><b>9.6.3</b> Rescale and Censor Data</a></li>
<li class="chapter" data-level="9.6.4" data-path="transform.html"><a href="transform.html#logfit"><i class="fa fa-check"></i><b>9.6.4</b> Fit a Log-normal Distribution</a></li>
<li class="chapter" data-level="9.6.5" data-path="transform.html"><a href="transform.html#plot-fitted-vs-actual-data"><i class="fa fa-check"></i><b>9.6.5</b> Plot Fitted vs Actual Data</a></li>
<li class="chapter" data-level="9.6.6" data-path="transform.html"><a href="transform.html#transform-the-data"><i class="fa fa-check"></i><b>9.6.6</b> Transform the Data</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="transform.html"><a href="transform.html#ch-9-homework"><i class="fa fa-check"></i><b>9.7</b> Ch-9 Homework</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="measure.html"><a href="measure.html"><i class="fa fa-check"></i><b>10</b> Measurement</a>
<ul>
<li class="chapter" data-level="10.1" data-path="measure.html"><a href="measure.html#ch.-10-objectives"><i class="fa fa-check"></i><b>10.1</b> Ch. 10 Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="measure.html"><a href="measure.html#sampling"><i class="fa fa-check"></i><b>10.2</b> Sampling</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="measure.html"><a href="measure.html#sample"><i class="fa fa-check"></i><b>10.2.1</b> Samples vs. Populations</a></li>
<li class="chapter" data-level="10.2.2" data-path="measure.html"><a href="measure.html#sample.collect"><i class="fa fa-check"></i><b>10.2.2</b> Collecting a sample</a></li>
<li class="chapter" data-level="10.2.3" data-path="measure.html"><a href="measure.html#simple-random-sampling"><i class="fa fa-check"></i><b>10.2.3</b> Simple Random Sampling</a></li>
<li class="chapter" data-level="10.2.4" data-path="measure.html"><a href="measure.html#systematic-sampling"><i class="fa fa-check"></i><b>10.2.4</b> Systematic Sampling</a></li>
<li class="chapter" data-level="10.2.5" data-path="measure.html"><a href="measure.html#stratified-sampling"><i class="fa fa-check"></i><b>10.2.5</b> Stratified Sampling</a></li>
<li class="chapter" data-level="10.2.6" data-path="measure.html"><a href="measure.html#cluster-sampling"><i class="fa fa-check"></i><b>10.2.6</b> Cluster Sampling</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="measure.html"><a href="measure.html#figures-of-merit"><i class="fa fa-check"></i><b>10.3</b> Figures of Merit</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="measure.html"><a href="measure.html#LOD"><i class="fa fa-check"></i><b>10.3.1</b> Limit of Detection &amp; Quantification</a></li>
<li class="chapter" data-level="10.3.2" data-path="measure.html"><a href="measure.html#dynamic"><i class="fa fa-check"></i><b>10.3.2</b> Dynamic Range</a></li>
<li class="chapter" data-level="10.3.3" data-path="measure.html"><a href="measure.html#precision"><i class="fa fa-check"></i><b>10.3.3</b> Precision</a></li>
<li class="chapter" data-level="10.3.4" data-path="measure.html"><a href="measure.html#bias"><i class="fa fa-check"></i><b>10.3.4</b> Bias (accuracy)</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="measure.html"><a href="measure.html#measurement-uncertainty"><i class="fa fa-check"></i><b>10.4</b> Measurement Uncertainty</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="measure.html"><a href="measure.html#repeated"><i class="fa fa-check"></i><b>10.4.1</b> Repeated Measures</a></li>
<li class="chapter" data-level="10.4.2" data-path="measure.html"><a href="measure.html#error-propagation"><i class="fa fa-check"></i><b>10.4.2</b> Error Propagation</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="measure.html"><a href="measure.html#ch-10-homework"><i class="fa fa-check"></i><b>10.5</b> CH-10 Homework</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>11</b> Modeling</a>
<ul>
<li class="chapter" data-level="11.1" data-path="model.html"><a href="model.html#ch.-11-objectives"><i class="fa fa-check"></i><b>11.1</b> Ch. 11 Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="model.html"><a href="model.html#process-modeling"><i class="fa fa-check"></i><b>11.2</b> Process Modeling</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="model.html"><a href="model.html#assumptions"><i class="fa fa-check"></i><b>11.2.1</b> Assumptions</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="model.html"><a href="model.html#model-fitting"><i class="fa fa-check"></i><b>11.3</b> Model Fitting</a></li>
<li class="chapter" data-level="11.4" data-path="model.html"><a href="model.html#ols-regression"><i class="fa fa-check"></i><b>11.4</b> OLS Regression</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="model.html"><a href="model.html#OLS_example"><i class="fa fa-check"></i><b>11.4.1</b> Quick OLS Example</a></li>
<li class="chapter" data-level="11.4.2" data-path="model.html"><a href="model.html#OLS_assum"><i class="fa fa-check"></i><b>11.4.2</b> OLS Assumptions and Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="model.html"><a href="model.html#in-depth-example-ols-linear-regression"><i class="fa fa-check"></i><b>11.5</b> In-Depth Example: OLS Linear Regression</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="model.html"><a href="model.html#the-lm-function"><i class="fa fa-check"></i><b>11.5.1</b> The <code>lm()</code> function</a></li>
<li class="chapter" data-level="11.5.2" data-path="model.html"><a href="model.html#ols-diagnostics"><i class="fa fa-check"></i><b>11.5.2</b> OLS Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="model.html"><a href="model.html#calibration"><i class="fa fa-check"></i><b>11.6</b> Calibration</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="model.html"><a href="model.html#example-calibration"><i class="fa fa-check"></i><b>11.6.1</b> Example Calibration</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="model.html"><a href="model.html#ch-11-homework"><i class="fa fa-check"></i><b>11.7</b> Ch-11 Homework</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="dist.html"><a href="dist.html"><i class="fa fa-check"></i><b>12</b> Appendix: Stats &amp; Reference Distributions</a>
<ul>
<li class="chapter" data-level="12.1" data-path="dist.html"><a href="dist.html#measures-of-central-tendency"><i class="fa fa-check"></i><b>12.1</b> Measures of Central Tendency</a></li>
<li class="chapter" data-level="12.2" data-path="dist.html"><a href="dist.html#measures-of-dispersion"><i class="fa fa-check"></i><b>12.2</b> Measures of Dispersion</a></li>
<li class="chapter" data-level="12.3" data-path="dist.html"><a href="dist.html#unif_dist"><i class="fa fa-check"></i><b>12.3</b> Uniform Distribution</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="dist.html"><a href="dist.html#uniform-characteristic-plots"><i class="fa fa-check"></i><b>12.3.1</b> Uniform Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="dist.html"><a href="dist.html#normal_dist"><i class="fa fa-check"></i><b>12.4</b> Normal Distribution</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="dist.html"><a href="dist.html#normal-characteristic-plots"><i class="fa fa-check"></i><b>12.4.1</b> Normal Characteristic Plots</a></li>
<li class="chapter" data-level="12.4.2" data-path="dist.html"><a href="dist.html#rule"><i class="fa fa-check"></i><b>12.4.2</b> 68-95-99 rule</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="dist.html"><a href="dist.html#log_normal_dist"><i class="fa fa-check"></i><b>12.5</b> Log-normal Distribution</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="dist.html"><a href="dist.html#lognormal-characteristic-plots"><i class="fa fa-check"></i><b>12.5.1</b> Lognormal Characteristic Plots</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="dist.html"><a href="dist.html#pearson"><i class="fa fa-check"></i><b>12.6</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="dist.html"><a href="dist.html#anscombes-quartet"><i class="fa fa-check"></i><b>12.6.1</b> Anscombe’s Quartet</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="dist.html"><a href="dist.html#OLS"><i class="fa fa-check"></i><b>12.7</b> OLS Regression Coefficients</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Engineering Data Analysis in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transform" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Chapter 9</span> Transformations and Other Tricks<a href="transform.html#transform" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter provides an introduction to several common techniques to organize, transform, and/or manipulate univariate data. I use the word <em>manipulate</em> here with good reason; many of these techniques can be used inappropriately or lead to inadvertent consequences, so tread carefully! That warning aside, these techniques are useful and often allow you to gain insight into <em>“what the data are trying to tell you”</em>.</p>
<div id="ch.-9-objectives" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Ch. 9 Objectives<a href="transform.html#ch.-9-objectives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This Chapter is designed around the following learning objectives. Upon completing this Chapter, you should be able to:</p>
<ul>
<li>Define common approaches to data transformation<br />
</li>
<li>Explain the differences between <em>centering</em>, <em>rescaling</em>, and <em>standardizing</em> univariate data.</li>
<li>Stratify data into relevant groups for analysis</li>
<li>Discuss the risks and potential approaches to identifying and handling outliers</li>
</ul>
</div>
<div id="transformation" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Transformation<a href="transform.html#transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The phrase <em>“Data Transformation”</em> means different things in different fields. We will define it here, in the statistical sense, as: <strong><em>applying one or more mathematical operations to a variable</em></strong> (or in our case, all elements of a numeric vector). You are undoubtedly familiar with data transformation, even if you haven’t previously recognized it. Some examples include:</p>
<ul>
<li>adding, subtracting, or multiplying a constant to all elements in a vector;</li>
<li>taking the log, square root, or reciprocal of a variable;</li>
<li>some combination of these approaches.</li>
</ul>
<p>For example, your data are transformed whenever you convert temperature units from °F to °C, length units from inches to millimeters, or render a variable dimensionless (e.g., converting to units of percent, parts per million, or some other unitless value). In addition to these “units transformations”, we also transfrom data to make their <strong><em>location</em></strong> and/or <strong><em>dispersion</em></strong> more consistent, or to change the <strong><em>shape</em></strong> of a distribution (e.g., to reduce skewness or to normalize residual values from a model). These latter approaches are often employed during multivariate analyses to help your variables “play nicely together” within the analytic framework you set forth. More on this to come in <a href="model.html#model">Modeling</a>.</p>
<div class="rmdnote">
<p>
There are two key facets to data transformation:
<strong>justification</strong> and <strong>documentation</strong>.
Whenever data are transformed, you must provide a good reason for doing
so (hint: there are many good reasons and also a few bad ones).
Furthermore, <strong>you must adequately document “how” and “why” the
data were transformed</strong>, so that others can understand your work
and reproduce your results, when needed.
</p>
</div>
<div id="centering" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Centering<a href="transform.html#centering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Centering means <strong><em>to subtract (or sometimes add) a constant from all values</em></strong> in a vector. The <strong>constant</strong> to be subtracted could be an estimate of the data’s central tendency, like the mean or median (hence the term <em>center</em>-ing), or it could be some residual value that you want to remove from all observations. If you subtract the mean from every value of a vector, then the new vector will have a mean of zero; this can be useful when analyzing multiple variables (for example in a multivariate regression model), each of which has a different location. Centering <strong><em>changes the location</em></strong> of a variable but <strong><em>dispersion (spread) stays the same</em></strong>.</p>
<p>In engineering, the most common reason for centering data is not to subtract the mean or median value, but instead to <em>“background subtract”</em> (aka, <em>“zeroing”</em>) a set of univariate observations. If you have ever used a digital scale to measure the weight of an object, you’ve probably noticed that when you turn it on, the scale does not always read zero. Most of the time the instrument has a way to “re-zero” itself prior to use, but this is not always the case. If your scale shows a mass of 198 g when nothing is placed on it, then you probably want to (1) document that value before taking measurements and (2) subtract a value of 198 from all subsequent weights that you perform with this scale. That subtraction is an example of a “centering” transformation.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:centering-anno"></span>
<img src="images/centering_anno.png" alt="Data are sometimes centered to correct spurious values" width="640" />
<p class="caption">
Figure 9.1: Data are sometimes centered to correct spurious values
</p>
</div>
</div>
<div id="rescaling" class="section level3 hasAnchor" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Rescaling<a href="transform.html#rescaling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>To rescale a variable means to divide (or multiply) all values by a constant</strong>. Whereas <em>centering</em> is an arithmetic transformation, the process of <em>rescaling</em> data is multiplicative. Rescaling can change both the location and spread of the data.</p>
<p>Some reasons to rescale data include:</p>
<ul>
<li>to show variables of different magnitudes together on the same axis of a plot;</li>
<li>to make the spread of two or more variables similar (e.g., when conducting an analysis of variance or multivariate regression with variables that each have different scales);</li>
<li>when performing a units conversion (e.g., mm to cm);</li>
<li>when you want to render a variable dimensionless (e.g., when converting to percentage units).</li>
</ul>
</div>
</div>
<div id="normalization-and-standardization" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Normalization and Standardization<a href="transform.html#normalization-and-standardization" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In a generic sense, to <strong><em>“normalize”</em></strong> a variable means: <strong>to transform that variable so that it can be compared, evaluated, or comprehended more easily.</strong> Normalization often involves a combination of centering and rescaling operations that not only change the location and spread of the data, but also the <em>meaning</em> of data. Normalization is just as common in engineering as it is in statistics, or any other scientific field.</p>
<div class="rmdwarning">
<p>
Like <em>“transformation”</em>, the word “<em>normalization</em>” is
defined differently in different fields, so be explicit when using this
term in your work. To some, the word normalization means to “make a
variable normally distributed”; to others, it means to “normalize a
database” so that redundancies are eliminated; and to some, it might
just mean, to divide one variable into another to achieve some sort of
“rate” metric.
</p>
</div>
<p>There are many types of normalization operations; we will discuss a few examples below.</p>
<div id="rate-normalization" class="section level3 hasAnchor" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Rate normalization<a href="transform.html#rate-normalization" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To perform a rate normalization is <strong>to divide one variable into another</strong>, often to report a change in one variable relative to another (e.g., a rate or a derivative).</p>
<ul>
<li>Two vehicles may have the same range (how many miles they can travel on one tank of gas) but different rates of fuel efficiency (miles traveled per gallon);<br />
</li>
<li>Two countries can have the same GDI (<em>gross domestic income</em>; the sum of all wages earned) but widely different rates of “per capita” income (GDI/total population).<br />
</li>
<li>A person’s <strong>Body Mass Index</strong> (BMI, kg/m<sup>2</sup>) is their mass (in kg) normalized by the square of their height (m<sup>2</sup>).</li>
</ul>
</div>
<div id="standardizing" class="section level3 hasAnchor" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> Standardizing<a href="transform.html#standardizing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Standardization is a special case of transformation/normalization where each value in a set of observations (or vector) is subtracted by some constant (often the data’s central tendency) and divided by the dispersion (often the standard deviation, IQR, or some other spread metric). When working with normally distributed data, the standardization of variable <span class="math inline">\(x_i\)</span> into <span class="math inline">\(z_i\)</span> is:</p>
<p><span class="math display">\[z_{i} = \frac{x_{i}-\overline{x}}{\sigma_{x}}\]</span></p>
<p>where the mean of <span class="math inline">\(x\)</span> is denoted <span class="math inline">\(\overline{x}\)</span> and standard deviation of <span class="math inline">\(x\)</span> is <span class="math inline">\(\sigma_{x}\)</span>. The <em>standardization</em> of a variable renders the mean to 0 and the standard deviation to 1. This type of normalization is useful when you wish to study relationships between multiple variables, each with different scale. Note that standardization doesn’t have to use the mean and standard deviation as the centering and normalizing variables, but those two are common.</p>
</div>
<div id="reducing-skewness" class="section level3 hasAnchor" number="9.3.3">
<h3><span class="header-section-number">9.3.3</span> Reducing Skewness<a href="transform.html#reducing-skewness" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes your data are <em>not normally distributed</em>, even though you want them to be. In that case you still have options. Some transformations, like the log, square root, or inverse, will make the spread of the data symmetric and approximately Gaussian. These transformations are commonly used to meet the needs (read: underlying assumptions) of many statistical models. We discuss model assumptions (and their evaluation) in the <a href="model.html#model">modeling chapter</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:reduce-skew2"></span>
<img src="images/reduce_skew_anno.png" alt="The log(x) transform is often used to reduce skewness in a variable." width="640" />
<p class="caption">
Figure 9.2: The log(x) transform is often used to reduce skewness in a variable.
</p>
</div>
<p>If you would like to lean more about data transformations (and how to make your data appear normally distributed), look up the <strong><em>Box-Cox method</em></strong> of power transformations. Lots of packages can run this method in R, such as <code>MASS::boxcox</code> and <code>EnvStats::boxcox</code>. And, yes, George Box is the same person that brought you the boxplot!</p>
</div>
</div>
<div id="stratification" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Stratification<a href="transform.html#stratification" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="rmdnote">
<p>
To stratify a sample means: to divide the sample into subsets (aka
groups based on strata).
</p>
</div>
<p>Stratified analyses can be performed many ways; one particularly useful way is graphically, by creating a stratification plot. A stratification plot is like any other visualization that you have created, except that the strata are identified (i.e., called out) through the use of color, lines, symbols, facets, etc. Let’s use the following example to demonstrate:</p>
<p>A manufacturing operation is investigating the production of an expensive titanium alloy, where a 25% increase in the production yield of the alloy means the difference between profit and loss. The materials engineers believe that feedstock purity should have an effect on the yield. For the past month, three different reactors at the plant have been producing alloys from Ti feedstock of varying purity. After one month, you decide to visualize the relationship between <em>process yield</em> and <em>sample purity</em> with a scatterplot, <code>geom_point()</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:stratify2"></span>
<img src="images/unstratified.png" alt="Yield vs. Purity from the plant's three reactors over one month" width="500" />
<p class="caption">
Figure 9.3: Yield vs. Purity from the plant’s three reactors over one month
</p>
</div>
<p>Examination of Figure <a href="transform.html#fig:stratify2">9.3</a> reveals that, while there is considerable variation in the data, a clear relationship is not apparent between sample purity and process yield. Correlation analyses reveal a Pearson correlation coefficient of <span class="math inline">\(r=\)</span> -0.23, indicating a low level of correlation between the two variables. However, it occurs to you that perhaps there is variation in results between the three different reactors in the plant. Therefore, you decide to repeat this analysis <strong><em>stratifying the data by reactor type</em></strong>. In this case, you repeat the <code>ggplot()</code> call with an extra aesthetic of <code>color = reactor</code> in the scatterplot.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="transform.html#cb323-1" tabindex="-1"></a>stratified <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> strat.data,</span>
<span id="cb323-2"><a href="transform.html#cb323-2" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> yield2, </span>
<span id="cb323-3"><a href="transform.html#cb323-3" tabindex="-1"></a>           <span class="at">x =</span> purity,</span>
<span id="cb323-4"><a href="transform.html#cb323-4" tabindex="-1"></a>           <span class="at">color =</span> reactor,</span>
<span id="cb323-5"><a href="transform.html#cb323-5" tabindex="-1"></a>           <span class="at">stroke =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb323-6"><a href="transform.html#cb323-6" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb323-7"><a href="transform.html#cb323-7" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb323-8"><a href="transform.html#cb323-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">&quot;Reactor&quot;</span>,</span>
<span id="cb323-9"><a href="transform.html#cb323-9" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Sample Purity&quot;</span>,</span>
<span id="cb323-10"><a href="transform.html#cb323-10" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Process Yield, kg&quot;</span>) <span class="sc">+</span></span>
<span id="cb323-11"><a href="transform.html#cb323-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>(<span class="at">base_size =</span> <span class="dv">14</span>) <span class="sc">+</span></span>
<span id="cb323-12"><a href="transform.html#cb323-12" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position.inside =</span> <span class="fu">c</span>(<span class="fl">0.85</span>, <span class="fl">0.8</span>),</span>
<span id="cb323-13"><a href="transform.html#cb323-13" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">colour =</span> <span class="st">&quot;black&quot;</span>)) </span>
<span id="cb323-14"><a href="transform.html#cb323-14" tabindex="-1"></a></span>
<span id="cb323-15"><a href="transform.html#cb323-15" tabindex="-1"></a><span class="co">#ggsave(&quot;./images/stratified.png&quot;)</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:stratify-png"></span>
<img src="images/stratified.png" alt="Yield vs. Purity over one month, stratified by reactor type" width="500" />
<p class="caption">
Figure 9.4: Yield vs. Purity over one month, stratified by reactor type
</p>
</div>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="transform.html#cb324-1" tabindex="-1"></a>strat.data <span class="sc">%&gt;%</span></span>
<span id="cb324-2"><a href="transform.html#cb324-2" tabindex="-1"></a>  <span class="fu">group_by</span>(reactor) <span class="sc">%&gt;%</span></span>
<span id="cb324-3"><a href="transform.html#cb324-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">&quot;Pearson&#39;s r&quot;</span> <span class="ot">=</span> <span class="fu">cor</span>(yield2, purity),</span>
<span id="cb324-4"><a href="transform.html#cb324-4" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">&quot;keep&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb324-5"><a href="transform.html#cb324-5" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">align =</span> <span class="st">&quot;c&quot;</span>,</span>
<span id="cb324-6"><a href="transform.html#cb324-6" tabindex="-1"></a>        <span class="at">digits =</span> <span class="dv">2</span>,</span>
<span id="cb324-7"><a href="transform.html#cb324-7" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&quot;Correlation between Sample Purity and Yield by Reactor&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb324-8"><a href="transform.html#cb324-8" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:stat-table">Table 9.1: </span><span id="tab:stat-table">Table 9.2: </span>Correlation between Sample Purity and Yield by Reactor
</caption>
<thead>
<tr>
<th style="text-align:center;">
reactor
</th>
<th style="text-align:center;">
Pearson’s r
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
a
</td>
<td style="text-align:center;">
-0.90
</td>
</tr>
<tr>
<td style="text-align:center;">
b
</td>
<td style="text-align:center;">
-0.90
</td>
</tr>
<tr>
<td style="text-align:center;">
c
</td>
<td style="text-align:center;">
-0.92
</td>
</tr>
</tbody>
</table>
<p>Figure <a href="transform.html#fig:stratify-png">9.4</a> tells a very different story! Now we can see that two relationships are clearly evident.</p>
<ol style="list-style-type: decimal">
<li>There is a clear inverse relationship between <em>sample purity</em> and the <em>process yield</em> (Pearson correlation coefficients are now ~ 0.9 for each) and<br />
</li>
<li>For a given purity level, each reactor has a different output. Clearly, there is something different about each of these reactors that merits further study…</li>
</ol>
<p>Figure <a href="transform.html#fig:stratify-png">9.4</a> raises a subtle, but very important, point: <strong>data often have hierarchy</strong> and that hierarchy may be influential. In this case, only when we account for the hierarchy (the reactor that produced each sample), do we see an important relationship arise.</p>
<div class="rmdnote">
<p>
<em>Hierarchical data</em> means data that can be ordered into
different ranks (or levels). Students at a university might be ordered
by their their college, their major, or the year in which they
matriculated. Those ranks may be important when analyzing student data;
if so, your analysis should account for that! Note: you can also
manufacture strata from within continuous data, for example, you could
define strata according to quantiles of GPA among the study body.
</p>
</div>
</div>
<div id="outliers-and-censoring" class="section level2 hasAnchor" number="9.5">
<h2><span class="header-section-number">9.5</span> Outliers and Censoring<a href="transform.html#outliers-and-censoring" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Have you ever heard the phrase <strong><em>“don’t let the exception become the rule”</em></strong>?</p>
<p>I think this phrase means, <em>don’t let your judgment be governed solely by outliers.</em> Whether or not this is good advice probably depends on the situation, but I do think one should have the ability to detect <strong><em>when an outlier has leverage over a situation</em></strong>.</p>
<div class="rmdnote">
<p>
An <strong>outlier</strong> is an observation that lies an abnormal
distance from other values in a random sample.
</p>
</div>
<div id="outliers" class="section level3 hasAnchor" number="9.5.1">
<h3><span class="header-section-number">9.5.1</span> Detecting Outliers<a href="transform.html#outliers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data visualization (like histograms, density plots, time-series, and boxplots) can be useful for detecting outliers, because such graphs make it clear that one or more observations <em>“don’t seem to belong with the rest”</em>. For example, let’s create an artificial data frame called <code>asthma.data</code>. Within this data frame are two variables:</p>
<ul>
<li><code>asthma.prevalence</code>: the percentage of kids with asthma in a given school district</li>
<li><code>black.carbon</code>: the concentration of airborne black carbon (a type of air pollutant generated by incomplete combustion, similar to what you see exhausted from a diesel truck) measured outside of a school at the center of each district.</li>
</ul>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="transform.html#cb325-1" tabindex="-1"></a>asthma.data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb325-2"><a href="transform.html#cb325-2" tabindex="-1"></a>  <span class="at">asthma.prevalence =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">18</span>, <span class="dv">9</span>, </span>
<span id="cb325-3"><a href="transform.html#cb325-3" tabindex="-1"></a>                  <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">14</span>, <span class="dv">14</span>, <span class="dv">10</span>,</span>
<span id="cb325-4"><a href="transform.html#cb325-4" tabindex="-1"></a>                  <span class="dv">16</span>, <span class="dv">9</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">9</span>),</span>
<span id="cb325-5"><a href="transform.html#cb325-5" tabindex="-1"></a>  <span class="at">black.carbon =</span> <span class="fu">c</span>(<span class="fl">3.2</span>, <span class="fl">2.5</span>, <span class="fl">4.6</span>, <span class="fl">6.1</span>, <span class="fl">3.3</span>, </span>
<span id="cb325-6"><a href="transform.html#cb325-6" tabindex="-1"></a>                   <span class="fl">3.1</span>, <span class="fl">6.1</span>, <span class="fl">5.3</span>, <span class="fl">4.5</span>, <span class="fl">3.3</span>, </span>
<span id="cb325-7"><a href="transform.html#cb325-7" tabindex="-1"></a>                   <span class="fl">6.4</span>, <span class="fl">3.7</span>, <span class="fl">5.1</span>, <span class="fl">6.8</span>, <span class="dv">12</span>)</span>
<span id="cb325-8"><a href="transform.html#cb325-8" tabindex="-1"></a>)</span></code></pre></div>
<p>Figure <a href="transform.html#fig:outlier-1">9.5</a> below contains two boxplots: one depicts <code>asthma.prevalence</code> for the 15 school districts, and the other depicts <code>black.carbon</code>. I’ve circled the apparent outlier. <strong>Outliers are easy to see in boxplots because they fall outside the whiskers.</strong></p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:outlier-1"></span>
<img src="09-transf_files/figure-html/outlier-1-1.png" alt="Boxplots for two sets of data; the one on the right has an outlier." width="500" />
<p class="caption">
Figure 9.5: Boxplots for two sets of data; the one on the right has an outlier.
</p>
</div>
<p>Data visualization is <em>useful</em> for detecting outliers, but not definitive. Indeed, there are no definitive methods for detecting outliers in data (mostly because that process is too contextual). That said, there are some guidelines.</p>
<p><strong>The “1.5 x IQR” rule</strong> is what was used in the boxplot of Figure <a href="transform.html#fig:outlier-1">9.5</a>.</p>
<p>This rule states that outliers are <strong>any data points more than 1.5 times the inter-quartile range away from the upper and lower quartiles</strong>. This means data that are:</p>
<ul>
<li><em>high outliers are greater than</em>: [0.75 quantile value] + 1.5*IQR</li>
<li><em>low outliers are less than</em>: [0.25 quantile value] - 1.5*IQR</li>
</ul>
<p>For the <code>black.carbon</code> data, we could calculate these thresholds with the following:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="transform.html#cb326-1" tabindex="-1"></a>upper <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="at">x =</span> asthma.data<span class="sc">$</span>black.carbon,</span>
<span id="cb326-2"><a href="transform.html#cb326-2" tabindex="-1"></a>                  <span class="at">probs =</span> <span class="fl">0.75</span>,</span>
<span id="cb326-3"><a href="transform.html#cb326-3" tabindex="-1"></a>                  <span class="at">names =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb326-4"><a href="transform.html#cb326-4" tabindex="-1"></a>  <span class="fl">1.5</span><span class="sc">*</span><span class="fu">IQR</span>(<span class="at">x =</span> asthma.data<span class="sc">$</span>black.carbon)</span>
<span id="cb326-5"><a href="transform.html#cb326-5" tabindex="-1"></a></span>
<span id="cb326-6"><a href="transform.html#cb326-6" tabindex="-1"></a>lower <span class="ot">&lt;-</span> <span class="fu">quantile</span>(<span class="at">x =</span> asthma.data<span class="sc">$</span>black.carbon,</span>
<span id="cb326-7"><a href="transform.html#cb326-7" tabindex="-1"></a>                  <span class="at">probs =</span> <span class="fl">0.25</span>,</span>
<span id="cb326-8"><a href="transform.html#cb326-8" tabindex="-1"></a>                  <span class="at">names =</span> <span class="cn">FALSE</span>) <span class="sc">-</span> </span>
<span id="cb326-9"><a href="transform.html#cb326-9" tabindex="-1"></a>  <span class="fl">1.5</span><span class="sc">*</span><span class="fu">IQR</span>(<span class="at">x =</span> asthma.data<span class="sc">$</span>black.carbon)</span>
<span id="cb326-10"><a href="transform.html#cb326-10" tabindex="-1"></a></span>
<span id="cb326-11"><a href="transform.html#cb326-11" tabindex="-1"></a>upper</span></code></pre></div>
<pre><code>## [1] 10.3</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="transform.html#cb328-1" tabindex="-1"></a>lower</span></code></pre></div>
<pre><code>## [1] -0.9</code></pre>
<p>Interestingly, this rule suggests that outliers on the lower end need to be negative. Is that even possible for air pollution concentrations? (hint: NO) Other statistical approaches for detecting outliers include:</p>
<ul>
<li>a threshold of standard deviations away from the mean (i.e., computing z-scores);</li>
<li>Grubbs’ test;</li>
<li>Tietjen-Moore Test, and others.</li>
</ul>
<p>In the end, however, common sense and your contextual knowledge of the data are usually more important here.</p>
</div>
<div id="censoring-outliers" class="section level3 hasAnchor" number="9.5.2">
<h3><span class="header-section-number">9.5.2</span> Censoring outliers<a href="transform.html#censoring-outliers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>What should we do with outliers in our data? The answer depends on context (<em>are these life and death data we’re dealing with or just the size of tomatoes from your garden?</em>) and on the questions you are asking. Here’s an example:</p>
<p>The black carbon boxplot (right side of <a href="transform.html#fig:outlier-1">9.5</a>) has a clear outlier that falls far outside of the rest of the data. This might not seem like a big deal but take a look at what happens when we (A) examine the correlation between these two variables and (B) fit a regression line through the data <span style="color: orange;">with the outlier included</span> or <span style="color: blue;">with the outlier excluded </span>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:outlier-2"></span>
<img src="09-transf_files/figure-html/outlier-2-1.png" alt="Effect of an outlier on a linear model with n=15 data points." width="672" />
<p class="caption">
Figure 9.6: Effect of an outlier on a linear model with n=15 data points.
</p>
</div>
<p>Examination of Figure <a href="transform.html#fig:outlier-2">9.6</a> suggests that the outlier is having a strong effect on the relationship between air pollution and childhood asthma. If the censored data are correct, we have just detected a strong correlation between asthma rates and air pollution. If the uncensored data are correct then the association is positive but very weak. So how do we handle this apparent outlier?</p>
<p>Unfortunately, this sort of conundrum happens more often than we might like in the real world. <em>My advice would be to collect more data to support/discount the outlier. If that isn’t possible (and no other explanation was forthcoming), I would probably show the analysis</em> <strong><em>both ways</em></strong>.</p>
<div class="rmdwarning">
<p>
<strong>Censoring data is dangerous business.</strong> If you are
going to censor an outlier, make sure to document <strong>how</strong>
you discovered/defined the outlier, <strong>why</strong> you believe it
should be censored, and <strong>“whether or not that censoring had an
effect on your results/conclusions”</strong>. Then make sure to
broadcast your thinking to everyone who comes in contact with your
analysis. If you try to hide outliers, you are being unethical and
setting yourself up for disaster.
</p>
</div>
</div>
</div>
<div id="ch-9-exercises" class="section level2 hasAnchor" number="9.6">
<h2><span class="header-section-number">9.6</span> Ch-9 Exercises<a href="transform.html#ch-9-exercises" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s return to the topic of salaries by college major, as collected by the <a href="https://www.nsf.gov/statistics/srvygrads/">NSF Survey of College Graduates</a>. I’ve extracted survey results for graduates of political science programs into a file called <code>salary_ch9.csv</code>. You can find this .csv file on Canvas or our GitHub repository.</p>
<div id="salary-data-for-poly-sci-majors" class="section level3 hasAnchor" number="9.6.1">
<h3><span class="header-section-number">9.6.1</span> Salary Data for Poly Sci Majors<a href="transform.html#salary-data-for-poly-sci-majors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s read in the file and peek at the contents:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="transform.html#cb330-1" tabindex="-1"></a>salary_ps <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./data/salary_ch9.csv&quot;</span>)</span>
<span id="cb330-2"><a href="transform.html#cb330-2" tabindex="-1"></a></span>
<span id="cb330-3"><a href="transform.html#cb330-3" tabindex="-1"></a><span class="fu">head</span>(salary_ps)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##   salary sex   major   
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   
## 1  80000 M     Poly Sci
## 2  82000 F     Poly Sci
## 3  67000 F     Poly Sci
## 4  83000 F     Poly Sci
## 5  60000 M     Poly Sci
## 6 200000 M     Poly Sci</code></pre>
<p>We can see that we have <code>salary</code> information, <code>sex</code> (<em>Male</em> or <em>Female</em> respondent), and <code>major</code> (all of which are Poly Sci). Let’s calculate some basic descriptive statistics grouped by respondent sex.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="transform.html#cb332-1" tabindex="-1"></a>salary_ps <span class="sc">%&gt;%</span></span>
<span id="cb332-2"><a href="transform.html#cb332-2" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb332-3"><a href="transform.html#cb332-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">median =</span> <span class="fu">median</span>(salary),</span>
<span id="cb332-4"><a href="transform.html#cb332-4" tabindex="-1"></a>          <span class="at">mean =</span> <span class="fu">mean</span>(salary),</span>
<span id="cb332-5"><a href="transform.html#cb332-5" tabindex="-1"></a>          <span class="at">min =</span> <span class="fu">min</span>(salary),</span>
<span id="cb332-6"><a href="transform.html#cb332-6" tabindex="-1"></a>          <span class="at">max =</span> <span class="fu">max</span>(salary),</span>
<span id="cb332-7"><a href="transform.html#cb332-7" tabindex="-1"></a>          <span class="at">IQR =</span> <span class="fu">IQR</span>(salary),</span>
<span id="cb332-8"><a href="transform.html#cb332-8" tabindex="-1"></a>          <span class="at">.groups =</span> <span class="st">&quot;keep&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb332-9"><a href="transform.html#cb332-9" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<pre><code>## # A tibble: 2 × 6
##   sex   median    mean   min     max   IQR
##   &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1 F      69003  84432.     0 1027653 57375
## 2 M      80000 114331.     0 1027653 78000</code></pre>
<p>These descriptive statistics allow some quick insight into the data:</p>
<ul>
<li>Poly Sci majors identifying as male make higher median/mean salaries than those identifying as female;<br />
</li>
<li>The mean salary is higher than the median salary in both cases (note that for perfectly <em>normal</em> distributions the mean and mean are equivalent);</li>
<li>The max salary is the same for both genders and is 10x higher than the median. With a <code>min()</code> of 0 for both genders, this implies some level of skewness in these data.</li>
</ul>
</div>
<div id="univariate-data-visualization-1" class="section level3 hasAnchor" number="9.6.2">
<h3><span class="header-section-number">9.6.2</span> Univariate Data Visualization<a href="transform.html#univariate-data-visualization-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s visualize these data with some basic EDA plots:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="transform.html#cb334-1" tabindex="-1"></a><span class="co">#create EDA plots</span></span>
<span id="cb334-2"><a href="transform.html#cb334-2" tabindex="-1"></a>box1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> salary_ps,</span>
<span id="cb334-3"><a href="transform.html#cb334-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> sex,</span>
<span id="cb334-4"><a href="transform.html#cb334-4" tabindex="-1"></a>           <span class="at">x =</span> salary,</span>
<span id="cb334-5"><a href="transform.html#cb334-5" tabindex="-1"></a>           <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb334-6"><a href="transform.html#cb334-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb334-7"><a href="transform.html#cb334-7" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>())<span class="sc">+</span></span>
<span id="cb334-8"><a href="transform.html#cb334-8" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb334-9"><a href="transform.html#cb334-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb334-10"><a href="transform.html#cb334-10" tabindex="-1"></a></span>
<span id="cb334-11"><a href="transform.html#cb334-11" tabindex="-1"></a>hist1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> salary_ps,</span>
<span id="cb334-12"><a href="transform.html#cb334-12" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> salary,</span>
<span id="cb334-13"><a href="transform.html#cb334-13" tabindex="-1"></a>           <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb334-14"><a href="transform.html#cb334-14" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb334-15"><a href="transform.html#cb334-15" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">50</span>) <span class="sc">+</span></span>
<span id="cb334-16"><a href="transform.html#cb334-16" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>()) <span class="sc">+</span></span>
<span id="cb334-17"><a href="transform.html#cb334-17" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb334-18"><a href="transform.html#cb334-18" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position.inside =</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.5</span>))</span>
<span id="cb334-19"><a href="transform.html#cb334-19" tabindex="-1"></a></span>
<span id="cb334-20"><a href="transform.html#cb334-20" tabindex="-1"></a>cdf1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> salary_ps,</span>
<span id="cb334-21"><a href="transform.html#cb334-21" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> salary,</span>
<span id="cb334-22"><a href="transform.html#cb334-22" tabindex="-1"></a>           <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb334-23"><a href="transform.html#cb334-23" tabindex="-1"></a>  <span class="fu">stat_ecdf</span>() <span class="sc">+</span></span>
<span id="cb334-24"><a href="transform.html#cb334-24" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>()) <span class="sc">+</span></span>
<span id="cb334-25"><a href="transform.html#cb334-25" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb334-26"><a href="transform.html#cb334-26" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Quantile&quot;</span>) <span class="sc">+</span></span>
<span id="cb334-27"><a href="transform.html#cb334-27" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position.inside =</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.5</span>))</span>
<span id="cb334-28"><a href="transform.html#cb334-28" tabindex="-1"></a></span>
<span id="cb334-29"><a href="transform.html#cb334-29" tabindex="-1"></a><span class="fu">grid.arrange</span>(box1, hist1, cdf1, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:salary-ps-plots"></span>
<img src="09-transf_files/figure-html/salary-ps-plots-1.png" alt="Annual Salaries ($1000s) Reported by Poly Sci Majors" width="672" />
<p class="caption">
Figure 9.7: Annual Salaries ($1000s) Reported by Poly Sci Majors
</p>
</div>
<p>The EDA plots confirm the salary discrepancy between male and female survey respondents and also suggest the <strong>presence of some outliers</strong>! Note how both the boxplot and histogram show a small amount of data way, way off to the right of each plot, where salary is about $1,000,000/yr. Strangely, there are no respondent data between about $500,000/yr and $1,000,000/yr. This seems very odd…</p>
<p>Upon further digging into these data, the <a href="https://www.nsf.gov/statistics/2020/nsf20300/pdf/nsf20300.pdf">authors of the survey state</a> that “imputation methods” are employed for missing data. <strong><em>Imputation</em></strong> is a process where values are <em>guessed</em> based on a statistical inference of the data at hand. My suspicion is that a number of respondents chose not to report their annual salary (answers are optional) and that these extreme outliers were imputed based on other data/factors.</p>
</div>
<div id="rescale-and-censor-data" class="section level3 hasAnchor" number="9.6.3">
<h3><span class="header-section-number">9.6.3</span> Rescale and Censor Data<a href="transform.html#rescale-and-censor-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s make the following transformations to the data:</p>
<ul>
<li>We will <em>rescale</em> the salary data to units of thousands of dollars to remove some of the zeros from the plot labels;</li>
<li>We will <em>censor</em> salaries above $500k/yr, since the validity of these numbers is dubious (<em>and because this is an exercise on data censoring</em>);</li>
<li>We will <em>censor</em> salary levels below $10k/yr, because values below that level do not exceed the minimum wage for someone working full time.</li>
</ul>
<div class="rmdnote">
<p>
Each of these censoring actions is questionable and arguments for
keeping or removing these outliers are possible. However, for the
modeling exercise below (where we try to simulate the bulk of the
univariate salary distribution), it is unlikely that these censoring
actions have a strong effect on the outcome.
</p>
</div>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="transform.html#cb335-1" tabindex="-1"></a><span class="co">#rescale and censor the salary data</span></span>
<span id="cb335-2"><a href="transform.html#cb335-2" tabindex="-1"></a>salary_ps2 <span class="ot">&lt;-</span> salary_ps <span class="sc">%&gt;%</span></span>
<span id="cb335-3"><a href="transform.html#cb335-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">salary =</span> salary<span class="sc">/</span><span class="dv">1000</span>) <span class="sc">%&gt;%</span> <span class="co">#convert to thousands of $</span></span>
<span id="cb335-4"><a href="transform.html#cb335-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(salary <span class="sc">&lt;</span> <span class="dv">500</span>, <span class="co">#censor high outliers</span></span>
<span id="cb335-5"><a href="transform.html#cb335-5" tabindex="-1"></a>                salary <span class="sc">&gt;</span> <span class="dv">10</span>)  <span class="co">#censor low outliers</span></span></code></pre></div>
<p>Let’s recreate the EDA plots from Figure <a href="transform.html#fig:salary-ps-plots">9.7</a> using the transformed and censored data.</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="transform.html#cb336-1" tabindex="-1"></a><span class="co">#recreate EDA plots</span></span>
<span id="cb336-2"><a href="transform.html#cb336-2" tabindex="-1"></a>box2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> salary_ps2,</span>
<span id="cb336-3"><a href="transform.html#cb336-3" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> sex,</span>
<span id="cb336-4"><a href="transform.html#cb336-4" tabindex="-1"></a>           <span class="at">x =</span> salary,</span>
<span id="cb336-5"><a href="transform.html#cb336-5" tabindex="-1"></a>           <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb336-6"><a href="transform.html#cb336-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb336-7"><a href="transform.html#cb336-7" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(<span class="at">suffix =</span> <span class="st">&quot;k&quot;</span>))<span class="sc">+</span></span>
<span id="cb336-8"><a href="transform.html#cb336-8" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb336-9"><a href="transform.html#cb336-9" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb336-10"><a href="transform.html#cb336-10" tabindex="-1"></a></span>
<span id="cb336-11"><a href="transform.html#cb336-11" tabindex="-1"></a>hist2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> salary_ps2,</span>
<span id="cb336-12"><a href="transform.html#cb336-12" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> salary,</span>
<span id="cb336-13"><a href="transform.html#cb336-13" tabindex="-1"></a>           <span class="at">fill =</span> sex)) <span class="sc">+</span></span>
<span id="cb336-14"><a href="transform.html#cb336-14" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb336-15"><a href="transform.html#cb336-15" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">50</span>) <span class="sc">+</span></span>
<span id="cb336-16"><a href="transform.html#cb336-16" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(<span class="at">suffix =</span> <span class="st">&quot;k&quot;</span>)) <span class="sc">+</span></span>
<span id="cb336-17"><a href="transform.html#cb336-17" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb336-18"><a href="transform.html#cb336-18" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position.inside =</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.5</span>))</span>
<span id="cb336-19"><a href="transform.html#cb336-19" tabindex="-1"></a></span>
<span id="cb336-20"><a href="transform.html#cb336-20" tabindex="-1"></a>cdf2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> salary_ps2,</span>
<span id="cb336-21"><a href="transform.html#cb336-21" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> salary,</span>
<span id="cb336-22"><a href="transform.html#cb336-22" tabindex="-1"></a>           <span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb336-23"><a href="transform.html#cb336-23" tabindex="-1"></a>  <span class="fu">stat_ecdf</span>() <span class="sc">+</span></span>
<span id="cb336-24"><a href="transform.html#cb336-24" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(<span class="at">suffix =</span> <span class="st">&quot;k&quot;</span>)) <span class="sc">+</span></span>
<span id="cb336-25"><a href="transform.html#cb336-25" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb336-26"><a href="transform.html#cb336-26" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Quantile&quot;</span>) <span class="sc">+</span></span>
<span id="cb336-27"><a href="transform.html#cb336-27" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position.inside =</span> <span class="fu">c</span>(<span class="fl">0.75</span>, <span class="fl">0.5</span>))</span>
<span id="cb336-28"><a href="transform.html#cb336-28" tabindex="-1"></a></span>
<span id="cb336-29"><a href="transform.html#cb336-29" tabindex="-1"></a><span class="fu">grid.arrange</span>(box2, hist2, cdf2, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:salary-ps2-plots"></span>
<img src="09-transf_files/figure-html/salary-ps2-plots-1.png" alt="2017 Annual Salaries ($1000s) Reported by Poly Sci Majors" width="672" />
<p class="caption">
Figure 9.8: 2017 Annual Salaries ($1000s) Reported by Poly Sci Majors
</p>
</div>
<p>Closer examination of these EDA plots suggests that, even after censoring and rescaling, the data are <em>skewed</em>: the lack of symmetry about the median (or mode, for the histogram) is evident in each plot. Looking at the shape of these distributions (and those in the <a href="dist.html#dist">Appendix</a>) suggests that these data may be <a href="dist.html#log_normal_dist">log-normally</a> distributed.</p>
</div>
<div id="logfit" class="section level3 hasAnchor" number="9.6.4">
<h3><span class="header-section-number">9.6.4</span> Fit a Log-normal Distribution<a href="transform.html#logfit" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, let’s examine whether our salary data can be approximated with a log-normal distribution. There is a function in the <code>MASS::</code> package called <code>fitdistr()</code> that uses <a href="https://en.wikipedia.org/wiki/Maximum_likelihood_estimation"><em>Maximum Likelihood Estimation</em></a> theory (MLE), to estimate density function parameters for various reference distributions. The <code>fitdistr()</code> function requires a numeric vector of observed values, <code>x =</code> the data to be fit, and a “named” reference distribution to be modeled, <code>densfun = "log-normal"</code>.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="transform.html#cb337-1" tabindex="-1"></a>fit.lnorm <span class="ot">&lt;-</span> <span class="fu">fitdistr</span>(salary_ps2<span class="sc">$</span>salary, <span class="at">densfun =</span> <span class="st">&quot;log-normal&quot;</span>)</span></code></pre></div>
<p>The output of <code>MASS::fitdistr()</code> is a <code>list</code>, with the first entry containing the fit parameters for the log-normal distribution (<code>meanlog</code> and <code>sdlog</code>).</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="transform.html#cb338-1" tabindex="-1"></a>fit.lnorm<span class="sc">$</span>estimate <span class="sc">%&gt;%</span></span>
<span id="cb338-2"><a href="transform.html#cb338-2" tabindex="-1"></a>  <span class="fu">round</span>(., <span class="dv">2</span>) </span></code></pre></div>
<pre><code>## meanlog   sdlog 
##    4.32    0.67</code></pre>
<p>These two estimates represent the mean and standard deviation of the data <em>after</em> taking the log of each observation:</p>
<ul>
<li><code>meanlog</code> or <span class="math inline">\(\hat{\mu}=\)</span> <code>mean(log(salary))</code> and</li>
<li><code>sdlog</code> or <span class="math inline">\(\hat{\sigma_g}=\)</span><code>sd(log(salary))</code>).</li>
</ul>
<p>Recall that lognormal data appear <em>normally distributed</em> when you take the log of each observation. To convert these values back into units of dollars, we must exponentiate them:</p>
<div align="center">
<strong>Geometric Mean</strong> = <span class="math inline">\(exp(\hat{\mu})\)</span>
</div>
<div align="center">
<strong>Geometric Standard Deviation (GSD)</strong> = <span class="math inline">\(exp(\hat{\sigma_g})\)</span>
</div>
<p>Geometric mean salary = 75.37<br />
Geometric standard deviation = 1.95</p>
<div class="rmdnote">
<p>
The terms <em>meanlog</em> and <em>sdlog</em> represent log-space
values (i.e., the data have been log transformed) - for that reason they
are unitless. The term <em>geometric mean</em> is presented in the units
of the data (read: it’s the easiest to comprehend). The <em>geometric
standard deviation</em> (GSD) is also unitless but different from
<em>sdlog</em>. The <strong>GSD is a ratio of quantiles</strong>: it
represents the ratio of data values at quantiles that are separated by a
standard deviation: <span class="math inline"><span class="math inline">\(GSD =
\frac{q_{84}}{q_{50}}\)</span></span> (the 0.84 quantile divided by the 0.5
quantile). GSD can also be calculated in the other direction, <span class="math inline"><span class="math inline">\(GSD = \frac{q_{50}}{q_{16}}\)</span></span>, the 0.5
quantile divided by the 0.16 quantile.
</p>
</div>
</div>
<div id="plot-fitted-vs-actual-data" class="section level3 hasAnchor" number="9.6.5">
<h3><span class="header-section-number">9.6.5</span> Plot Fitted vs Actual Data<a href="transform.html#plot-fitted-vs-actual-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will conclude this exercise by examining graphically whether our fitted distribution tends to match the observed data. Now that we have “best” fitted parameters for a lognormal distribution that approximates our data, how well does the fit perform?</p>
<p>To answer that question, we can simulate a <em>new</em> distribution and compare it to our observed data. To simulate observations from a lognormal distribution we need to supply the function <code>stats::rlnorm()</code> with the following arguments:</p>
<ul>
<li><code>n =</code> the sample size of observations (we will use n = <code>length(salary_ps2$salary)</code>)</li>
<li><code>meanlog =</code> the estimated mean of the logged data (<span class="math inline">\(\hat{\mu}=\)</span> 4.32)</li>
<li><code>sdlog =</code> the standard devation of the logged data (<span class="math inline">\(\hat{\sigma_g}=\)</span> 0.67)</li>
</ul>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="transform.html#cb340-1" tabindex="-1"></a>sal_simulate <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">rlnorm</span>(<span class="at">n =</span> <span class="fu">length</span>(salary_ps2<span class="sc">$</span>salary),</span>
<span id="cb340-2"><a href="transform.html#cb340-2" tabindex="-1"></a>                                 <span class="at">meanlog =</span> fit.lnorm<span class="sc">$</span>estimate[[<span class="dv">1</span>]],</span>
<span id="cb340-3"><a href="transform.html#cb340-3" tabindex="-1"></a>                                 <span class="at">sdlog =</span> fit.lnorm<span class="sc">$</span>estimate[[<span class="dv">2</span>]]))</span>
<span id="cb340-4"><a href="transform.html#cb340-4" tabindex="-1"></a></span>
<span id="cb340-5"><a href="transform.html#cb340-5" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb340-6"><a href="transform.html#cb340-6" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">data =</span> salary_ps2,</span>
<span id="cb340-7"><a href="transform.html#cb340-7" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> salary,</span>
<span id="cb340-8"><a href="transform.html#cb340-8" tabindex="-1"></a>                     <span class="at">y =</span> ..density..),</span>
<span id="cb340-9"><a href="transform.html#cb340-9" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb340-10"><a href="transform.html#cb340-10" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;navy&quot;</span>,</span>
<span id="cb340-11"><a href="transform.html#cb340-11" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">35</span>) <span class="sc">+</span></span>
<span id="cb340-12"><a href="transform.html#cb340-12" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">data =</span> sal_simulate,</span>
<span id="cb340-13"><a href="transform.html#cb340-13" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> x),</span>
<span id="cb340-14"><a href="transform.html#cb340-14" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;darkorange1&quot;</span>,</span>
<span id="cb340-15"><a href="transform.html#cb340-15" tabindex="-1"></a>               <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb340-16"><a href="transform.html#cb340-16" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Probability Density&quot;</span>) <span class="sc">+</span></span>
<span id="cb340-17"><a href="transform.html#cb340-17" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(<span class="at">suffix =</span> <span class="st">&quot;k&quot;</span>),</span>
<span id="cb340-18"><a href="transform.html#cb340-18" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">500</span>)) <span class="sc">+</span></span>
<span id="cb340-19"><a href="transform.html#cb340-19" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:log-salary"></span>
<img src="09-transf_files/figure-html/log-salary-1.png" alt="Salary Data Fitted by a Lognormal Distribution" width="672" />
<p class="caption">
Figure 9.9: Salary Data Fitted by a Lognormal Distribution
</p>
</div>
<p>The eyeball test of our fit looks pretty good, which suggests that our data is indeed log-normal (or at least is reasonably approximated by a lognormal distribution). Question to ponder: <em>when you know that your data are lognormal, does that change your expectation for what might be defined as an outlier?</em></p>
</div>
<div id="transform-the-data" class="section level3 hasAnchor" number="9.6.6">
<h3><span class="header-section-number">9.6.6</span> Transform the Data<a href="transform.html#transform-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we know that (1) these data are skewed (non-normal) and (2) likely log-normally distributed, let’s see what happens when we <em>transform</em> these data. Figure <a href="transform.html#fig:salary-transform">9.10</a> appears much more symmetric (read:normal) following the log transform.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="transform.html#cb341-1" tabindex="-1"></a>salary_ps2 <span class="ot">&lt;-</span> salary_ps2 <span class="sc">%&gt;%</span></span>
<span id="cb341-2"><a href="transform.html#cb341-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log.salary =</span> <span class="fu">log</span>(salary))</span>
<span id="cb341-3"><a href="transform.html#cb341-3" tabindex="-1"></a></span>
<span id="cb341-4"><a href="transform.html#cb341-4" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb341-5"><a href="transform.html#cb341-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">data =</span> salary_ps2,</span>
<span id="cb341-6"><a href="transform.html#cb341-6" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> log.salary),</span>
<span id="cb341-7"><a href="transform.html#cb341-7" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb341-8"><a href="transform.html#cb341-8" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;navy&quot;</span>,</span>
<span id="cb341-9"><a href="transform.html#cb341-9" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb341-10"><a href="transform.html#cb341-10" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Frequency&quot;</span>) <span class="sc">+</span></span>
<span id="cb341-11"><a href="transform.html#cb341-11" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;ln(salary)&quot;</span>) <span class="sc">+</span></span>
<span id="cb341-12"><a href="transform.html#cb341-12" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:salary-transform"></span>
<img src="09-transf_files/figure-html/salary-transform-1.png" alt="Histogram of Log-transformed Salary Data" width="672" />
<p class="caption">
Figure 9.10: Histogram of Log-transformed Salary Data
</p>
</div>
<p>When visualizing lognormal data, however, it’s ofen a better idea to transform the axis (instead of transforming the data themselves). This allows the viewer to “see” the units of measurement in their natural form, instead of forcing the viewer to exponentiate values in their head (hint: nobody likes to do this). Therefore, we can <em>transform</em> our data visualization with a call to <code>scale_x_log10()</code> in <code>ggplot::</code>. Transforming the x- or y-axis is common in data visualization, especially when your values span several orders of magnitude.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="transform.html#cb342-1" tabindex="-1"></a>salary_ps2 <span class="ot">&lt;-</span> salary_ps2 <span class="sc">%&gt;%</span></span>
<span id="cb342-2"><a href="transform.html#cb342-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log.salary =</span> <span class="fu">log</span>(salary))</span>
<span id="cb342-3"><a href="transform.html#cb342-3" tabindex="-1"></a></span>
<span id="cb342-4"><a href="transform.html#cb342-4" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb342-5"><a href="transform.html#cb342-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">data =</span> salary_ps2,</span>
<span id="cb342-6"><a href="transform.html#cb342-6" tabindex="-1"></a>                 <span class="fu">aes</span>(<span class="at">x =</span> salary),</span>
<span id="cb342-7"><a href="transform.html#cb342-7" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb342-8"><a href="transform.html#cb342-8" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;navy&quot;</span>,</span>
<span id="cb342-9"><a href="transform.html#cb342-9" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb342-10"><a href="transform.html#cb342-10" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Frequency&quot;</span>) <span class="sc">+</span></span>
<span id="cb342-11"><a href="transform.html#cb342-11" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Salary&quot;</span>) <span class="sc">+</span></span>
<span id="cb342-12"><a href="transform.html#cb342-12" tabindex="-1"></a>  <span class="co"># transform the axis, instead of the data (works well with lognormal data)</span></span>
<span id="cb342-13"><a href="transform.html#cb342-13" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(<span class="at">accuracy =</span> <span class="dv">1</span>, </span>
<span id="cb342-14"><a href="transform.html#cb342-14" tabindex="-1"></a>                                              <span class="at">suffix =</span> <span class="st">&quot;k&quot;</span>)) <span class="sc">+</span></span>
<span id="cb342-15"><a href="transform.html#cb342-15" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:salary-transform2"></span>
<img src="09-transf_files/figure-html/salary-transform2-1.png" alt="Histogram of Salary Data using a Log-10 X-axis" width="672" />
<p class="caption">
Figure 9.11: Histogram of Salary Data using a Log-10 X-axis
</p>
</div>
</div>
</div>
<div id="ch-9-homework" class="section level2 hasAnchor" number="9.7">
<h2><span class="header-section-number">9.7</span> Ch-9 Homework<a href="transform.html#ch-9-homework" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This homework will give you practice at transforming and visualizing data and fitting a distribution to a set of data. Note that much of the code needed to complete this homework can be adapted from the <a href="https://smogdr.github.io/edar_coursebook/transform.html#ch-9-exercises">Chapter 9 Exercises</a> shown above.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rprog4.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="measure.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
